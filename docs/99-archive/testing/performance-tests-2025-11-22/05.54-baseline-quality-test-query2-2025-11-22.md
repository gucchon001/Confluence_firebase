# ベースライン品質テスト（クエリ2） (2025-11-22)

**作成日**: 2025年11月22日  
**目的**: 新しいテストクエリ2での検索品質を測定し、改善案の評価基準とする

---

## 📋 テスト設定

### テストクエリ2

**クエリ**: `ユーザーが応募したら、その同一の求人には何日間応募できなくなるか`

### 合格基準

**必須条件**: 検索結果の10位以内に以下のページが含まれること

- **ページ**: `014_【FIX】求人応募機能`

---

## 🔧 テスト実行方法

### テスト実行

```bash
npm run test:search-quality -- --query="ユーザーが応募したら、その同一の求人には何日間応募できなくなるか" --target="014_【FIX】求人応募機能"
```

---

## 📊 テスト結果

### ステータス

- ✅ **完了**: 2025年11月22日

### ベースライン結果

#### 検索結果（上位10件）

1. 015_【作成中】教室および求人の公開/掲載の条件 (Page ID: 702578724)
2. 【FIX】応募メッセージ情報 (Page ID: 691470453)
3. ユーザー登録・退会フロー（テンプレ） (Page ID: 666927160)
4. 権限 (Page ID: 666927127)
5. 014-1_【FIX】求人応募兼会員登録機能 (Page ID: 865599790)
6. **014_【FIX】求人応募機能** (Page ID: 703463606) ⭐
7. 【FIX】求人：応募情報等 (Page ID: 724402327)
8. 【FIX】求人：応募条件・研修情報 (Page ID: 724271684)
9. 173_3【FIX】求人情報編集機能（応募情報等タブ） (Page ID: 828965004)
10. 513_3【FIX】教室管理-求人情報編集機能（応募情報等タブ） (Page ID: 884080863)

#### 対象ページの順位

- **`014_【FIX】求人応募機能`**: **6位** ✅

#### テスト結果

- ✅ **合格**: 対象ページが10位以内に含まれている（6位）

#### パフォーマンス

- **検索時間**: 612ms (約0.6秒)
- **検索結果数**: 30件
- **BM25検索時間**: 140ms (約0.14秒)
- **ベクトル検索時間**: 29ms (約0.03秒)

---

## 📝 ベースライン記録

### 検索品質

- **対象ページの順位**: 6位
- **合格基準**: 10位以内 ✅
- **マージン**: 4位の余裕

### パフォーマンス

- **検索処理完了時間**: 612ms
- **目標**: 2000ms以下 ✅
- **評価**: 目標を達成（約3.3倍の余裕）

---

## 🔍 分析

### 検索品質の評価

現在の実装では、対象ページが6位に含まれており、合格基準（10位以内）を満たしています。4位のマージンがあるため、パフォーマンス改善を行っても品質を維持できる可能性が高いです。

### パフォーマンスの評価

検索時間が約0.6秒と非常に高速で、目標の2000ms以下を大きく下回っています。このクエリは既に最適化されている状態です。

### 改善案の影響予測

1. **Composite Scoringの結果数を削減（100件 → 50件）**
   - 影響: 中程度
   - 予測: 6位のマージンがあるため、品質への影響は限定的

2. **RRF融合処理の早期絞り込み（全件 → 100件）**
   - 影響: 中程度
   - 予測: 6位のマージンがあるため、品質への影響は限定的

3. **タイトル救済検索の候補数を削減（10件 → 5件）**
   - 影響: 低
   - 予測: 品質への影響はほとんどない

4. **重複除去処理の最適化**
   - 影響: 低
   - 予測: 品質への影響はない

---

## 🔗 関連ドキュメント

- [品質テスト基準](./05.50-quality-test-criteria-2025-11-22.md)
- [ベースライン品質テスト（クエリ1）](./05.51-baseline-quality-test-2025-11-22.md)

