# æœ¬ç•ªç’°å¢ƒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç·Šæ€¥å¯¾å¿œ (2025-10-20)

**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”´ **å¯¾å¿œä¸­**  
**ç™ºç”Ÿæ—¥æ™‚**: 2025å¹´10æœˆ20æ—¥  
**å½±éŸ¿**: æ¤œç´¢å‡¦ç†ãŒ117.2ç§’ï¼ˆç›®æ¨™: 10ç§’ä»¥å†…ï¼‰

---

## ğŸ“Š ç¾çŠ¶ã®å•é¡Œ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™ï¼ˆæœ¬ç•ªç’°å¢ƒï¼‰

| æŒ‡æ¨™ | æ¸¬å®šå€¤ | ç›®æ¨™å€¤ | å·®åˆ† |
|------|--------|--------|------|
| ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æ™‚é–“ | 0ms | - | âœ… æ­£å¸¸ |
| åˆæœŸå¿œç­”æ™‚é–“(TTFB) | 5ms | - | âœ… æ­£å¸¸ |
| **æ¤œç´¢æ™‚é–“** | **105.9ç§’** | 1ç§’ | ğŸ”´ **+104.9ç§’** |
| **AIç”Ÿæˆæ™‚é–“** | **11.2ç§’** | 5ç§’ | ğŸŸ¡ **+6.2ç§’** |
| **ç·å‡¦ç†æ™‚é–“** | **117.2ç§’** | 10ç§’ | ğŸ”´ **+107.2ç§’** |
| å‚ç…§æ•° | 12ä»¶ | - | âœ… æ­£å¸¸ |

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¨ã®æ¯”è¼ƒ

| ç’°å¢ƒ | æ¤œç´¢æ™‚é–“ | AIç”Ÿæˆæ™‚é–“ | ç·å‡¦ç†æ™‚é–“ |
|------|---------|-----------|-----------|
| **ãƒ­ãƒ¼ã‚«ãƒ«** | ~1ç§’ | ~5ç§’ | **~10ç§’** |
| **æœ¬ç•ª** | 105.9ç§’ | 11.2ç§’ | **117.2ç§’** |
| **å·®åˆ†** | +104.9ç§’ | +6.2ç§’ | **+107.2ç§’** |

---

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### 1. æ¨©é™ã‚¨ãƒ©ãƒ¼ï¼ˆãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ï¼‰: **-38ç§’å‰Šæ¸›è¦‹è¾¼ã¿**

**å•é¡Œ**:
```
Error: 7 PERMISSION_DENIED: Permission monitoring.timeSeries.create denied
â†’ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¾ã§ç´„38ç§’å¾…æ©Ÿ
```

**åŸå› **:
- ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æŒ‡æ¨™ä½œæˆè€…ãƒ­ãƒ¼ãƒ«ãŒä¸è¶³
- `instrumentation.js` ãŒãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Cloud Monitoringã«é€ä¿¡ã—ã‚ˆã†ã¨ã—ã¦ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ

**å½±éŸ¿**: **38ç§’ã®é…å»¶**

### 2. ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆEmbedding ãƒ¢ãƒ‡ãƒ«ï¼‰: **-17ç§’å‰Šæ¸›è¦‹è¾¼ã¿**

**å•é¡Œ**:
- Xenova Transformersï¼ˆ768æ¬¡å…ƒãƒ¢ãƒ‡ãƒ«ï¼‰ã®èª­ã¿è¾¼ã¿ã«17ç§’
- minInstances: 1 ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŒã€åŠ¹æœãŒä¸ååˆ†

**åŸå› **:
- ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã§æ¯å›åˆæœŸåŒ–ã•ã‚Œã‚‹
- ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ©Ÿèƒ½ã—ã¦ã„ãªã„å¯èƒ½æ€§

**å½±éŸ¿**: **17ç§’ã®é…å»¶**

### 3. ãƒªãƒ¼ã‚¸ãƒ§ãƒ³é–“ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: **-æ•°ç§’å‰Šæ¸›è¦‹è¾¼ã¿**

**å•é¡Œ**:
```
App Hosting:  us-central1 (ç±³å›½ã‚¢ã‚¤ã‚ªãƒ¯å·)
Firestore:    asia-northeast1 (æ±äº¬)
â†’ å¤ªå¹³æ´‹ã‚’æ¨ªæ–­ã™ã‚‹é€šä¿¡ï¼ˆRTT: 100-200msï¼‰
```

**å½±éŸ¿ç®‡æ‰€**:
- ä¼šè©±å±¥æ­´ã®ä¿å­˜ï¼ˆStream->>FS: ä¼šè©±å±¥æ­´ä¿å­˜ï¼‰
- ãƒ­ã‚°è¨˜éŒ²ï¼ˆpostLogsã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—

**å½±éŸ¿**: **æ•°ç§’ã€œ10ç§’ã®é…å»¶**ï¼ˆåŒæœŸå‘¼ã³å‡ºã—å›æ•°ã«ã‚ˆã‚‹ï¼‰

### 4. LanceDB getAllChunksByPageId: **-30ç§’å‰Šæ¸›è¦‹è¾¼ã¿**

**å•é¡Œ**:
- ãƒ­ã‚°ã§30ç§’ã‹ã‹ã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
- éåŠ¹ç‡ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ã‚­ãƒ£ãƒ³ãŒåŸå› 

**åŸå› **:
- LanceDBãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã—ã¦ã„ã‚‹
- Cloud Runã®ä»®æƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ä¸Šã§ã®I/Oæ€§èƒ½å•é¡Œ

**å½±éŸ¿**: **30ç§’ã®é…å»¶**

---

## ğŸš€ ç·Šæ€¥å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³

### ã€ãƒ•ã‚§ãƒ¼ã‚º1ã€‘å³æ™‚å¯¾å¿œï¼ˆä»Šã™ãå®Ÿæ–½ï¼‰

#### âœ… å¯¾å¿œ1-1: æ¨©é™ã‚¨ãƒ©ãƒ¼ã®è§£æ±ºï¼ˆ-38ç§’ï¼‰

**ä½œæ¥­å†…å®¹**:
1. Firebase Console â†’ IAM ã¨ç®¡ç† â†’ IAM
2. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¤œç´¢:
   ```
   {PROJECT_ID}@appspot.gserviceaccount.com
   ```
3. ãƒ­ãƒ¼ãƒ«ã‚’è¿½åŠ :
   - `Monitoring Metric Writer` (roles/monitoring.metricWriter)

**ç¢ºèªã‚³ãƒãƒ³ãƒ‰**:
```bash
# ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ç¢ºèª
gcloud projects get-iam-policy confluence-copilot-ppjye \
  --flatten="bindings[].members" \
  --filter="bindings.members:*appspot.gserviceaccount.com"
```

**ä»£æ›¿æ¡ˆ**: ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
```typescript
// instrumentation.js
// Cloud Monitoringã¸ã®é€ä¿¡ã‚’ç„¡åŠ¹åŒ–ï¼ˆä¸€æ™‚çš„ï¼‰
if (process.env.DISABLE_CLOUD_MONITORING === 'true') {
  return; // ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ç„¡åŠ¹
}
```

#### âœ… å¯¾å¿œ1-2: ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆå¯¾ç­–å¼·åŒ–ï¼ˆ-17ç§’ï¼‰

**apphosting.yamlã«è¿½åŠ **:
```yaml
runConfig:
  minInstances: 2  # 1 â†’ 2ã«å¢—ã‚„ã™ï¼ˆå†—é•·æ€§å‘ä¸Šï¼‰
  maxInstances: 4
  
  # ã‚³ãƒ³ã‚«ãƒ¬ãƒ³ã‚·ãƒ¼è¨­å®šã‚’è¿½åŠ 
  concurrency: 1   # 1ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§1ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†ï¼ˆå®‰å®šæ€§å„ªå…ˆï¼‰
  
  # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå»¶é•·
  timeoutSeconds: 300  # 5åˆ†ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ60ç§’ã‹ã‚‰å»¶é•·ï¼‰
```

**ç’°å¢ƒå¤‰æ•°ã«è¿½åŠ **:
```yaml
env:
  # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å¼·åˆ¶
  - variable: FORCE_GLOBAL_CACHE
    value: "true"
    availability:
      - RUNTIME
```

#### âœ… å¯¾å¿œ1-3: Firestoreã‚¢ã‚¯ã‚»ã‚¹ã‚’éåŒæœŸåŒ–ï¼ˆ-æ•°ç§’ï¼‰

**ä¿®æ­£å¯¾è±¡**: `src/app/api/streaming-process/route.ts`

**ä¿®æ­£ç®‡æ‰€1**: ä¼šè©±å±¥æ­´ä¿å­˜ã‚’éåŒæœŸåŒ–
```typescript
// ä¿®æ­£å‰
Stream->>FS: ä¼šè©±å±¥æ­´ä¿å­˜
await savePostLogToAdminDB(logData);

// ä¿®æ­£å¾Œï¼ˆéåŒæœŸå®Ÿè¡Œï¼‰
savePostLogToAdminDB(logData).catch(error => {
  console.error('ãƒ­ã‚°ä¿å­˜ã‚¨ãƒ©ãƒ¼ï¼ˆéåŒæœŸï¼‰:', error);
});
// å¾…ãŸãšã«æ¬¡ã®å‡¦ç†ã¸
```

**ä¿®æ­£ç®‡æ‰€2**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã‚’ä¸¦åˆ—åŒ–
```typescript
// æ—¢ã«ä¸¦åˆ—åŒ–ã•ã‚Œã¦ã„ã‚‹ãŒã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚’è¿½åŠ 
Promise.race([
  getUserInfo(),
  new Promise((_, reject) => 
    setTimeout(() => reject(new Error('timeout')), 2000)
  )
]).catch(() => 'anonymous')
```

---

### ã€ãƒ•ã‚§ãƒ¼ã‚º2ã€‘çŸ­æœŸå¯¾å¿œï¼ˆ24æ™‚é–“ä»¥å†…ï¼‰

#### ğŸ”§ å¯¾å¿œ2-1: LanceDB getAllChunksByPageId ã®æœ€é©åŒ–

**ç¾åœ¨ã®å®Ÿè£…**:
```typescript
// éåŠ¹ç‡: ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’ã‚¹ã‚­ãƒ£ãƒ³
async function getAllChunksByPageId(pageId: string) {
  const allRows = await table.toArray(); // å…¨ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  return allRows.filter(row => row.pageId === pageId);
}
```

**æœ€é©åŒ–ç‰ˆ**:
```typescript
// åŠ¹ç‡çš„: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’ä½¿ç”¨
async function getAllChunksByPageId(pageId: string) {
  return await table
    .search([0, 0, ..., 0]) // ãƒ€ãƒŸãƒ¼ãƒ™ã‚¯ãƒˆãƒ«
    .filter(`pageId = '${pageId}'`)
    .limit(1000)
    .toArray();
}
```

**ã•ã‚‰ã«æœ€é©åŒ–**: Firestoreã«ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
```typescript
// LanceDBã®ä»£ã‚ã‚Šã«Firestoreã‹ã‚‰å–å¾—
const cachedMetadata = await firestoreClient
  .collection('pageMetadata')
  .doc(pageId)
  .get();
```

#### ğŸ”§ å¯¾å¿œ2-2: LunråˆæœŸåŒ–ã®ç¢ºèª

**ç¢ºèªé …ç›®**:
```typescript
// lunr-initializer.ts
let globalLunrInstance = null;

export async function initializeLunr() {
  if (globalLunrInstance) {
    console.log('âœ… Lunr: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å†åˆ©ç”¨');
    return globalLunrInstance;
  }
  
  console.log('â³ Lunr: åˆæœŸåŒ–é–‹å§‹...');
  const startTime = Date.now();
  globalLunrInstance = await buildLunrIndex();
  console.log(`âœ… Lunr: åˆæœŸåŒ–å®Œäº† (${Date.now() - startTime}ms)`);
  
  return globalLunrInstance;
}
```

---

### ã€ãƒ•ã‚§ãƒ¼ã‚º3ã€‘ä¸­æœŸå¯¾å¿œï¼ˆ1é€±é–“ä»¥å†…ï¼‰

#### ğŸŒ å¯¾å¿œ3-1: ãƒªãƒ¼ã‚¸ãƒ§ãƒ³çµ±ä¸€ã®æ¤œè¨

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1**: App Hostingã‚’ asia-northeast1 ã«ç§»è¡Œ
- **ãƒ¡ãƒªãƒƒãƒˆ**: Firestoreã¨åŒä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·è§£æ¶ˆ
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: ç§»è¡Œä½œæ¥­ãŒå¿…è¦
- **æ¨å¥¨**: âœ… **ã“ã‚Œã‚’æ¨å¥¨**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ—¥æœ¬ã®ãŸã‚ï¼‰

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2**: Firestoreã‚’ us-central1 ã«ç§»è¡Œ
- **ãƒ¡ãƒªãƒƒãƒˆ**: App Hostingã¨åŒä¸€ãƒªãƒ¼ã‚¸ãƒ§ãƒ³
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: æ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒé…ããªã‚‹
- **æ¨å¥¨**: âŒ éæ¨å¥¨

**å®Ÿæ–½æ‰‹é †** ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³1ï¼‰:
1. æ–°ã—ã„App Hostingãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ asia-northeast1 ã«ä½œæˆ
2. apphosting.yamlã« region ã‚’è¿½åŠ :
   ```yaml
   region: asia-northeast1
   ```
3. ãƒ‡ãƒ¼ã‚¿ã‚’åŒã˜ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã®Cloud Storageã«é…ç½®
4. æ®µéšçš„ã«åˆ‡ã‚Šæ›¿ãˆ

#### ğŸ”§ å¯¾å¿œ3-2: Cloud Storageã‚‚ãƒªãƒ¼ã‚¸ãƒ§ãƒ³APIã‚’çµ±ä¸€

**ç¾çŠ¶**:
```
Cloud Storage: us-central1
Firestore:     asia-northeast1
App Hosting:   us-central1
```

**ç›®æ¨™**:
```
Cloud Storage: asia-northeast1 â† æ–°è¦ãƒã‚±ãƒƒãƒˆä½œæˆ
Firestore:     asia-northeast1
App Hosting:   asia-northeast1 â† æ–°è¦ä½œæˆ
```

---

## ğŸ“Š äºˆæƒ³ã•ã‚Œã‚‹æ”¹å–„åŠ¹æœ

### ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†å¾Œ

| é …ç›® | æ”¹å–„å‰ | æ”¹å–„å¾Œ | å‰Šæ¸› |
|------|--------|--------|------|
| æ¨©é™ã‚¨ãƒ©ãƒ¼ | 38ç§’ | 0ç§’ | **-38ç§’** |
| ã‚³ãƒ¼ãƒ«ãƒ‰ã‚¹ã‚¿ãƒ¼ãƒˆ | 17ç§’ | 0ç§’ | **-17ç§’** |
| Firestoreãƒ¬ã‚¤ãƒ†ãƒ³ã‚· | 5ç§’ | 1ç§’ | **-4ç§’** |
| **æ¤œç´¢æ™‚é–“** | 105.9ç§’ | **46.9ç§’** | **-59ç§’** |
| **ç·å‡¦ç†æ™‚é–“** | 117.2ç§’ | **58.2ç§’** | **-59ç§’** |

### ãƒ•ã‚§ãƒ¼ã‚º2å®Œäº†å¾Œ

| é …ç›® | æ”¹å–„å‰ | æ”¹å–„å¾Œ | å‰Šæ¸› |
|------|--------|--------|------|
| getAllChunksæœ€é©åŒ– | 30ç§’ | 1ç§’ | **-29ç§’** |
| **æ¤œç´¢æ™‚é–“** | 46.9ç§’ | **17.9ç§’** | **-29ç§’** |
| **ç·å‡¦ç†æ™‚é–“** | 58.2ç§’ | **29.2ç§’** | **-29ç§’** |

### ãƒ•ã‚§ãƒ¼ã‚º3å®Œäº†å¾Œï¼ˆãƒªãƒ¼ã‚¸ãƒ§ãƒ³çµ±ä¸€ï¼‰

| é …ç›® | æ”¹å–„å‰ | æ”¹å–„å¾Œ | å‰Šæ¸› |
|------|--------|--------|------|
| ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãƒ¬ã‚¤ãƒ†ãƒ³ã‚· | 10ç§’ | 0ç§’ | **-10ç§’** |
| **æ¤œç´¢æ™‚é–“** | 17.9ç§’ | **7.9ç§’** | **-10ç§’** |
| **ç·å‡¦ç†æ™‚é–“** | 29.2ç§’ | **19.2ç§’** | **-10ç§’** |

### ğŸ¯ æœ€çµ‚ç›®æ¨™

| æŒ‡æ¨™ | ç¾çŠ¶ | ç›®æ¨™ | é”æˆç‡ |
|------|------|------|--------|
| æ¤œç´¢æ™‚é–“ | 105.9ç§’ | **1ç§’** | Phase 4ä»¥é™ |
| AIç”Ÿæˆæ™‚é–“ | 11.2ç§’ | **5ç§’** | Phase 2ã§é”æˆå¯èƒ½ |
| ç·å‡¦ç†æ™‚é–“ | 117.2ç§’ | **10ç§’** | Phase 4ä»¥é™ |

---

## ğŸ”§ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆå³æ™‚å¯¾å¿œï¼‰

- [ ] **æ¨©é™è¨­å®š**
  - [ ] IAMã§ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ãƒ­ãƒ¼ãƒ«è¿½åŠ 
  - [ ] å†ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿæ–½
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª

- [ ] **apphosting.yamlæ›´æ–°**
  - [ ] minInstances: 2 ã«å¤‰æ›´
  - [ ] concurrency: 1 è¿½åŠ 
  - [ ] timeoutSeconds: 300 è¿½åŠ 
  - [ ] ã‚³ãƒŸãƒƒãƒˆ & ãƒ—ãƒƒã‚·ãƒ¥

- [ ] **Firestoreã‚¢ã‚¯ã‚»ã‚¹éåŒæœŸåŒ–**
  - [ ] streaming-process/route.ts ä¿®æ­£
  - [ ] ä¼šè©±å±¥æ­´ä¿å­˜ã‚’éåŒæœŸåŒ–
  - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¿½åŠ 
  - [ ] ãƒ†ã‚¹ãƒˆå®Ÿæ–½

### ãƒ•ã‚§ãƒ¼ã‚º2ï¼ˆçŸ­æœŸå¯¾å¿œï¼‰

- [ ] **LanceDBæœ€é©åŒ–**
  - [ ] getAllChunksByPageId ã‚’æ›¸ãæ›ãˆ
  - [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¯ã‚¨ãƒªã«å¤‰æ›´
  - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

- [ ] **LunråˆæœŸåŒ–ç¢ºèª**
  - [ ] ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å‹•ä½œç¢ºèª
  - [ ] ãƒ­ã‚°å‡ºåŠ›ã§ç¢ºèª

### ãƒ•ã‚§ãƒ¼ã‚º3ï¼ˆä¸­æœŸå¯¾å¿œï¼‰

- [ ] **ãƒªãƒ¼ã‚¸ãƒ§ãƒ³çµ±ä¸€**
  - [ ] æ–°è¦App Hostingãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä½œæˆï¼ˆasia-northeast1ï¼‰
  - [ ] Cloud Storageãƒã‚±ãƒƒãƒˆä½œæˆï¼ˆasia-northeast1ï¼‰
  - [ ] ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ
  - [ ] æ®µéšçš„åˆ‡ã‚Šæ›¿ãˆ

---

## ğŸ“ ãƒ­ã‚°ãƒ»ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ç¢ºèªã™ã¹ããƒ­ã‚°

1. **Cloud Logging** (App Hosting):
   ```
   resource.type="cloud_run_revision"
   severity>=ERROR
   timestamp>="2025-10-20T00:00:00Z"
   ```

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ­ã‚°**:
   ```typescript
   console.log('ğŸ” æ¤œç´¢æ™‚é–“:', searchTime);
   console.log('ğŸ¤– AIç”Ÿæˆæ™‚é–“:', aiGenerationTime);
   console.log('â±ï¸ ç·å‡¦ç†æ™‚é–“:', totalTime);
   ```

3. **æ¨©é™ã‚¨ãƒ©ãƒ¼**:
   ```
   textPayload:"PERMISSION_DENIED"
   textPayload:"monitoring.timeSeries.create"
   ```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Phase 0A-4ç·Šæ€¥å¯¾å¿œï¼ˆå‰å›ï¼‰](../../archive/operations-legacy/phase-0a-4-96s-search-issue.md)
- [ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒªãƒ¼ã‚¸ãƒ§ãƒ³åˆ†æ](./cloud-storage-region-analysis.md)
- [æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ](./production-deployment-checklist.md)
- [Firebase App Hostingè¨­å®š](./firebase-app-hosting-configuration.md)

---

## ğŸš¨ ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

ä»¥ä¸‹ã®å ´åˆã¯é–‹ç™ºãƒãƒ¼ãƒ ã«ã‚¨ã‚¹ã‚«ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼š
- ãƒ•ã‚§ãƒ¼ã‚º1å®Œäº†å¾Œã‚‚60ç§’ä»¥ä¸Šã‹ã‹ã‚‹å ´åˆ
- æ¨©é™ã‚¨ãƒ©ãƒ¼ãŒè§£æ±ºã—ãªã„å ´åˆ
- æ–°ãŸãªå•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ20æ—¥  
**æ‹…å½“**: AI Agent  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”´ å¯¾å¿œä¸­

