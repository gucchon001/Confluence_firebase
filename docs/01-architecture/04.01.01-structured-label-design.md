# StructuredLabelï¼ˆæ§‹é€ åŒ–ãƒ©ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼‰è¨­è¨ˆæ›¸

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: 2025å¹´10æœˆ14æ—¥  
**Phase**: Phase 0A-1  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆå®Œäº†

---

## ğŸ“‹ æ¦‚è¦

æ—¢å­˜ã®`string[]`ãƒ©ãƒ™ãƒ«ã‚’ã€ã‚ˆã‚Šæ§‹é€ åŒ–ã•ã‚ŒãŸ`StructuredLabel`ã«ç½®ãæ›ãˆã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã‚’å®Ÿç¾ã—ã¾ã™ï¼š

1. âœ… **ç²¾å¯†ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°**: ã‚«ãƒ†ã‚´ãƒªã€ãƒ‰ãƒ¡ã‚¤ãƒ³ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãªã©å¤šè»¸ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
2. âœ… **æ¤œç´¢ç²¾åº¦å‘ä¸Š**: ãƒ©ãƒ™ãƒ«æƒ…å ±ã‚’æ´»ç”¨ã—ãŸã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°æ”¹å–„
3. âœ… **å°†æ¥ã®æ‹¡å¼µæ€§**: Jiraã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãªã©ä»–ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã®çµ±ä¸€çš„ãªç®¡ç†
4. âœ… **è‡ªå‹•åˆ†é¡**: LLMã«ã‚ˆã‚‹è‡ªå‹•ãƒ©ãƒ™ãƒ«ä»˜ã‘ã®åŸºç›¤

---

## ğŸ“Š æ—¢å­˜ãƒ©ãƒ™ãƒ«ã®å•é¡Œç‚¹

### åˆ†æçµæœï¼ˆ2025å¹´10æœˆ14æ—¥ï¼‰

| é …ç›® | å€¤ |
|------|-----|
| ç·ãƒšãƒ¼ã‚¸æ•° | 1,207ä»¶ |
| ç·ãƒ©ãƒ™ãƒ«æ•° | 19ç¨®é¡ |
| å¹³å‡ãƒ©ãƒ™ãƒ«æ•°/ãƒšãƒ¼ã‚¸ | 1.13å€‹ |

### å•é¡Œç‚¹

1. **ç²’åº¦ãŒãƒãƒ©ãƒãƒ©**
   - ã€Œæ©Ÿèƒ½è¦ä»¶ã€ãŒ64%ã‚’å ã‚ã‚‹ï¼ˆç²—ã™ãã‚‹ï¼‰
   - ã€Œæ•™å®¤ç®¡ç†ã€ã€Œä¼šå“¡ç®¡ç†ã€ãªã©ã®ãƒ‰ãƒ¡ã‚¤ãƒ³åˆ†é¡ãŒãªã„

2. **é‡è¤‡ãƒ©ãƒ™ãƒ«**
   - ã€Œè­°äº‹éŒ²ã€ï¼ˆ169ä»¶ï¼‰ã¨ã€Œmeeting-notesã€ï¼ˆ165ä»¶ï¼‰ãŒé‡è¤‡

3. **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æƒ…å ±ã®ä¸çµ±ä¸€**
   - ã‚¿ã‚¤ãƒˆãƒ«ã«ã€FIXã€‘ã€ã€ä½œæˆä¸­ã€‘ãŒåŸ‹ã‚è¾¼ã¾ã‚Œã¦ã„ã‚‹
   - ãƒ©ãƒ™ãƒ«ã¨ã—ã¦ç®¡ç†ã•ã‚Œã¦ã„ãªã„

4. **æ¤œç´¢ã§ã®æ´»ç”¨ãŒé™å®šçš„**
   - å˜ç´”ãªåŒ…å«ãƒã‚§ãƒƒã‚¯ã®ã¿
   - ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã«ååˆ†æ´»ç”¨ã•ã‚Œã¦ã„ãªã„

---

## ğŸ¯ StructuredLabelã‚¹ã‚­ãƒ¼ãƒ

### å‹å®šç¾©

```typescript
export interface StructuredLabel {
  category: DocumentCategory;     // spec, data, template, workflow, meeting, manual, other
  domain: SystemDomain;            // ä¼šå“¡ç®¡ç†, æ±‚äººç®¡ç†, æ•™å®¤ç®¡ç†, ãªã©
  feature: string;                 // å…·ä½“çš„ãªæ©Ÿèƒ½å
  priority: Priority;              // critical, high, medium, low, unknown
  status: DocumentStatus;          // draft, review, approved, deprecated, unknown
  version?: string;                // ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ï¼ˆä¾‹: "168", "515"ï¼‰
  tags?: string[];                 // è¿½åŠ ã®åˆ†é¡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
  confidence?: number;             // è‡ªå‹•ãƒ©ãƒ™ãƒ«ä»˜ã‘ã®ä¿¡é ¼åº¦ï¼ˆ0.0 - 1.0ï¼‰
}
```

---

## ğŸ“ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è©³ç´°

### 1. categoryï¼ˆã‚«ãƒ†ã‚´ãƒªï¼‰

**ç›®çš„**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ç¨®é¡ã‚’åˆ†é¡

| å€¤ | èª¬æ˜ | ä½¿ç”¨ä¾‹ | å‰²åˆï¼ˆæ¨å®šï¼‰ |
|----|------|--------|-------------|
| `spec` | ä»•æ§˜æ›¸ãƒ»æ©Ÿèƒ½è¦ä»¶ | ã€Œæ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã€ | 56% |
| `data` | å¸³ç¥¨ãƒ»ãƒ‡ãƒ¼ã‚¿å®šç¾© | ã€Œä¼šå“¡ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã€ | 7% |
| `template` | ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ | ã€Œå¿œå‹Ÿå®Œäº†ãƒ¡ãƒ¼ãƒ«ã€ | 7% |
| `workflow` | ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ | ã€Œãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒ•ãƒ­ãƒ¼ã€ | 4% |
| `meeting` | è­°äº‹éŒ² | ã€Œ2024-4-1 ç¢ºèªä¼šã€ | 14% |
| `manual` | ãƒãƒ‹ãƒ¥ã‚¢ãƒ« | ï¼ˆå°†æ¥ã®æ‹¡å¼µç”¨ï¼‰ | - |
| `other` | ãã®ä»– | - | 12% |

**æ¨æ¸¬ãƒ­ã‚¸ãƒƒã‚¯:**
```typescript
if (oldLabels.includes('æ©Ÿèƒ½è¦ä»¶')) return 'spec';
if (oldLabels.includes('å¸³ç¥¨')) return 'data';
if (oldLabels.includes('ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ')) return 'template';
if (oldLabels.includes('ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼')) return 'workflow';
if (oldLabels.includes('è­°äº‹éŒ²') || oldLabels.includes('meeting-notes')) return 'meeting';
```

---

### 2. domainï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ï¼‰

**ç›®çš„**: ã©ã®æ©Ÿèƒ½é ˜åŸŸã«å±ã™ã‚‹ã‹ã‚’åˆ†é¡

| ãƒ‰ãƒ¡ã‚¤ãƒ³ | èª¬æ˜ | ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ |
|---------|------|-----------|
| ä¼šå“¡ç®¡ç† | ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼é–¢é€£ | ä¼šå“¡ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| æ±‚äººç®¡ç† | æ±‚äººæƒ…å ±ç®¡ç† | æ±‚äºº |
| æ•™å®¤ç®¡ç† | æ•™å®¤ãƒ»å¡¾ã®ç®¡ç† | æ•™å®¤ |
| ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ç®¡ç† | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­æ©Ÿèƒ½ | ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ |
| å…¨ä½“ç®¡ç† | å…¨ä½“ç®¡ç†è€…ãƒ»ã‚µã‚¤ãƒˆé‹å–¶ | å…¨ä½“ç®¡ç†ã€ã‚µã‚¤ãƒˆé‹å–¶ |
| ã‚ªãƒ•ã‚¡ãƒ¼ç®¡ç† | ã‚ªãƒ•ã‚¡ãƒ¼æ©Ÿèƒ½ | ã‚ªãƒ•ã‚¡ãƒ¼ |
| æ¡ç”¨ãƒ•ãƒ­ãƒ¼ | å¿œå‹Ÿãƒ»é¸è€ƒãƒ»æ¡ç”¨ | å¿œå‹Ÿã€é¸è€ƒã€æ¡ç”¨ |
| å£ã‚³ãƒŸãƒ»è©•ä¾¡ | è©•ä¾¡ãƒ»å£ã‚³ãƒŸ | å£ã‚³ãƒŸã€è©•ä¾¡ |
| ã‚·ã‚¹ãƒ†ãƒ å…±é€š | å…±é€šè¦ä»¶ãƒ»ã‚¤ãƒ³ãƒ•ãƒ© | å…±é€šè¦ä»¶ã€ã‚¤ãƒ³ãƒ•ãƒ© |
| ãã®ä»– | ä¸Šè¨˜ä»¥å¤– | - |

**æ¨æ¸¬ãƒ­ã‚¸ãƒƒã‚¯:**
```typescript
const text = title + ' ' + content;

if (text.includes('ä¼šå“¡') && !text.includes('ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­')) return 'ä¼šå“¡ç®¡ç†';
if (text.includes('æ±‚äºº')) return 'æ±‚äººç®¡ç†';
if (text.includes('æ•™å®¤')) return 'æ•™å®¤ç®¡ç†';
// ... ä»¥ä¸‹åŒæ§˜
```

---

### 3. featureï¼ˆæ©Ÿèƒ½åï¼‰

**ç›®çš„**: å…·ä½“çš„ãªæ©Ÿèƒ½ã‚’è­˜åˆ¥

**æŠ½å‡ºæ–¹æ³•:**
- ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰ã€FIXã€‘ã€ã€ä½œæˆä¸­ã€‘ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’é™¤å»
- ã€Œâ—‹â—‹æ©Ÿèƒ½ã€ã€Œâ—‹â—‹å¸³ç¥¨ã€ãªã©ã®æ©Ÿèƒ½åã‚’æŠ½å‡º

**ä¾‹:**
```
å…ƒã®ã‚¿ã‚¤ãƒˆãƒ«: "168_ã€FIXã€‘æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½"
â†’ feature: "æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½"

å…ƒã®ã‚¿ã‚¤ãƒˆãƒ«: "ã€FIXã€‘ä¼šå“¡ï¼šã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±"
â†’ feature: "ä¼šå“¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±"
```

---

### 4. statusï¼ˆã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰

**ç›®çš„**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å®Œæˆåº¦ã‚’ç®¡ç†

| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èª¬æ˜ | ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ã‚«ãƒ¼ |
|-----------|------|----------------|
| `draft` | ä½œæˆä¸­ | ã€ä½œæˆä¸­ã€‘ |
| `review` | ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ | ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€‘ |
| `approved` | ç¢ºå®šç‰ˆ | ã€FIXã€‘ |
| `deprecated` | éæ¨å¥¨ãƒ»å»ƒæ­¢ | ï¼ˆæ‰‹å‹•è¨­å®šï¼‰ |
| `unknown` | ä¸æ˜ | ï¼ˆãƒãƒ¼ã‚«ãƒ¼ãªã—ï¼‰ |

**æŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯:**
```typescript
if (title.includes('ã€FIXã€‘')) return 'approved';
if (title.includes('ã€ä½œæˆä¸­ã€‘')) return 'draft';
if (title.includes('ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­ã€‘')) return 'review';
return 'unknown';
```

---

### 5. priorityï¼ˆå„ªå…ˆåº¦ï¼‰

**ç›®çš„**: ãƒ“ã‚¸ãƒã‚¹ä¸Šã®é‡è¦åº¦ã‚’ç®¡ç†

**æ¨æ¸¬ãƒ«ãƒ¼ãƒ«:**

| æ¡ä»¶ | å„ªå…ˆåº¦ | ç†ç”± |
|------|--------|------|
| category=spec AND status=approved | `high` | ç¢ºå®šç‰ˆã®æ©Ÿèƒ½è¦ä»¶ |
| category=spec AND status=draft | `medium` | ä½œæˆä¸­ã®æ©Ÿèƒ½è¦ä»¶ |
| category=workflow | `high` | ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯é‡è¦ |
| category=meeting OR template | `low` | è­°äº‹éŒ²ã‚„ãƒ¡ãƒ¼ãƒ«ã¯å‚è€ƒæƒ…å ± |
| ãã®ä»– | `medium` | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |

---

### 6. versionï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰

**ç›®çš„**: ä»•æ§˜æ›¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

**æŠ½å‡ºæ–¹æ³•:**
```typescript
"168_ã€FIXã€‘æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½" â†’ version: "168"
"515_ã€ä½œæˆä¸­ã€‘æ•™å®¤ç®¡ç†-æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½" â†’ version: "515"
```

---

### 7. tagsï¼ˆã‚¿ã‚°ï¼‰

**ç›®çš„**: è¿½åŠ ã®åˆ†é¡ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰

**ä½¿ç”¨ä¾‹:**
```typescript
tags: ['ã‚³ãƒ”ãƒ¼', 'ç®¡ç†ç”»é¢', 'ä¸€æ‹¬å‡¦ç†']
tags: ['èªè¨¼', 'ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£']
tags: ['ãƒãƒƒãƒå‡¦ç†', 'éåŒæœŸ']
```

---

## ğŸ”„ ç§»è¡Œæˆ¦ç•¥

### Phase 1: ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ç§»è¡Œï¼ˆ70-80%ï¼‰

```typescript
// ã‚¿ã‚¤ãƒˆãƒ«ã¨æ—¢å­˜ãƒ©ãƒ™ãƒ«ã‹ã‚‰StructuredLabelã‚’ç”Ÿæˆ
function migrateLabel(page: any): StructuredLabel {
  return {
    category: StructuredLabelHelper.inferCategoryFromLabels(page.labels),
    domain: StructuredLabelHelper.inferDomainFromContent(page.title, page.content),
    feature: StructuredLabelHelper.cleanTitle(page.title),
    status: StructuredLabelHelper.extractStatusFromTitle(page.title),
    version: StructuredLabelHelper.extractVersionFromTitle(page.title),
    priority: StructuredLabelHelper.inferPriority(category, status),
    confidence: 0.8  // ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®ä¿¡é ¼åº¦
  };
}
```

### Phase 2: LLMãƒ™ãƒ¼ã‚¹ç§»è¡Œï¼ˆæ®‹ã‚Š20-30%ï¼‰

```typescript
// ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã§åˆ¤å®šã§ããªã„ãƒšãƒ¼ã‚¸ã¯LLMã§åˆ†é¡
const prompt = `
ä»¥ä¸‹ã®Confluenceãƒšãƒ¼ã‚¸ã‚’åˆ†æã—ã€StructuredLabelã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

ã‚¿ã‚¤ãƒˆãƒ«: ${page.title}
å†…å®¹: ${page.content.substring(0, 500)}...

JSONå½¢å¼ã§å‡ºåŠ›:
{
  "category": "spec|data|template|workflow|meeting|other",
  "domain": "ä¼šå“¡ç®¡ç†|æ±‚äººç®¡ç†|...",
  "feature": "å…·ä½“çš„ãªæ©Ÿèƒ½å",
  "priority": "high|medium|low",
  "status": "draft|review|approved",
  "tags": ["ã‚¿ã‚°1", "ã‚¿ã‚°2"]
}
`;
```

---

## ğŸ” æ¤œç´¢ã§ã®æ´»ç”¨

### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®æ”¹å–„

```typescript
// ç¾åœ¨
labelFilters: { includeMeetingNotes: false }

// StructuredLabelå¾Œ
structuredLabelFilters: {
  categories: ['spec', 'data'],           // ä»•æ§˜æ›¸ã¨ãƒ‡ãƒ¼ã‚¿å®šç¾©ã®ã¿
  domains: ['æ•™å®¤ç®¡ç†', 'ä¼šå“¡ç®¡ç†'],      // ç‰¹å®šãƒ‰ãƒ¡ã‚¤ãƒ³ã®ã¿
  statuses: ['approved'],                 // ç¢ºå®šç‰ˆã®ã¿
  priorities: ['high', 'medium'],         // é«˜ãƒ»ä¸­å„ªå…ˆåº¦ã®ã¿
  excludeMeetingNotes: true               // è­°äº‹éŒ²ã‚’é™¤å¤–ï¼ˆäº’æ›æ€§ï¼‰
}
```

### ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®æ”¹å–„

```typescript
// ãƒ©ãƒ™ãƒ«ãƒãƒƒãƒã‚¹ã‚³ã‚¢ã®è¨ˆç®—
function calculateLabelScore(query: string, label: StructuredLabel): number {
  let score = 0;
  
  // ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒãƒƒãƒï¼ˆé«˜å¾—ç‚¹ï¼‰
  if (query.includes(label.domain)) score += 10;
  
  // æ©Ÿèƒ½åãƒãƒƒãƒï¼ˆæœ€é«˜å¾—ç‚¹ï¼‰
  if (query.includes(label.feature)) score += 20;
  
  // ã‚«ãƒ†ã‚´ãƒªãƒãƒƒãƒ
  if (label.category === 'spec') score += 5;  // ä»•æ§˜æ›¸ã‚’å„ªé‡
  
  // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒãƒ
  if (label.status === 'approved') score += 3;  // ç¢ºå®šç‰ˆã‚’å„ªé‡
  
  // å„ªå…ˆåº¦ãƒãƒƒãƒ
  if (label.priority === 'high') score += 2;
  
  return score;
}
```

---

## ğŸ“ˆ æœŸå¾…ã•ã‚Œã‚‹åŠ¹æœ

### 1. æ¤œç´¢å“è³ªã®å‘ä¸Š

**ã‚·ãƒŠãƒªã‚ª: ã€Œæ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã§ã‚³ãƒ”ãƒ¼å¯èƒ½ãªé …ç›®ã¯ï¼Ÿã€**

```
ç¾åœ¨ã®å•é¡Œ:
- BM25ã§ã€Œãƒãƒƒãƒã‚¨ãƒ©ãƒ¼æ™‚é€šçŸ¥å…ˆã€ãŒä¸Šä½ã«æ¥ã‚‹
- ã€Œæ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã€ãŒä¸‹ä½ã«æŠ¼ã—ä¸‹ã’ã‚‰ã‚Œã‚‹

StructuredLabelå¾Œ:
âœ… category='spec', domain='æ•™å®¤ç®¡ç†', feature='æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½'
   â†’ ãƒ©ãƒ™ãƒ«ã‚¹ã‚³ã‚¢ãŒå¤§å¹…ã‚¢ãƒƒãƒ—
âœ… ã€Œãƒãƒƒãƒã‚¨ãƒ©ãƒ¼æ™‚é€šçŸ¥å…ˆã€ã¯ category='data', domain='ã‚·ã‚¹ãƒ†ãƒ å…±é€š'
   â†’ ãƒ©ãƒ™ãƒ«ã‚¹ã‚³ã‚¢ãŒä½ã„
âœ… ç·åˆã‚¹ã‚³ã‚¢ã§ã€Œæ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ã€ãŒä¸Šä½ã«
```

### 2. ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã®ç²¾åº¦å‘ä¸Š

```typescript
// ã€Œä¼šå“¡ç®¡ç†ã®ç¢ºå®šç‰ˆä»•æ§˜æ›¸ã®ã¿ã‚’æ¤œç´¢ã€
filters: {
  categories: ['spec'],
  domains: ['ä¼šå“¡ç®¡ç†'],
  statuses: ['approved']
}
```

### 3. UIã§ã®è¡¨ç¤ºæ”¹å–„

```
ç¾åœ¨: [æ©Ÿèƒ½è¦ä»¶]
æ”¹å–„å¾Œ: spec > æ•™å®¤ç®¡ç† > æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ > approved (v.168)
```

---

## ğŸ› ï¸ å®Ÿè£…è¨ˆç”»

### 1. ã‚¹ã‚­ãƒ¼ãƒå®šç¾© âœ…å®Œäº†
- `src/types/structured-label.ts` ã‚’ä½œæˆ
- ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã‚’å®Ÿè£…

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ›´æ–°ï¼ˆæ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼‰
- LanceDBã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ
- Firestoreã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ

### 3. è‡ªå‹•ãƒ©ãƒ™ãƒ«ä»˜ã‘Flowï¼ˆPhase 0A-1-2ï¼‰
- Genkit Flowå®Ÿè£…
- gemini-1.5-flashä½¿ç”¨

### 4. ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆPhase 0A-1-3ï¼‰
- ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ç§»è¡Œï¼ˆ80%ï¼‰
- LLMãƒ™ãƒ¼ã‚¹ç§»è¡Œï¼ˆ20%ï¼‰

---

## ğŸ“ ä½¿ç”¨ä¾‹

### ä¾‹1: æ©Ÿèƒ½è¦ä»¶ãƒšãƒ¼ã‚¸

```typescript
// å…ƒã®ãƒšãƒ¼ã‚¸
{
  title: "168_ã€FIXã€‘æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½",
  labels: ["æ©Ÿèƒ½è¦ä»¶"]
}

// StructuredLabelå¤‰æ›å¾Œ
{
  title: "æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½",  // ã‚¯ãƒªãƒ¼ãƒ³ãªã‚¿ã‚¤ãƒˆãƒ«
  labels: ["æ©Ÿèƒ½è¦ä»¶"],      // äº’æ›æ€§ã®ãŸã‚ä¿æŒ
  structuredLabel: {
    category: 'spec',
    domain: 'æ•™å®¤ç®¡ç†',
    feature: 'æ•™å®¤ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½',
    priority: 'high',
    status: 'approved',
    version: '168',
    tags: ['ã‚³ãƒ”ãƒ¼', 'ç®¡ç†ç”»é¢'],
    confidence: 0.95
  }
}
```

### ä¾‹2: ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ

```typescript
// å…ƒã®ãƒšãƒ¼ã‚¸
{
  title: "ã€ä½œæˆä¸­ã€‘å¿œå‹Ÿå®Œäº†ãƒ¡ãƒ¼ãƒ«ï¼ˆä¼šå“¡å®›ï¼‰",
  labels: ["ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"]
}

// StructuredLabelå¤‰æ›å¾Œ
{
  title: "å¿œå‹Ÿå®Œäº†ãƒ¡ãƒ¼ãƒ«ï¼ˆä¼šå“¡å®›ï¼‰",
  labels: ["ãƒ¡ãƒ¼ãƒ«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ"],
  structuredLabel: {
    category: 'template',
    domain: 'æ¡ç”¨ãƒ•ãƒ­ãƒ¼',
    feature: 'å¿œå‹Ÿå®Œäº†é€šçŸ¥',
    priority: 'low',
    status: 'draft',
    tags: ['é€šçŸ¥', 'ä¼šå“¡å‘ã‘'],
    confidence: 0.90
  }
}
```

### ä¾‹3: è­°äº‹éŒ²

```typescript
// å…ƒã®ãƒšãƒ¼ã‚¸
{
  title: "2024-4-1 ç¢ºèªä¼šãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°è­°äº‹éŒ²",
  labels: ["è­°äº‹éŒ²", "meeting-notes"]  // é‡è¤‡
}

// StructuredLabelå¤‰æ›å¾Œ
{
  title: "2024-4-1 ç¢ºèªä¼šãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°è­°äº‹éŒ²",
  labels: ["meeting-notes"],  // çµ±ä¸€
  structuredLabel: {
    category: 'meeting',
    domain: 'ãã®ä»–',
    feature: 'ç¢ºèªä¼šè­°äº‹éŒ²',
    priority: 'low',
    status: 'approved',
    tags: ['2024å¹´4æœˆ'],
    confidence: 1.0
  }
}
```

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Phase 0Aå®Ÿè£…è¨ˆç”»æ›¸](./phase-0A-implementation-plan.md)
- [åŸºç›¤å¼·åŒ–å„ªå…ˆæˆ¦ç•¥](./foundation-first-strategy.md)
- [ãƒ©ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](../implementation/label-system-overview.md)
- [ãƒ©ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ](../implementation/label-system-design.md)

---

## ğŸ“Š æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… **ã‚¹ã‚­ãƒ¼ãƒå®šç¾©å®Œäº†**
2. ğŸ“‹ **ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ›´æ–°**: LanceDBãƒ»Firestoreã‚¹ã‚­ãƒ¼ãƒæ‹¡å¼µ
3. ğŸ¤– **è‡ªå‹•ãƒ©ãƒ™ãƒ«ä»˜ã‘Flowå®Ÿè£…**: Genkit + gemini-1.5-flash
4. ğŸ”§ **LabelManagerV2å®Ÿè£…**: æ–°ãƒ©ãƒ™ãƒ«ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
5. ğŸ”„ **ç§»è¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…**: æ—¢å­˜ãƒ©ãƒ™ãƒ«â†’StructuredLabel
6. âœ… **ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼**: æ¤œç´¢ç²¾åº¦å‘ä¸Šã®ç¢ºèª

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

è³ªå•ã‚„ææ¡ˆãŒã‚ã‚‹å ´åˆã¯ã€é–‹ç™ºãƒãƒ¼ãƒ ã«é€£çµ¡ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ”„ æ›´æ–°å±¥æ­´

- **2025-10-14**: åˆç‰ˆä½œæˆï¼ˆPhase 0A-1é–‹å§‹ï¼‰

