# ドキュメント整理・統合サマリー

## 実施日
2025-01-28

## 実施内容

### 1. 完全再構築スクリプトの推奨化

データ同期、インデックス作成、GCSアップロードを行う場合は、**必ず完全再構築スクリプトを使用する**ように統一しました。

#### 作成・更新したドキュメント

1. **新規作成**: [完全再構築スクリプト運用ガイド](./04.19-full-rebuild-scripts-guide.md)
   - ConfluenceとJiraの完全再構築スクリプトの使用方法を詳細に説明
   - 推奨方法と非推奨方法を明確に区別

2. **更新**: [データ同期戦略](./04.03-data-synchronization-strategy.md)
   - 完全再構築スクリプトの使用を推奨する旨を追加
   - 個別コマンド実行を非推奨として明示

3. **更新**: [Jira本番環境デプロイガイド](./04.15-jira-production-deployment-guide.md)
   - デプロイフローを完全再構築スクリプトを推奨するように更新
   - 従来の個別コマンド実行方法を非推奨として明示

4. **更新**: [Operations README](./README.md)
   - 完全再構築スクリプト運用ガイドのリンクを追加

### 2. 古い情報を含むテストドキュメントのアーカイブ

完全再構築スクリプトが実装される前に作成されたドキュメントで、古い情報を含むものをアーカイブに移動しました。

#### アーカイブしたドキュメント

以下のドキュメントを `docs/99-archive/05-testing/` に移動：

1. `05.104-confluence-jira-sync-complete-status.md`
   - **理由**: Confluence完全再構築スクリプトが「ない」と記載されていた古い情報

2. `05.108-full-rebuild-scripts-verification.md`
   - **理由**: `rebuild:lunr`について記載されていた古い情報（実際は直接`lunrInitializer.initializeAsync()`を呼び出している）

3. `05.109-full-rebuild-scripts-action-items.md`
   - **理由**: アクション項目（一部解決済み）

#### 更新したドキュメント

1. **更新**: [Testing README](../05-testing/README.md)
   - 推奨ドキュメントとアーカイブされたドキュメントを明確に区別

2. **新規作成**: [完全再構築スクリプトの推奨使用方法](../05-testing/05.111-full-rebuild-scripts-recommendation.md)
   - 推奨方法と非推奨方法を簡潔に説明

3. **更新**: [アーカイブ README](../99-archive/README.md)
   - Testing関連アーカイブのセクションを追加

## 整理の結果

### ✅ 統一された推奨方法

すべての運用ドキュメントで、完全再構築スクリプトを使用することが推奨されるようになりました：

```bash
# Confluence完全再構築
npm run sync:confluence:rebuild

# Jira完全再構築
npm run sync:jira:rebuild
```

### ✅ 非推奨方法の明示

個別コマンドを手動で実行する方法は、すべてのドキュメントで非推奨として明示されました。

### ✅ ドキュメントの整理

- 最新情報を含むドキュメントは `docs/04-operations/` と `docs/05-testing/` に保持
- 古い情報を含むドキュメントは `docs/99-archive/05-testing/` に移動

## 関連ドキュメント

### 推奨ドキュメント（最新情報）

- [完全再構築スクリプト運用ガイド](./04.19-full-rebuild-scripts-guide.md) - **推奨運用方法**
- [完全再構築スクリプトの完全状態検証](../05-testing/05.110-complete-status-verification.md) - 技術詳細
- [完全再構築スクリプト作成](../05-testing/05.105-full-rebuild-scripts-creation.md) - 作成の詳細

### 更新されたドキュメント

- [データ同期戦略](./04.03-data-synchronization-strategy.md)
- [Jira本番環境デプロイガイド](./04.15-jira-production-deployment-guide.md)
- [Operations README](./README.md)

### アーカイブされたドキュメント

- `docs/99-archive/05-testing/05.104-confluence-jira-sync-complete-status.md`
- `docs/99-archive/05-testing/05.108-full-rebuild-scripts-verification.md`
- `docs/99-archive/05-testing/05.109-full-rebuild-scripts-action-items.md`

## 2025-01-28 追加整理

### ドキュメント構造の整理

1. **重複ファイルの削除**
   - `14-quick-start.md` を削除（`04.14-quick-start.md` と完全に同じ内容）

2. **README.mdの修正**
   - ファイル名参照を `04.XX-` 形式に統一
   - 完全再構築スクリプトの推奨を明確化
   - ドキュメント構造セクションを更新

3. **スクリプトガイドの更新**
   - 完全再構築スクリプトの説明を追加（最上部に配置）
   - `rebuild-lancedb-smart-chunking.ts` と完全再構築スクリプトの違いを明確化
   - 推奨方法を明示

### スクリプトの関係性

| スクリプト | 用途 | 推奨度 |
|-----------|------|--------|
| `sync-confluence-full-rebuild.ts` | Confluence完全再構築（同期→インデックス→アップロード） | ⭐⭐⭐ 推奨 |
| `sync-jira-full-rebuild.ts` | Jira完全再構築（同期→インデックス→アップロード） | ⭐⭐⭐ 推奨 |
| `rebuild-lancedb-smart-chunking.ts` | LanceDBテーブル再構築のみ（チャンキング最適化） | ⭐ 特殊用途 |

**推奨**: 通常の運用では、完全再構築スクリプトを使用してください。

## 変更履歴

| 日付 | 変更内容 |
|-----|---------|
| 2025-01-28 | 初版作成 - ドキュメント整理・統合のサマリー |
| 2025-01-28 | 追加整理 - ドキュメント構造の整理、スクリプト関係性の明確化 |

