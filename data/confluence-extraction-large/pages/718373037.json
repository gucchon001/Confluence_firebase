{
  "id": "718373037",
  "title": "022_ 【FIX】記事詳細閲覧機能",
  "content": "1. 目次 2. 概要 本機能はエンドユーザーが、登録済みの https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 【FIX】記事カスタムフィールド値 【FIX】記事画像 を 記事単位で全て閲覧するための機能です。 3. 要求事項 エンドユーザーと会員が概要で挙げた帳票に登録されている記事情報のうち、「公開フラグ」が「公開」かつ、「公開日時」が過去日時 である 記事を 全て閲覧できる。 「公開フラグ」が「非公開」かつ、「公開日時」が過去日時である記事については、下記の状態のページを閲覧できる。 後述するテンプレートの種類の「ヘッダーあり、執筆者なし」の表示項目とする。 下記項目を非表示とする。 執筆者情報 タイトル画像 本文の表示エリアには、保存されている本文情報の内容によらず「この記事は掲載終了いたしました」という文言のみを中央揃え 、太字、フォントサイズ18pt、先頭に空白行２行空き で表示する。 「検索対象可否」の値によらず、noindex, nofollowとする。 閲覧できる項目はWFに従い、特記すべき内容のみ下に続ける。 タイトル画像 表示枠と異なるサイズの画像の場合、下記の様に表示する。 縦横の両方とも表示枠以下の場合 画像サイズのまま表示して残りは余白とする 縦横のどちらかが表示枠より大きい場合 縦横比を維持したまま、縦横両方が表示枠に収まるまで縮小して表示し、残りは余白とする 記事本文 会員限定記事かつ、ログインしていない場合 会員限定記事の本文表示領域のみ閲覧できる。 今すぐ無料登録ボタン 押下すると https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/702906392 に遷移する。 会員の方はこちらボタン 押下すると https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/703889475 に遷移する。 執筆者情報 執筆者種別が「個人」の場合 「執筆者」の 【FIX】全体管理者登録情報 の「ニックネーム」、「PR」、「画像」と「自己紹介ページURL」 を表示する。 執筆者種別が「組織」の場合 記事によらず、設定ファイルに定義された固定の「執筆者名」「紹介文」、および固定の画像を表示する。 自己紹介ページURLは表示しない。 SNSボタン Facebook 押下するとFacebookのシェア用リンクに遷移する。 x 押下するとxのシェア用リンクに遷移する。 はてなブックマーク 押下するとはてなブックマークのシェア用リンクに遷移する。 関連記事 pc版 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/703496344 で設定した同じカテゴリ記事6件が一覧形式で表示される。 更新日時の降順で6件並べ、更新日時が同一の場合は作成時間の降順とする。 各関連記事カードを押下すると関連記事の https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718373037 に遷移する。 「関連記事をもっと見る」ボタン 押下する と 同じカテゴリで絞り込まれた https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718340311 に遷移する。 sp版 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/703496344 で設定した同じカテゴリ記事5件が一覧形式で表示される。 更新日時の降順で5件並べ、更新日時が同一の場合は作成時間の降順とする。 各関連記事カードを押下すると関連記事の https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718373037 に遷移する。 「関連記事をもっと見る」ボタン 押下する と 同じカテゴリで絞り込まれた https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718340311 に遷移する。 新着記事 pc版 すべての記事の内、更新日時が最も新しい 6件 の記事が一覧形式で表示される。 更新日時の降順で6件並べ、更新日時が同一の場合は作成時間の降順とする。 各 新着 記事カードを押下すると新着記事の https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718373037 に遷移する。 sp版 すべての記事の内、更新日時が最も新しい 5件 の記事が一覧形式で表示される。 更新日時の降順で5件並べ、更新日時が同一の場合は作成時間の降順とする。 各 新着 記事カードを押下すると新着記事の https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718373037 に遷移する。 パンくずリスト 【FIX】記事カスタムフィールド値 （定義は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 ）に下記のいずれか１組以上に値が設定されている場合、「 [塾講師バイトTOP]（リンク： https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719290510 ） ＞ [パンくず1（テキスト）] （リンク：[パンくず1（URLパス）]） ＞ [パンくず2（テキスト）] （リンク：[パンくず2（URLパス）]） ＞ [パンくず3（テキスト）] （リンク：[パンくず3（URLパス）]） ＞ [記事タイトル]」の順でパンくずテキストおよびURLパスを各リンクとして表示する。この際、値が設定されていない組のパンくずは飛ばして表示する。（例えば、パンくず3だけ設定されている場合は「 [塾講師バイトTOP]（リンク： https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719290510 ） ＞ [パンくず3（テキスト）] （リンク：[パンくず3（URLパス）]） ＞ [記事タイトル]」とする。） 「パンくず1（テキスト）」と「パンくず1（URLパス）」 「パンくず2（テキスト）」と「パンくず2（URLパス）」 「パンくず3（テキスト）」と「パンくず3（URLパス）」 【FIX】記事カスタムフィールド値 （定義は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 ）に１組も値が設定されていない場合、「 [塾講師バイトTOP]（リンク： https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719290510 ） ＞ [情報局TOP]（リンク： https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719290535 ） ＞ [記事タイトル]」とする。 設定されている「テンプレート」の種類に応じて、それぞれ下記の項目を非表示にする。 「ヘッダーあり、執筆者あり」 非表示にする項目はない（すべて表示する） 「ヘッダーあり、執筆者なし」 執筆者情報 「ヘッダーなし、執筆者なし」 カテゴリ 公開日時 更新日時 タイトル画像 執筆者情報 SNSボタン 関連記事 新着記事 本画面のクエリストリングとして「preview」有効フラグが付与されている場合、ログイン済みの全体管理者、塾講師ステーション管理者、ゲスト管理者、記事管理者、記事担当者は本画面をプレビューで閲覧できる。 有効な権限のログイン情報がない場合は、404ページを表示する。 有効な権限でログインしている場合は、記事の公開フラグ・公開日時に関わらず記事のプレビューを表示する。 本ページに表示する画像の中で https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル画像」以外はLazyLord処理を行う。 本ページの構造化データとして下記の項目はマークアップを行う。 パンくず article ページにアクセスした際、次の情報が入ったログを出力する 日時、ユーザー番号、記事番号、アクセス元IPアドレス、ユーザーエージェント 3.1. 権限 要求に同じ。 3.2. 帳票 要求に同じ。 3.3. メールテンプレート なし 3.4. ワークフロー 4. 要件定義 本ページで特に指定した場合を除き、 共通要件 に従うものとする。 4.1. ユーザーインターフェース（画面） 4.1.1.PC版記事詳細 https://www.figma.com/design/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?node-id=185933-37470&amp;node-type=frame&amp;t=aEvBQYfBZHWCJsAj-0 4.1.2.PC版記事詳細_会員限定の場合 https://www.figma.com/design/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?node-id=191859-54899&amp;node-type=frame&amp;t=Ib64bUZM4kUsSRYm-0 4.1.3.SP版記事詳細 https://www.figma.com/design/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?node-id=186747-120565&amp;node-type=frame&amp;t=Ib64bUZM4kUsSRYm-0 4.1.4.SP版記事詳細_会員限定の場合 https://www.figma.com/design/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?node-id=193350-36522&amp;node-type=frame&amp;t=Ib64bUZM4kUsSRYm-0 4.2. 入力 入力項目 変数名 入力元 説明 制限とエラーメッセージ 1 会員ログイン情報 Cookie 閲覧している会員のログイン情報 ログイン中か否かによって記事本文の表示範囲を制御するために用いる。 2 記事番号 &nbsp; id URLパラメータ urlから記事番号を取得する。 記事番号がURLに存在しない場合は404ページを表示する。 入力がない、または、自然数ではない、またはデータベースに存在しない場合 エラーメッセージは出力せずレスポンスステータスを404 not foundとする 3 プレビューフラグ preview URLパラメータ（クエリストリング） プレビュー状態で表示するか否かを識別するためのフラグ（ONの場合、プレビュー表示する） 入力がない、または、ONではない場合 エラーメッセージは出力せずレスポンスステータスを404 not foundとする 4.3. 出力 説明は、概要で挙げた帳票 の 記載を前提とし、本ページに固有の特記事項のみ記載する。 プレビュー表示の場合（プレビューフラグが設定されている場合）、noindex,nofollowを設定し、canonicalとしてプレビュー表示ではないページを正規ページとして設定する。 4.3.1. メタ情報 出力項目 出力先 説明 1 title HTML 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル」の値を出力する。 2 description HTML 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「抜粋（要約）」の値を出力する。 4.3.2. 記事詳細 出力項目 出力先 説明 1 記事番号 画面 HTMLエスケープ処理をして出力する。 2 タイトル画像 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル画像」で指定した画像 を表示する。表示画像サイズは端末に応じて 記事画像ファイルの種類と構造 に従うものとする。 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 3 タイトル 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル」を適切にHTMLエスケープして表示する。 4 カテゴリ 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「カテゴリ」が指し示す選択肢のラベルを出力する。 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 5 更新日時 画面 【FIX】記事カスタムフィールド値 に保存された「本文更新日時」（項目の説明は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 参照）をyyyy/mm/dd形式で表示する。 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 6 公開日時 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「公開日時」をyyyy/mm/ddの形式で表示する。 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 7 本文 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「本文」を表示する。 エディタ内で独自に設定されたCSSは、記事詳細ページの本文以外の要素へは影響しない様にし、「本文」のみに適用される様に実装する。 8 執筆者ニックネーム 画面 「執筆者」の 【FIX】全体管理者登録情報 の 「ニックネーム」 を表示する。 テンプレートは「ヘッダーあり、執筆者なし」 、「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 9 執筆者PR 「執筆者」の 【FIX】全体管理者登録情報 の「PR」 を表示する。 テンプレートは「ヘッダーあり、執筆者なし」 、「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 10 執筆者画像 「執筆者」の 【FIX】全体管理者登録情報 の「画像」 を表示する。 テンプレートは「ヘッダーあり、執筆者なし」 、「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 11 執筆者自己紹介ページURL 「執筆者」の 【FIX】全体管理者登録情報 の「執筆者自己紹介ページURL」 を表示する。 テンプレートは「ヘッダーあり、執筆者なし」 、「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 12 パンくず1（テキスト） 【FIX】記事カスタムフィールド値 （定義は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 ）に保存された値を出力する。 13 パンくず1（URLパス） 14 パンくず2（テキスト） 15 パンくず2（URLパス） 16 パンくず3（テキスト） 17 パンくず3（URLパス） 4.3.3.関連記事 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 出力項目 出力先 説明 1 タイトル画像 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル画像」で指定した画像を表示する。表示画像サイズは端末に応じて 記事画像ファイルの種類と構造 に従うものとする。 2 タイトル 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル」を適切にHTMLエスケープして表示する。 3 カテゴリ 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「カテゴリ」が指し示す選択肢のラベルを出力する。 4 更新日時 画面 【FIX】記事カスタムフィールド値 に保存された「本文更新日時」（項目の説明は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 参照） をyyyy/mm/dd形式で表示する。 4.3.4.️新着記事 テンプレートは「ヘッダーなし、執筆者なし」を選択するの場合は、項目自体を表示しない。 出力項目 出力先 説明 1 タイトル画像 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル画像」で指定した画像を表示する。表示画像サイズは端末に応じて 記事画像ファイルの種類と構造 に従うものとする。 2 タイトル 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「タイトル」を適切にHTMLエスケープして表示する。 3 カテゴリ 画面 保存された https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 の「カテゴリ」が指し示す選択肢のラベルを出力する。 4 更新日時 画面 【FIX】記事カスタムフィールド値 に保存された「本文更新日時」（項目の説明は https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/1248591874 参照） をyyyy/mm/dd形式で表示する。 4.4. 処理 4.5. エラー処理 4.6. ログ 詳細画面を表示した場合に下記フォーマットでログを出力する User {ユーザー番号} read article detail. article_id ={記事番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 なし",
  "parentId": "718275111",
  "parentTitle": "020_■記事管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/718373037/022_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2025-02-20T08:26:47.366Z",
  "author": "ejiri_yusuke",
  "excerpt": "1. 目次 2. 概要 本機能はエンドユーザーが、登録済みの https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/682557639 【FIX】記事カスタムフィールド値 【FIX】記事画像 を 記事単位で全て閲覧するための機能です。 3. 要求事項 エンドユーザーと会員が概要で挙げた帳票に登録されている記事情報のうち、「公開フラグ」が..."
}