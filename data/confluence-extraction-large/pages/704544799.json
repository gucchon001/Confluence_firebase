{
  "id": "704544799",
  "title": "094_【FIX】採用お祝い申請編集機能",
  "content": "1. 目次 1 6 false list false 2. 概要 本機能は 【レビュー中】採用お祝い申請 【レビュー中】お祝い申請：質問・回答 【作成中】口コミ 【作成中】口コミ項目値 の登録済みのデータ1件を編集するための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが、次の条件のときに本機能を利用することができる。 紐づく応募の採用ステータスが「採用」である。 紐づく応募日時から180日以内である。 紐づく採用お祝い申請がある。 その申請の承認ステータスが「未承認」である（「否認」の場合は本機能を使用できない）。 画面上には以下の項目を表示する 本ページの 「要件定義」-「入力」欄 で入力元が「入力フォーム」と定義されている項目の、保存された項目値が反映された入力フォーム 本ページの 「要件定義」-「出力」欄 で出力先として「画面」が定義されている項目の名称と保存された項目値 キャンセルボタン 押下すると 091_【FIX】応募履歴一覧閲覧機能 に遷移する。 更新するボタン 押下すると入力内容にエラーがあれば更新はせずにエラーの内容を表示する。エラーがなければそのまま編集した入力フォームの内容をデータベースに保存し、システム全体に適用し、編集完了画面に遷移する。 編集完了画面には 001_全体トップ への導線を設置する。 「採用お祝い申請について」ボタン 押下するとポップアップを開き、ポップアップには採用お祝い申請についての説明と、 https://stgd.juku.st/campaign へのリンクが含まれる。閉じるボタンも配置し、押下するとポップアップを閉じる。 3.1. 権限 要求事項の記述に同じ。 3.2. 帳票 概要の記述に同じ。 3.3. メールテンプレート なし 3.4. ワークフロー 【FIX】採用お祝い/口コミ確認・公開フロー 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1採用お祝い申請 - 編集画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=65774-64547&amp;mode=design&amp;t=kAnzvtdFWnXnuA3y-0 4.1.2採用お祝い申請 - 更新画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=55256-49877&amp;mode=design&amp;t=kAnzvtdFWnXnuA3y-0 4.2. 入力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 制限 1 採用お祝い申請番号 隠しフォーム 2 採用された教室 入力フォーム 初期値なし 応募した教室と同じ企業で同じ教室グループの配下の教室を選択肢とし、セレクトボックス形式で表示する。 必須 3 雇用形態 入力フォーム 初期値なし 必須 4 指導形態 入力フォーム 初期値なし 必須 5 選考までの段取りについて 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 必須 6 選考までの段取りについての点数 入力フォーム 初期値なし 必須 7 応募から最初の連絡までの日数 入力フォーム 初期値なし 必須 8 最初の連絡方法 入力フォーム 初期値なし 必須 9 面接・説明会や筆記試験について 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 必須 10 面接・説明会や筆記試験についての点数 入力フォーム 初期値なし 必須 11 研修について 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 必須 12 研修についての点数 入力フォーム 初期値なし 必須 13 研修期間 入力フォーム 初期値なし 必須 14 塾の雰囲気や当初のイメージと違ったこと 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 必須 15 求人と実際の勤務条件は同じでしたか？ 入力フォーム 初期値なし 必須 16 （違うと回答した方のみ）相違点を教えて下さい 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 「求人と実際の勤務条件は同じでしたか？」で「違う」と答えた人にのみ入力項目を表示する。 17 カテゴリ 入力フォーム 初期値なし 「勤務塾への志望動機」「指導で気をつけていること」から選ぶ 必須 18 塾について（ご意見） 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 必須 19 当サイトへのご意見 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 20 口コミ・ランキングは参考になりましたか？ 入力フォーム 初期値なし 必須 21 口コミ・ランキングについて（ご意見） 入力フォーム 初期値なし 入力された文字数を入力欄の下に表示する。 22 応募規約に同意する 入力フォーム 初期値なし 必須 4.3. 出力 説明は、 関連する帳票のリンクを貼る の記載を前提とし、本ページに固有の特記事項のみ記載する。 親ページのリンクを貼る に記載の共通出力項目は項目自体を省略する。 項目名 出力先 説明 1 承認ステータス データベース 未承認として 【レビュー中】採用お祝い申請 に保存する。 2 応募した教室名 画面 応募先の教室名を適切にHTMLエスケープ処理をして表示する。 3 採用された教室名 データベース／画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 4 雇用形態 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 5 指導形態 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 6 選考までの段取りについて データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 7 選考までの段取りについての点数 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 8 応募から最初の連絡までの日数 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 9 最初の連絡方法 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 10 面接・説明会や筆記試験について データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 11 面接・説明会や筆記試験についての点数 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 12 研修について データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 13 研修についての点数 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 14 研修期間 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 15 塾の雰囲気や当初のイメージと違ったこと データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 16 求人と実際の勤務条件は同じでしたか データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 17 （違うと回答した方のみ）相違点を教えて下さい データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 18 カテゴリ データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 19 塾について（ご意見） データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 20 当サイトへのご意見 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 21 口コミ・ランキングは参考になりましたか？ データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 22 口コミ・ランキングについて（ご意見） データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 23 応募規約に同意する 画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合はサービスサイトのログイン画面にリダイレクトする。 URL文字列または隠しフォーム入力からID文字列を取得し、入力がない場合/自然数ではない場合はレスポンスステータス404 not foundを出力して処理を終了する。 指定されたIDでデータベースから該当するレコードを抽出する。 該当するレコードがデータベース上に存在しない場合はレスポンスステータス404 not foundを出力して処理を終了する。 4.4.1. 編集フォーム画面表示処理 該当するレコードが見つかったら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704544799#4.3.-%E5%87%BA%E5%8A%9B に記載の通り、表示項目と入力可能項目に項目値を反映させて画面を出力し処理を終了する。 4.4.2. 編集処理 該当するレコードが見つかったら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704544799#4.2.-%E5%85%A5%E5%8A%9B に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっている管理者のIDを更新者IDに設定した上でデータベースの該当レコードを更新する。 該当のレコードの保存した情報を閲覧できる編集完了画面へリダイレクトし処理を終了する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 編集処理を実行した場合に下記フォーマットでログを出力する 成功の場合 User {ユーザー番号} updated gift request. gift_request_number={採用お祝い申請番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {ユーザー番号} failed to update gift request. gift_request_number={採用お祝い申請番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. 制限事項 同時編集に対する明示的な対策は施さない。 同時に編集が実行された際は後勝ちとし、後から保存ボタンを押して実行した時の編集値が適用される。 編集画面において他のユーザーまたは他のウィンドウ・タブが本機能にアクセスしたことをアプリケーションは検知しない。",
  "parentId": "704643090",
  "parentTitle": "090_■応募履歴管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704544799/094_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-12-19T00:25:12.319Z",
  "author": "元ユーザー (Deleted)",
  "excerpt": "1. 目次 1 6 false list false 2. 概要 本機能は 【レビュー中】採用お祝い申請 【レビュー中】お祝い申請：質問・回答 【作成中】口コミ 【作成中】口コミ項目値 の登録済みのデータ1件を編集するための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが、次の条件のときに本機能を利用することができる。 紐づく応募の採用ステータスが「採用」である。 紐づく応募日..."
}