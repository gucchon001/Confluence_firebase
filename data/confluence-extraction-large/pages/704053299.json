{
  "id": "704053299",
  "title": "043_【FIX】プロフィール編集機能（基本情報タブ）",
  "content": "1. 目次 2. 概要 会員がサービスサイトにてプロフィール情報の編集を行うための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが本機能を利用することができる。 登録されている 【FIX】会員：アカウント情報 【FIX】会員：プロフィール情報 【FIX】会員：学歴情報 【FIX】会員：指導可能科目 【FIX】会員：指導経験 【レビュー中】会員：設定情報（希望条件） 1件の登録済み情報を閲覧し、本ページの 「要件定義」-「入力」 欄で入力元が「入力フォーム」と定義されている項目を編集することができる。 同一URLのページ内でタブ切り替えを行う。 画面上の各タブには以下の項目を表示する 本ページの 「要件定義」-「入力」 欄で入力元が「入力フォーム」と定義されている項目のうち、そのタブに該当するもの 本ページの 「要件定義」-「出力」 欄で出力先が「画面」と定義されている項目のうち、そのタブに該当するもの 各タブの項目で1つでも登録されたものがあれば、そのタブのタイトルに「済」の表示をし、登録された項目が1つもない場合は「未」の表示をする。 画面内に共通して以下の要素を表示する プロフィール登録のメリットボタン 押下することでプロフィール登録のメリット表示ポップアップを表示する。 キャンセル 各種設定に戻る ボタン 押下することで編集を取り消し、 055_【FIX】各種設定 に 遷移する。 更新ボタン 押下すると、エラーがなければそのまま編集した入力フォームの内容をデータベースに保存し、システム全体に適用し、編集完了のポップアップを表示する。ポップアップには閉じるボタンを表示し、押下すると ポップアップを閉じる 。 055_【FIX】各種設定 に 遷移する。 プロフィール編集リクエストをAPIへのリクエストとして受信した場合は、本ページの 「要件定義」-「入力」 欄で入力元が「APIリクエスト」と定義されている項目を、エラーがなければ内容をデータベースに保存してシステム全体に適用する。 編集で成功または失敗した場合、以下の情報が入ったログを出力する。 日時、ユーザー番号( 【FIX】会員：アカウント情報 のユーザー番号)、アクセス元IPアドレス、ユーザーエージェント、アクション（成功or失敗） 3.1. 権限 サービスサイトにログインできる会員のみ。 3.2. 帳票 概要に記載の帳票 3.3. メールテンプレート なし 3.4. ワークフロー なし 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 基本情報編集タブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=29504-44797&amp;mode=design&amp;t=4NwXBVFNwtmC8ju0-4 4.1.2. プロフィール登録のメリット表示ポップアップ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=32725-21001&amp;mode=design&amp;t=HRi7z1KlR2cRQvmt-4 4.1.3. プロフィール編集完了ポップアップ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=29598-46094&amp;mode=design&amp;t=HRi7z1KlR2cRQvmt-4 4.2. 入力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 ユーザー番号 入力フォーム 隠しフォーム 編集する対象の会員の 【FIX】会員：アカウント情報 におけるユーザー番号 必須 2 氏名 姓 入力フォーム 必須 3 氏名 名 入力フォーム 必須 4 氏名 姓（フリガナ） 入力フォーム 必須 5 氏名 名（フリガナ） 入力フォーム 必須 6 電話番号 入力フォーム 必須 7 性別 入力フォーム 必須 8 生年月日 入力フォーム 必須 9 郵便番号 入力フォーム 数値を記入後「住所を自動取得」を押下すると下記の項目を自動で更新する。 都道府県 市区町村 必須 10 都道府県 入力フォーム／APIリクエスト 必須 11 市区町村 入力フォーム／APIリクエスト 必須 12 最寄り駅 入力フォーム／APIリクエスト コンボボックスとし、駅グループコードをIDとした上で、表示名は「駅名（所在する都道府県名）」とする。 13 現在の職業 入力フォーム／APIリクエスト 必須 14 職歴・自己PR 入力フォーム／APIリクエスト 4.3. 出力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 出力項目 出力方式 説明 1 氏名 姓 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 2 氏名 名 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 3 氏名 姓（フリガナ） 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 4 氏名 名（フリガナ） 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 5 メールアドレス 画面 対象フォーム内にHTMLエスケープ処理をして出力する。「メールアドレスを変更」ボタンを押下すると 044_【FIX】メールアドレス変更機能 に遷移する。 6 電話番号 画面／データベース 対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 7 性別 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 8 生年月日 画面 ／データベース 対象フォーム内にHTMLエスケープ処理をして出力 、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存 する。 9 郵便番号 画面／データベース 対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 10 都道府県 画面／データベース 画面の対象フォーム内に、保存された値に対応するラベルを出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 11 市区町村 画面／データベース 画面の対象フォーム内に、保存された値に対応するラベルを出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 12 最寄り駅 画面／データベース 画面の対象フォーム内に、保存された値に対応するラベルを出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 13 現在の職業 画面／データベース 画面の対象フォーム内に、保存された値に対応するラベルを出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 14 職歴・自己PR 画面／データベース 画面の対象フォーム内に、保存された値に対応するラベルを出力、エラーがない場合はSQLインジェクション対策をして 【FIX】会員：プロフィール情報 に保存する。 15 更新者 データベース 【作成中】帳票共通項目 の定義に従う。 16 更新日時 データベース 【作成中】帳票共通項目 の定義に従う。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合はログイン画面にリダイレクトする。 隠しフォーム入力からユーザー番号の文字列を取得し、入力がない場合/自然数ではない場合はレスポンスステータス404 not foundを出力して処理を終了する。 指定されたユーザー番号でデータベースから該当するレコードを抽出する。 該当するレコードがデータベース上に存在しない場合はレスポンスステータス404 not foundを出力して処理を終了する。 4.4.1. 編集フォーム画面表示処理 該当するレコードが見つかったら、「出力」 に記載の通り、表示項目と入力可能項目に項目値を反映させて画面を出力し処理を終了する。 4.4.2. 編集処理 該当するレコードが見つかったら、「入力」に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっているユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 更新が完了したことを知らせるポップアップを表示し処理を終了する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 編集処理を実行した場合に下記フォーマットでログを出力する 成功の場合 User {ユーザー番号} updated its {タブ名}. {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {ユーザー番号} failed to update its {タブ名}. {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} ログ文言の{タブ名}はそれぞれ下記とする。 profile_basic_informations profile_educational_backgrounds profile_subjects_and_teaching_experiences profile_work_conditions 5. 制限事項 同時編集に対する明示的な対策は施さない。 同時に編集が実行された際は後勝ちとし、後から保存ボタンを押して実行した時の編集値が適用される。 編集画面において他のユーザーまたは他のウィンドウ・タブが本機能にアクセスしたことをアプリケーションは検知しない。",
  "parentId": "721289315",
  "parentTitle": "040_■アカウント管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704053299/043_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2024-01-25T11:21:25.220Z",
  "author": "元ユーザー (Deleted)",
  "excerpt": "1. 目次 2. 概要 会員がサービスサイトにてプロフィール情報の編集を行うための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが本機能を利用することができる。 登録されている 【FIX】会員：アカウント情報 【FIX】会員：プロフィール情報 【FIX】会員：学歴情報 【FIX】会員：指導可能科目 【FIX】会員：指導経験 【レビュー中】会員：設定情報（希望条件） 1件の登録済..."
}