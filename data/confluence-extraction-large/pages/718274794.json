{
  "id": "718274794",
  "title": "312_【スコープアウト】請求CSV取り込み一覧閲覧機能",
  "content": "2023-11-08 ミーティング議事録 よりスコープアウトのためチケットをクローズとする。 1. 目次 2. 概要 本機能は 関連する帳票のリンクを貼る の登録済みのデータの一覧を閲覧するための機能です。 3. 要求事項 権限を持つ者を列挙 が、概要で挙げた帳票に登録されている情報を一覧で閲覧することができる。 一覧ページ上部には、 一覧フィルター用コンポーネント、表示可能なレコードの総数、新規登録ボタン(そのページで不要なものは削除する、他に必要なものがあれば追加する) を表示する。 （ページネーションをつける場合は） １ページあたりの表示数を50件とし、表示対象のレコードが51件以上の場合は、ページネーションと現在のページ数、総ページ数を一覧の上部と下部に表示する。 登録日時の降順で表示し、並べ替えを行うことはできなくて良い。 レコード一覧の上に次のボタンを表示する 新規登録ボタン 押下すると 新規機能へのリンク に遷移する。 そのほかのボタンと押下した時の挙動 （フィルターコンポーネントを使用する場合は） 一覧フィルター用コンポーネントの表示項目は下記の通りで全てAND結合とし、「絞り込み」ボタンを表示するまでフィルター項目の変更は適用されないものとする。 本ページの 入力のリンク で入力元として「入力フォーム：フィルター」が定義されている項目 絞り込みボタン 押下するとフィルター項目での一覧絞り込みを実行する。検索結果が1件もなかった場合は、「該当する 企業 が見つかりませんでした」と表示する。 一覧の各レコードには次の項目を表示する 本ページの「要件定義」-「出力」欄で出力先として「画面」が定義されている項目の内、 〇〇情報レコード(下の出力欄の記載に合わせる) として定義されている項目 詳細ボタン 押下すると 詳細ページのリンク へと遷移する。 編集ボタン 押下すると 編集ページのリンク へと遷移する。 削除ボタン 押下すると 削除ページのリンク へと遷移する。 新規登録ボタンを押下することで 新規機能ページへリンク へ遷移することができる。 3.1. 権限 権限を持つ者を列挙する 3.2. 帳票 親ページのリンクを貼る の記載と同じ 3.3. メールテンプレート あればリンクを貼る、なければ「なし」と記載する 3.4. ワークフロー 親ページのリンクを貼る の記載と同じ 3.4.1. 本機能 3.4.2. 関連 4. 要件定義 4.1. ユーザーインターフェース（画面） Figmaのリンクを貼る 4.2. 入力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 4.2.1. 検索フィルター・ページネーション 項目名 変数名 入力元 説明 バリデーション ページ番号 URLパラメータ 一覧のページネーションで表示するページを指定するページ番号。自然数の数字で指定する。 入力がない場合、自然数に変換不可能な文字列が入力された場合、存在しないページ番号が指定された場合はいずれもページ番号を1として処理を行う。 自然数以外が入力された場合は1として処理しエラーは発生させない。 存在しないページ番号が指定された場合は1として処理しエラーは発生させない。 項目名(文字入力) URLパラメータ 1行テキストボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」を部分一致でフィルタリングする。 最大文字数は 30 文字、単一入力のみ受け付ける。最大文字数を超えた検索の場合は最初の 30 文字で検索をかける。 初期状態は最後に入力したものを表示する。前に入力されたものがない場合は空欄を表示する。 任意項目。入力されていない場合はフィルタリングをおこなわない。 項目名(セレクトボックス) URLパラメータ 単一選択のセレクトボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」に記載されている選択肢と「すべて」から選択することができる。デフォルトは「すべて」。 初期状態は最後に入力したものを選択された選択肢として表示する。前に入力されたものがない場合はプレースホルダーを表示する。 任意項目。入力されていない場合は「すべて」と判定しフィルタリングはおこなわない。 項目名(ラジオボタン) URLパラメータ ラジオボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」に記載されている選択肢から選択することができる。デフォルトは未選択。 初期状態は最後に入力したものを選択済みとして表示する。前に入力されたものがない場合は全て未選択で表示する。 任意項目。入力されていない場合はフィルタリングはおこなわない。 項目名(チェックボックス) URLパラメータ チェックボックスボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」に記載されている選択肢から選択することができる。デフォルトは未選択。 初期状態は最後に入力したものをチェック済みとして表示する。前に入力されたものがない場合は全て未選択で表示する。 任意項目。入力されていない場合はフィルタリングはおこなわない。 項目名（日時系） URLパラメータ 検索期間の開始日時と終了日時について、それぞれ年・月・日・時・分でのデートタイムピッカーで入力し、それぞれの入力規制は 共通要件 に従う。 「本日分」ボタンを押下すると、押下した日付の0時から翌日の0時までを対象期間に入力する。 クリアボタンについては、「開始」ボタンを押下すると開始日時を初期値に戻す。「終了」ボタンを押下すると終了日時を初期値に戻す。「両方」ボタンを押下すると開始日時と終了日時を初期値に戻す。 初期状態は最後に入力したものを表示する。前に入力されたものがない場合は 現在の時間から1ヶ月前までの期間 を入力する。 任意項目。入力されていない場合はフィルタリングはおこなわない。 4.2.2. 各レコード内 項目名 変数名 入力元 説明 バリデーション 項目名(文字入力) URLパラメータ 1行テキストボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」を部分一致でフィルタリングする。 最大文字数は 30 文字、単一入力のみ受け付ける。最大文字数を超えた検索の場合は最初の 30 文字で検索をかける。 初期状態は最後に入力したものを表示する。前に入力されたものがない場合は空欄を表示する。 任意項目。入力されていない場合はフィルタリングをおこなわない。 項目名(セレクト) URLパラメータ 単一選択のセレクトボックスで入力し、 対応する帳票のリンクを貼る の「 項目名 」に記載されている選択肢と「すべて」から選択することができる。デフォルトは「すべて」。 初期状態は最後に入力したものを表示する。前に入力されたものがない場合はプレースホルダーを表示する。 任意項目。入力されていない場合は「すべて」と判定しフィルタリングはおこなわない。 4.3. 出力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 4.3.1. 検索フィルター・ページネーション 出力項目 出力先 説明 件数 画面 指定されたフィルタリングを適用した結果表示可能なデータの総件数をページ上部に表示する。 総ページ数 画面 指定されたフィルタリングを適用した結果の件数に対して1ページあたり50件の表示で計算した総ページ数をページ上部に表示する。 ページ番号 画面 入力されたページ番号を入力処理にて変換した値をページ上部に表示する。 〇〇(HTMLエスケープ) 画面 入力された「 〇〇 」を入力処理にて変換した値を、フィルター用コンポーネント内の「 〇〇 」のテキストボックスに適切なHTMLエスケープ処理を施して表示する。 〇〇(セレクトボックス) 画面 入力された「 〇〇 」を入力処理にて変換した値を、フィルター用コンポーネント内の「 〇〇 」のセレクトボックス内にて対応するラベル名を表示する。 〇〇(ラジオボタン) 画面 入力された「 〇〇 」を入力処理にて変換した値を、フィルター用コンポーネント内の「 〇〇 」のラジオボタン群にて対応するラベル名が選択された状態で表示する。 〇〇(チェックボックス) 画面 入力された「 〇〇 」を入力処理にて変換した値を、フィルター用コンポーネント内の「 〇〇 」のチェックボックス群にて対応するラベル名がチェックされた状態で表示する。 〇〇(デートタイムピッカー) 画面 検索期間の開始日時と終了日時について、それぞれ年・月・日・時・分について、入力された値を入力処理にて変換した値を利用し、フィルター用コンポーネント内のそれぞれのデートタイムピッカーで初期選択状態とする。 4.3.2. 各レコード情報 指定されたフィルタリングを適用してデータベースから抽出した商品情報レコードの配列をテーブル組みでページ上に表示する 出力項目 出力先 説明 〇〇(そのまま表示) 画面 データベースから取得した 〇〇情報 1レコードの「 〇〇ID 」。登録された「 〇〇ID 」文字列を変換せずにそのまま表示する。 〇〇(HTMLエスケープ) 画面 データベースから取得した 〇〇情報 1レコードの「 〇〇名称 」を適切にHTMLエスケープして表示する。 〇〇(選択式) 画面 データベースから取得した 〇〇情報 1レコードの「 〇〇 」。保存された値が指し示す選択肢のラベルを出力する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合は 全体管理者画面 のログイン画面にリダイレクトし、ログイン認証されているが権限の章に記載した権限を持っていない場合は 全体管理者画面の TOP画面にリダイレクトする。 「企業コード」「企業名」「教室グループ名」「管理メモ1」「管理メモ2」 の入力処理をおこなう。 入力された全ての条件をAND結合してデータベースから条件に合致したレコードの総件数を取得する。 レコードの総件数が 20,000 を超えていた場合、以降は総件数を 20,000 件として処理を続行する。 レコードの総件数からページ総数を計算し、「ページ番号」の入力がページ総数を超えていた場合、自然数以外を表す文字列だった場合は以降はページ番号=1として処理をおこなう。 レコードの総件数が0件だった場合、データの抽出を実行しないで0件の 〇〇 データ配列を生成する。 レコードの総件数が1件以上だった場合、上記の条件をもとにして登録日時の降順に並べて、指定されたページ番号に表示すべき 〇〇 情報50件のデータをデータベースから抽出する。 出力の章に記載した出力項目をページ表示できるよう整形し、ページを出力する。 4.5. エラー処理 入力処理でエラーは発生させない。 それ以外で発生した例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 一覧を表示した場合に下記フォーマットでログを出力する User { 全体管理者 のユーザー番号} read company list. page={ページ番号} company_code={企業コード} company_name={企業名} brand_name={教室グループ名} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 一覧表示された各レコードの並べ替え機能は提供しない",
  "parentId": "717456039",
  "parentTitle": "310_■【スコープアウト】請求CSV取り込み機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/718274794/312_+CSV",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-11-29T01:56:44.689Z",
  "author": "feng_xiaomeng (Unlicensed)",
  "excerpt": "2023-11-08 ミーティング議事録 よりスコープアウトのためチケットをクローズとする。 1. 目次 2. 概要 本機能は 関連する帳票のリンクを貼る の登録済みのデータの一覧を閲覧するための機能です。 3. 要求事項 権限を持つ者を列挙 が、概要で挙げた帳票に登録されている情報を一覧で閲覧することができる。 一覧ページ上部には、 一覧フィルター用コンポーネント、表示可能なレコードの総数、新規..."
}