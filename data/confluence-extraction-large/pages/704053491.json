{
  "id": "704053491",
  "title": "173_【FIX】求人情報編集機能（基本情報タブ）",
  "content": "1. 目次 2. 概要 本機能は 【FIX】求人：基本情報 【FIX】求人：勤務条件・指導科目 【FIX】求人：応募条件・研修情報 【FIX】求人：応募情報等 【FIX】求人：PR情報 の登録済みのデータの一覧を編集するための機能です。 項目の詳細については、下記のページに分けて記述する。 173_【FIX】求人情報編集機能（基本情報タブ） 173_1【FIX】求人情報編集機能（勤務条件・指導科目タブ） 173_2【FIX】求人情報編集機能（応募条件・研修情報タブ） 173_3【FIX】求人情報編集機能（応募情報等タブ） 173_4【FIX】求人情報編集機能（PR情報タブ） 3. 要求事項 管 理画面にログインすることができるシステム管理者、塾講師ステーション管理者、ゲスト管理者のみが本機能を利用することができる。 登録されている 【FIX】求人：基本情報 【FIX】求人：勤務条件・指導科目 【FIX】求人：応募条件・研修情報 【FIX】求人：応募情報等 【FIX】求人：PR情報 1件の登録済み情報を閲覧し、本ページの 「要件定義」-「入力」 欄で入力元が「入力フォーム」と定義されている項目を、それぞれのタブごとに編集することができる。 タブごとにURLを指定する。 画面上の各タブには以下の項目を表示する 本ページの 「要件定義」-「入力」 欄で入力元が「入力フォーム」と定義されている項目のうち、そのタブに該当するもの ただし求人が削除されており、直リンクでアクセスのあった場合は入力項目を表示しない。 本ページの 「要件定義」-「出力」 欄で出力先が「画面」と定義されている項目のうち、そのタブに該当するもの キャンセルボタン ただし求人が削除されており、直リンクでアクセスのあった場合は表示しない。 更新するボタン ただし求人が削除されており、直リンクでアクセスのあった場合は表示しない。 入力項目を未保存のままタブを切り替える際は、変更が保存されないままタブを移動するか確認を求めるポップアップを表示し、編集画面に戻るボタンとタブを移動するボタンを配置する。 ユーザーがタブを移動するを選んだ場合は、変更を保存せずにタブを切り替える。 ユーザーが 編集画面に戻る を選んだ場合は、ポップアップを閉じタブを切り替えない。 キャンセルボタンを押下することで編集を取り消し、 171_【FIX】求人情報一覧閲覧機能 に遷移する。 更新するボタンを押下すると、以下のエラーチェックを行う。 入力内容に問題がある場合は、同入力フォームページのフォームに入力された値を表示した状態で、どの入力項目に問題があるかわかるようにエラーメッセージを表示する。 エラーがなければそのまま編集した入力フォームの内容をデータベースに保存し、システム全体に適用し、編集完了のポップアップを表示する。 保存が完了したら エリア平均給与算出共通処理 を実行する。 ポップアップには以下を表示する。 閉じるボタン ポップアップを閉じ、同じタブを表示する。 画面には更新したことがわかるフラッシュメッセージを表示する。 編集で成功または失敗した場合、以下の情報が入ったログを出力する。 日時、管理者ID( 【FIX】全体管理者登録情報 のユーザー番号)、求人番号( 【FIX】求人：基本情報 の求人番号)、アクセス元IPアドレス、ユーザーエージェント、アクション（成功or失敗） 3.1. 権限 管理画面にログインできるシステム管理者、塾講師ステーション管理者、ゲスト管理者のみ 3.2. 帳票 170_【要求FIX】求人管理機能 の記載と同じ。 3.3. メールテンプレート なし 3.4. ワークフロー 170_【要求FIX】求人管理機能 の記載と同じ。 3.4.1. 本機能 3.4.2. 関連 4. 要件定義 4.1. ユーザーインターフェース （画面） 4.1.1. 基本情報編集タブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=8515-63351&amp;mode=design&amp;t=C3AyYMJepqMR8BFn-4 4.1.2. タブ移動の際のポップアップ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=14245-67853&amp;mode=design&amp;t=C3AyYMJepqMR8BFn-4 4.1.3. 編集が完了したことを表示するポップアップ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=14245-67835&amp;mode=design&amp;t=C3AyYMJepqMR8BFn-4 4.2. 入力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 4.2.1. 基本情報 入力項目 変数名 入力元 説明 制限とエラーメッセージ 1 求人番号 入力フォーム 隠しフォーム 編集する対象の求人の 【FIX】求人：基本情報 における求人番号 必須 2 求人タイトル 入力フォーム 初期値＝データベースから読み込んだ値 必須 3 群 入力フォーム 初期値＝データベースから読み込んだ値 必須 4 表示順 入力フォーム 初期値＝データベースから読み込んだ値 5 指導特徴 入力フォーム 初期値＝データベースから読み込んだ値 6 雇用形態 入力フォーム 初期値＝データベースから読み込んだ値 必須 7 指導形態 入力フォーム 初期値＝データベースから読み込んだ値 必須 8 指導形態：補足説明 入力フォーム 初期値＝データベースから読み込んだ値 9 給与形態 入力フォーム 初期値＝データベースから読み込んだ値 ステーションでの求人を編集する場合は、「月給」を選択肢に表示しない。 10 給与形態：授業、コマ 入力フォーム 初期値＝データベースから読み込んだ値 11 給与：最低時給 入力フォーム 初期値＝データベースから読み込んだ値 必須 注釈に https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/minimumichiran/index.html へのリンクを設置する。 都道府県ごとの最低賃金を登録した設定ファイルを参照し、その求人の教室の都道府県の最低賃金未満の金額だった場合はエラーを表示する。 最低賃金の比較判定条件は 172_【FIX】求人情報新規作成機能 と同じとする。 12 給与：最高時給 入力フォーム 初期値＝データベースから読み込んだ値 13 給与：補足説明 入力フォーム 初期値＝データベースから読み込んだ値 14 想定年収：最低 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 必須 15 想定年収：最高 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 必須 16 想定年収：補足説明 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 17 昇給 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 18 賞与 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 19 年間休日 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 20 休日・休暇 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 21 休日・休暇：補足説明 &nbsp; 入力フォーム 初期値＝データベースから読み込んだ値 &nbsp; 22 待遇 入力フォーム 初期値＝データベースから読み込んだ値 23 待遇：補足説明 入力フォーム 初期値＝データベースから読み込んだ値 24 仕事内容 入力フォーム 初期値＝データベースから読み込んだ値 25 質問1 入力フォーム 初期値＝データベースから読み込んだ値 必須 26 質問2 入力フォーム 初期値＝データベースから読み込んだ値 必須 27 質問3 入力フォーム 初期値＝データベースから読み込んだ値 必須 28 メッセージ 入力フォーム 初期値＝データベースから読み込んだ値 必須 29 応募URL 入力フォーム 初期値＝データベースから読み込んだ値 必須 4.3. 出力 4.3.1. 基本情報 項目名 出力先 説明 1 企業名 画面 紐づけようとしている企業名を表示する 2 教室グループ 画面 紐づけようとしている教室グループ名を表示する 3 教室名 画面 紐づけようとしている教室名を表示する 4 掲載状態 データベース/画面 保存された値が指し示す選択肢をテキストで表示する。 5 求人番号 データベース/画面 HTMLエスケープ処理をして出力する。 6 求人タイトル データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 7 群 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 8 表示順 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 9 指導特徴 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 10 雇用形態 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 11 指導形態 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 12 指導形態：補足説明 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 13 給与形態 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 14 給与形態：授業、コマ データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 15 給与：最低時給 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 16 給与：最高時給 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 17 給与：補足説明 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 18 想定年収：最低 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 19 想定年収：最高 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 20 想定年収：補足説明 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 21 昇給 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 22 賞与 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 23 年間休日 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 24 休日・休暇 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 25 休日・休暇：補足説明 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 26 待遇 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値が指し示す選択肢をテキストで表示する。 27 待遇：補足説明 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 28 仕事内容 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 29 質問1 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 30 質問2 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 31 質問3 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 32 メッセージ データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 33 応募URL データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 ただし求人が削除されており、直リンクでアクセスのあった場合は保存されている値をテキストで表示する。 34 更新者 データベース 【作成中】帳票共通項目 に従う。 35 更新日時 データベース 【作成中】帳票共通項目 に従う。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合は全体管理者画面のログイン画面にリダイレクトし、ログイン認証されているが権限の章に記載した権限を持っていない場合は全体管理者画面のTOP画面にリダイレクトする。 隠しフォーム入力から求人番号の文字列を取得し、入力がない場合/自然数ではない場合はレスポンスステータス404 not foundを出力して処理を終了する。 指定された求人番号でデータベースから該当するレコードを抽出する。 該当するレコードがデータベース上に存在しない場合はレスポンスステータス404 not foundを出力して処理を終了する。 4.4.1. 編集フォーム画面表示処理 該当するレコードが見つかったら、「出力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704053491#4.3.-%E5%87%BA%E5%8A%9B ） に記載の通り、表示項目と入力可能項目に項目値を反映させて画面を出力し処理を終了する。 4.4.2. 編集処理 該当するレコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704053491#4.2.1.-%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1 ） に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっている全体管理者のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 編集が完了したことが分かるフラッシュメッセージを表示して処理を終了する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 編集画面に遷移した場合に下記フォーマットでログを出力する User {全体管理者のユーザー番号} started to update job {タブ名} . job_number={求人番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 編集処理を実行した場合に下記フォーマットでログを出力する 成功の場合 User {全体管理者のユーザー番号} updated job {タブ名} . job_number={求人番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {全体管理者のユーザー番号} failed to update job {タブ名} . job_number={求人番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} ログ文言の{タブ名}はそれぞれ下記とする。 job_basic_informations job_work_guidance_conditions job_application_training_conditions job_application_conditions job_appeal_informations 5. スコープ外・制限事項 同時編集に対する明示的な対策は施さない。 同時に編集が実行された際は後勝ちとし、後から保存ボタンを押して実行した時の編集値が適用される。 編集画面において他のユーザーまたは他のウィンドウ・タブが本機能にアクセスしたことをアプリケーションは検知しない。",
  "parentId": "704053484",
  "parentTitle": "170_【要求FIX】求人管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704053491/173_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2025-07-29T09:53:19.863Z",
  "author": "ejiri_yusuke",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】求人：基本情報 【FIX】求人：勤務条件・指導科目 【FIX】求人：応募条件・研修情報 【FIX】求人：応募情報等 【FIX】求人：PR情報 の登録済みのデータの一覧を編集するための機能です。 項目の詳細については、下記のページに分けて記述する。 173_【FIX】求人情報編集機能（基本情報タブ） 173_1【FIX】求人情報編集機能（勤務条件・指導科目..."
}