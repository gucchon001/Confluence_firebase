{
  "id": "718307547",
  "title": "293_【機能統合より不要】請求管理 - 採用者編集機能",
  "content": "1. 目次 1 6 false list false 2. 概要 本機能は 関連する帳票のリンクを貼る の登録済みのデータ1件を編集するための機能です。 3. 要求事項 管理画面にログインできるシステム管理者、塾講師ステーション管理者のみ が本機能を利用することができる。 登録されている 関連する帳票のリンクを貼る 1件の登録済み情報を閲覧し、本ページの「要件定義」-「入力」欄で入力元が「入力フォーム」と定義されている項目を編集することができる。 画面上には以下の項目を表示する 本ページの「要件定義」-「入力」欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718307547/293#4.2.-%E5%85%A5%E5%8A%9B ）で入力元が「入力フォーム」と定義されている項目の、保存された項目値が反映された入力フォーム 本ページの「要件定義」-「出力」欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/718307547/293#4.3.-%E5%87%BA%E5%8A%9B ）で出力先として「画面」が定義されている項目の名称と保存された項目値 採用者一覧に戻る ボタン 確認する ボタン 採用者一覧に戻 ボタンを押下すると編集を取り消し、 291_【作成中】請求管理 - 採用者一覧閲覧機能 に遷移する。 確認する ボタンを押下すると、入力内容にエラーがあれば更新はせずにエラーの内容を表示する。エラーがなければそのまま編集した入力フォームの内容をデータベースに保存し、システム全体に適用し、 編集完了のポップアップを表示する 。 編集完了のポップアップには閉じるボタンを配置し、押下すると 詳細閲覧ページのリンクを貼る に遷移する。 3.1. 権限 管理画面にログインできるシステム管理者、塾講師ステーション管理者のみ 3.2. 帳票 親ページのリンクを貼る の記載と同じ 3.3. メールテンプレート なし 3.4. ワークフロー 270_■請求管理機能 の記載と同じ 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 請求管理採用者編集 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=74941-154303&amp;mode=design&amp;t=OYDWs3NY49dB8rkL-0 4.1.2. 更新完了 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=74941-154284&amp;mode=design&amp;t=OYDWs3NY49dB8rkL-0 4.2. 入力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 バリデーション 請求番号 &nbsp; 入力フォーム 隠しフォーム 削除する対象の企業の 【FIX】請求：基本情報 における請求番号 必須 応募ID &nbsp; 入力フォーム 初期状態：データベースから読み込んだ値 必須 単価（税込） &nbsp; 入力フォーム 初期状態：データベースから読み込んだ値 必須 備考 &nbsp; 入力フォーム 初期状態：データベースから読み込んだ値 &nbsp; 4.3. 出力 説明は、 関連する帳票のリンクを貼る の記載を前提とし、本ページに固有の特記事項のみ記載する。 親ページのリンクを貼る に記載の共通出力項目は項目自体を省略する。 項目名 出力先 説明 1 請求番号 画面 画面の対象フォーム内にHTMLエスケープ処理をして出力、入力エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 2 応募ID データベース/画面 画面の対象フォーム内にHTMLエスケープ処理をして出力、入力エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 3 単価（税込） データベース/画面 画面の対象フォーム内にHTMLエスケープ処理をして出力、入力エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 4 備考 データベース/画面 画面の対象フォーム内にHTMLエスケープ処理をして出力、入力エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 5 更新者 データベース 【作成中】帳票共通項目 に従う。 6 更新 日時 データベース 【作成中】帳票共通項目 に従う。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合、または管理者権限でログインしていない場合は全体管理者画面のログイン画面にリダイレクトする。 URL文字列または隠しフォーム入力からID文字列を取得し、入力がない場合/自然数ではない場合はレスポンスステータス404 not foundを出力して処理を終了する。 指定されたIDでデータベースから該当するレコードを抽出する。 該当するレコードがデータベース上に存在しない場合はレスポンスステータス404 not foundを出力して処理を終了する。 4.4.1. 編集フォーム画面表示処理 該当するレコードが見つかったら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704381391#%E5%87%BA%E5%8A%9B に記載の通り、表示項目と入力可能項目に項目値を反映させて画面を出力し処理を終了する。 4.4.2. 編集処理 該当するレコードが見つかったら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704381391#%E5%85%A5%E5%8A%9B に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっている管理者のIDを更新者IDに設定した上でデータベースの該当レコードを更新する。 該当のレコードの保存した情報を閲覧できる 103_【FIX】商品詳細閲覧機能 へリダイレクトし処理を終了する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 一覧を表示した場合に下記フォーマットでログを出力する User {管理者ID} managed to access on service edit. id={ID} service_id={商品ID} name={商品名称} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. 制限事項 最後に閲覧していた 一覧ページのリンクを貼る のページに戻るための機能はアプリケーションでは提供しない。 同時編集に対する明示的な対策は施さない。 同時に編集が実行された際は後勝ちとし、後から保存ボタンを押して実行した時の編集値が適用される。 編集画面において他のユーザーまたは他のウィンドウ・タブが本機能にアクセスしたことをアプリケーションは検知しない。",
  "parentId": "718635173",
  "parentTitle": "290_■請求管理採用者管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/718307547/293_+-",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-12-13T07:37:57.989Z",
  "author": "feng_xiaomeng (Unlicensed)",
  "excerpt": "1. 目次 1 6 false list false 2. 概要 本機能は 関連する帳票のリンクを貼る の登録済みのデータ1件を編集するための機能です。 3. 要求事項 管理画面にログインできるシステム管理者、塾講師ステーション管理者のみ が本機能を利用することができる。 登録されている 関連する帳票のリンクを貼る 1件の登録済み情報を閲覧し、本ページの「要件定義」-「入力」欄で入力元が「入力フォ..."
}