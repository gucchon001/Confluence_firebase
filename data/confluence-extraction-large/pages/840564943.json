{
  "id": "840564943",
  "title": "097_採用ステータス変更機能",
  "content": "1. 目次 2. 概要 本機能は 【FIX】求人：基本情報 の登録済みのデータの「採用ステータス（会員）」を編集するためのAPIです。 3. 要求事項 091_応募履歴一覧閲覧機能 から呼び出すAPIとして実装する。 サービスサイトにログインできる会員のみが、概要で挙げた帳票に登録された自身に紐づくデータの「採用ステータス（会員）」を編集することができる。 すでに登録されている「採用ステータス（会員）」の値が「応募中」ではない場合エラーを返す。 エラーがなければJSONボディとして入力された「採用ステータス（会員）」の値を新しい「採用ステータス（会員）」としてレコードを更新する。 3.1. 権限 サービスサイトにログインできる会員のみ 3.2. 帳票 【FIX】求人：基本情報 3.3. メールテンプレート なし 3.4. ワークフロー 090_■応募履歴管理機能 の記載と同じ 3.4.1. 本機能 3.4.2. 関連 4. 要件定義 4.1. ユーザーインターフェース（画面） なし 4.2. 入力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 応募番号 JSONボディ 操作する対象の 【FIX】求人：基本情報 の応募番号 2 ユーザー番号 JSONボディ 操作している会員の 【FIX】会員：アカウント情報 のユーザー番号 3 採用ステータス（会員） JSONボディ 変更後の値を送信する 4.3. 出力 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/811499640/API#1.1.-CRUD%E5%85%B1%E9%80%9A%E5%87%BA%E5%8A%9B を常に含める。また説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 出力項目 出力先 説明 1 応募番号 JSONボディ 2 ユーザー番号 JSONボディ 3 採用ステータス（会員） JSONボディ／データベース エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 4 更新者 データベース 【作成中】帳票共通項目 に従う。 5 更新日時 データベース 【作成中】帳票共通項目 に従う。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合はログイン認証エラーとする。 入力欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/724598798#4.2.-%E5%85%A5%E5%8A%9B ）に記載の項目の入力処理をおこなう。 出力欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/724598798#4.3.-%E5%87%BA%E5%8A%9B ）に記載した出力項目を出力する。 4.4.1. フラグ切り替え処理 該当する応募レコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/724598798#4.2.-%E5%85%A5%E5%8A%9B ）に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーを返し処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっている会員のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 編集が完了したことが分かるポップアップを 171_【FIX】求人情報一覧閲覧機能 の画面上で表示して処理を終了する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 編集処理を実行した場合に下記フォーマットでログを出力する 成功の場合 User {全体管理者のユーザー番号} updated job published flag. job_number={求人番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {全体管理者のユーザー番号} failed to update job published flag. job_number={求人番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 なし",
  "parentId": "704643090",
  "parentTitle": "090_■応募履歴管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/840564943/097_",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-09-21T07:00:19.047Z",
  "author": "元ユーザー (Deleted)",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】求人：基本情報 の登録済みのデータの「採用ステータス（会員）」を編集するためのAPIです。 3. 要求事項 091_応募履歴一覧閲覧機能 から呼び出すAPIとして実装する。 サービスサイトにログインできる会員のみが、概要で挙げた帳票に登録された自身に紐づくデータの「採用ステータス（会員）」を編集することができる。 すでに登録されている「採用ステータス（会..."
}