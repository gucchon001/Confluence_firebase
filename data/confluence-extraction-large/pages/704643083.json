{
  "id": "704643083",
  "title": "095_【FIX】勤務アンケート入力機能",
  "content": "1. 目次 2. 概要 会員がサービスサイトにてお祝い③のための 【レビュー中】採用お祝い申請 1件とそれにひもづく 【レビュー中】お祝い申請：質問・回答 および 【作成中】口コミグループ と 【作成中】口コミ の新規登録を行うための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが本機能を利用することができる。 ただし回答できるのは、 紐づく 【レビュー中】採用お祝い申請 の 【レビュー中】お祝い申請：質問・回答 の「正式指導日」の6ヶ月後の翌日から、「正式指導日」の1年以内までする。 6ヶ月後採用お祝い申請期間開始通知メール（会員宛） から 、または 091_【FIX】応募履歴一覧閲覧機能 にて「勤務アンケート回答」ボタンを押下することで、入力画面にアクセスできる。 回答できる期間外で誤ってアクセスがあった場合は、「回答可能期間外です。」というエラーのポップアップを出し、閉じるを押すと全体トップへ遷移する。 画面上部の「採用お祝い申請について」を押下するとポップアップを開き、ポップアップには採用お祝い申請についての説明と、 https://juku.st/campaign へのリンクが含まれる。閉じるボタンも配置し、押下するとポップアップを閉じる。 入力画面には以下の項目を表示する 本ページの 「要件定義」-「入力」 欄 で入力元が「入力フォーム」と定義されている項目 本ページの 「要件定義」-「出力」 欄 で出力先が「画面」と定義されている項目 応募一覧へ戻るボタン 押下すると 091_【FIX】応募履歴一覧閲覧機能 へ遷移する。 アンケートに回答するボタン 押下すると、エラーがなければそのまま編集した入力フォームの内容をデータベースに保存し、システム全体に適用し、送信完了画面に遷移する。送信完了画面には 091_【FIX】応募履歴一覧閲覧機能 への導線を設置する。 新規作成で成功または失敗した場合、以下の情報が入ったログを出力する。 日時、ユーザー番号、アクセス元IPアドレス、ユーザーエージェント、アクション（成功or失敗） 3.1. 権限 要求の通り。 3.2. 帳票 概要の通り。 3.3. メールテンプレート 本要求定義書で定義すべきものはなし 3.4. ワークフロー 【FIX】採用お祝い/口コミ確認・公開フロー 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 規約ポップアップ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=79706-54913&amp;mode=design&amp;t=5CpYMN0HRfNowOf5-4 4.1.2. 入力画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=106287-42509&amp;mode=design&amp;t=QFeFLi6LOKGG8zsS-4 4.1.3. 送信完了画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=106287-42754&amp;mode=design&amp;t=QFeFLi6LOKGG8zsS-4 4.2. 入力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 現在の勤務状況 入力フォーム 初期値なし 必須 2 平均勤務日数 入力フォーム 初期値なし 現在の勤務状況で「勤務している」を選択された場合のみ表示され、必須である。 3 就業期間 入力フォーム 初期値なし 必須 4 退社理由 入力フォーム 初期値なし 現在の勤務状況で「勤務していない」を選択された場合のみ表示され、必須である。 5 月額の平均給与（講習時除く） 入力フォーム 初期値なし 必須 6 主な指導学年 入力フォーム 初期値なし 必須 7 指導科目 入力フォーム 初期値なし 必須 8 勤務満足度（給料） 入力フォーム 初期値なし 必須 9 勤務満足度（給料コメント） 入力フォーム 初期値なし 必須 10 勤務満足度（人間関係・上司） 入力フォーム 初期値なし 必須 11 勤務満足度（人間関係・上司コメント） 入力フォーム 初期値なし 必須 12 勤務満足度（人間関係・同僚） 入力フォーム 初期値なし 必須 13 勤務満足度（人間関係・同僚コメント） 入力フォーム 初期値なし 必須 14 勤務満足度（システム） 入力フォーム 初期値なし 必須 15 勤務満足度（システムコメント） 入力フォーム 初期値なし 必須 16 プライベートとの両立 入力フォーム 初期値なし 必須 17 プライベートとの両立（コメント） 入力フォーム 初期値なし 必須 18 授業外業務の給与について 入力フォーム 初期値なし 必須 19 自分が成長できたこと 入力フォーム 初期値なし 必須 20 塾講師のやりがい 入力フォーム 初期値なし 必須 21 他の人に紹介したいか 入力フォーム 初期値なし 必須 22 他の人に紹介したいか（その理由をお書きください） 入力フォーム 初期値なし 必須 4.3. 出力 変数名、説明、バリデーションは、各帳票の記載を前提とし、本ページに固有の特記事項のみ記載する。 出力項目 出力方式 説明 1 現在の勤務状況 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 2 平均勤務日数 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 3 就業期間 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 4 退社理由 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 5 月額の平均給与（講習時除く） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 6 主な指導学年 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 7 指導科目 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 8 勤務満足度（給料） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 9 勤務満足度（給料コメント） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 10 勤務満足度（人間関係・上司） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 11 勤務満足度（人間関係・上司コメント） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 12 勤務満足度（人間関係・同僚） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 13 勤務満足度（人間関係・同僚コメント） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 14 勤務満足度（システム） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 15 勤務満足度（システムコメント） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 16 プライベートとの両立 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 17 プライベートとの両立（コメント） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 18 授業外業務の給与について 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 19 自分が成長できたこと 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 20 塾講師のやりがい 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 21 他の人に紹介したいか 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内に、入力された値が指し示す選択肢が選択された状態で表示する。エラーがない場合は入力された値にSQLインジェクション対策をしてデータベースに保存する。 22 他の人に紹介したいか（その理由をお書きください） 画面／データベース 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合はサービスサイトのログイン画面にリダイレクトする。 4.4.1. 入力画面表示処理 本ページの「入力」に記載の全ての項目の入力フォームと登録ボタンを配置した画面を表示する。 4.4.2. 新規登録処理 入力フォームからのデータを受け取り、「入力」の定義にしたがって値の妥当性検査をおこなう。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、作成日時、更新日時を操作している現在時刻とし、操作を行なっているユーザー番号を作成者/更新者に設定した上でデータベースに新規レコードとして挿入する。 登録完了画面へ遷移し、処理を終了する。 4.5. エラー処理 上記以外で発生した例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 登録処理を実行した場合に下記フォーマットでログを出力する。 成功した場合 User {ユーザー番号} created 2nd gift request. gift_request_number={採用お祝い申請番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗した場合 User {ユーザー番号} failed to create 2nd gift request. {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 なし",
  "parentId": "704643090",
  "parentTitle": "090_■応募履歴管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704643083/095_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2024-07-09T05:58:40.895Z",
  "author": "元ユーザー (Deleted)",
  "excerpt": "1. 目次 2. 概要 会員がサービスサイトにてお祝い③のための 【レビュー中】採用お祝い申請 1件とそれにひもづく 【レビュー中】お祝い申請：質問・回答 および 【作成中】口コミグループ と 【作成中】口コミ の新規登録を行うための機能です。 3. 要求事項 サービスサイトにログインできる会員のみが本機能を利用することができる。 ただし回答できるのは、 紐づく 【レビュー中】採用お祝い申請 の ..."
}