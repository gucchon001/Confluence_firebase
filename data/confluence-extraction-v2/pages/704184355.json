{
  "id": "704184355",
  "title": "133_【FIX】企業担当者詳細閲覧機能",
  "content": "1. 目次 2. 概要 本機能は 【FIX】クライアント企業管理者 【FIX】クライアント企業管理者-企業紐付け の登録済みのデータ1件を閲覧するための機能です。 3. 要求事項 管理画面にログインすることができるシステム管理者、塾講師ステーション管理者、ゲスト管理者のみが利用することができる。 本機能は 【FIX】クライアント企業管理者 【FIX】クライアント企業管理者-企業紐付け に記載の全ての項目について、1URL=1レコードで保存された値を表示して閲覧することができる。以下「本ページ」と記載する。 本ページには、以下を表示する 本ページの 「要件定義」-「出力」 欄で出力先として「画面」が定義されている項目 編集ボタン 押下することで 134_【要求FIX】企業担当者情報編集機能 に遷移する。 一覧に戻るボタン 押下することで 131_【FIX】企業担当者一覧閲覧機能 に遷移する。 存在しないクライアント企業担当者が指定された場合は対象URLのページが存在しないように振る舞う。 ページを閲覧した場合、次の内容を含むログを出力する 日時、管理者ID( 【FIX】全体管理者登録情報 のユーザー番号)、クライアント企業管理者ID( 【FIX】クライアント企業管理者 のユーザー番号：クライアント企業管理者)、アクセス元IPアドレス、ユーザーエージェント 3.1. 権限 管理画面にログインできるシステム管理者、塾講師ステーション管理者、ゲスト管理者のみ 3.2. 帳票 130_【要求FIX】企業担当者管理機能 の記載と同じ 3.3. メールテンプレート なし 3.4. ワークフロー 130_【要求FIX】企業担当者管理機能 の記載と同じ 3.4.1. 本機能 3.4.2. 関連 4. 要件定義 4.1. ユーザーインターフェース （画面） https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=5044-60949&amp;mode=design&amp;t=xc4LU1VxsRcjGxdE-4 4.2. 入力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 項目名 変数名 入力元 説明 制限とエラーメッセージ ユーザー番号 &hellip; URLパラメータ 閲覧するクライアント企業管理者を一意に指定するためのID &hellip; 企業番号 URLパラメータ クライアント企業管理者は複数の企業を担当できるため、当該企業での登録・担当情報を閲覧するために必要 4.3. 出力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 出力項目 出力先 説明 ユーザー番号 画面 HTMLエスケープ処理をして出力する。 氏名 画面 HTMLエスケープ処理をして出力する。 メールアドレス 画面 HTMLエスケープ処理をして出力する。 担当者電話番号 画面 HTMLエスケープ処理をして出力する。 掲載担当 画面 保存された値が指し示す選択肢のラベルを出力する。 採用確認担当 画面 保存された値が指し示す選択肢のラベルを出力する。 請求担当 画面 保存された値が指し示す選択肢のラベルを出力する。 有効フラグ 画面 保存された値が指し示す選択肢のラベルを出力する。 管理者フラグ 画面 保存された値が指し示す選択肢のラベルを出力する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合は全体管理者画面のログイン画面にリダイレクトし、ログイン認証されているが権限の章に記載した権限を持っていない場合は全体管理者画面のTOP画面にリダイレクトする。 URL文字列から入力された企業番号文字列とユーザー番号：クライアント企業管理者文字列を取得し、いずれかが自然数に変換できない場合、レスポンスステータス404 not foundを出力して処理を終了する。 企業番号文字列とユーザー番号：クライアント企業管理者文字列を元にデータベースから 【FIX】クライアント企業管理者 【FIX】クライアント企業管理者-企業紐付け を取得する。対象のクライアント企業管理者のデータが存在しない場合、レスポンスステータス404 not foundを出力して処理を終了する。 対象のクライアント企業管理者のデータが存在したら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704184355/133+FIX#4.3.-%E5%87%BA%E5%8A%9B の記載の通り、値に適切な変換処理を行ったのちに画面を出力し処理を終了する。 4.5. エラー処理 上記以外で発生した例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 詳細画面を表示した場合に下記フォーマットでログを出力する User {全体管理者のユーザー番号} read company_user detail. company_number={企業番号} user_number ={ユーザー番号：クライアント企業管理者} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 なし",
  "parentId": "704544810",
  "parentTitle": "130_【FIX】企業担当者管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704184355/133_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-09-19T04:43:04.565Z",
  "author": "ejiri_yusuke",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】クライアント企業管理者 【FIX】クライアント企業管理者-企業紐付け の登録済みのデータ1件を閲覧するための機能です。 3. 要求事項 管理画面にログインすることができるシステム管理者、塾講師ステーション管理者、ゲスト管理者のみが利用することができる。 本機能は 【FIX】クライアント企業管理者 【FIX】クライアント企業管理者-企業紐付け に記載の全て..."
}