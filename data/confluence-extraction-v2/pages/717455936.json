{
  "id": "717455936",
  "title": "103_【FIX】商品詳細閲覧機能",
  "content": "1. 目次 2. 概要 本機能は 【FIX】商品マスタ（統合版） の登録済みのデータ1件を閲覧するための機能です。 3. 要求事項 管理画面にログインすることができるシステム管理者、塾ステーション管理者のみが利用することができる。 本機能は 【FIX】商品マスタ（統合版） に記載の全ての項目について、1URL=1レコードで保存された値を表示して閲覧することができる。以下「本ページ」と記載する。 本ページには、以下を表示する 本ページの「要件定義」-「出力」欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/717455936#4.3.-%E5%87%BA%E5%8A%9B ）で出力先として「画面」が定義されている項目 ただし、値がNULLの項目は、該当項目欄自体を表示しない。 編集ボタン 存在しない商品が指定された場合は対象URLのページが存在しないように振る舞う。 編集ボタンを押下することで https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704381391 に遷移することができる。 3.1. 権限 システム管理者、塾ステーション管理者のみ 3.2. 帳票 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704676285 の記載と同じ 3.3. メールテンプレート なし 3.4. ワークフロー https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704676285 の記載と同じ 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 商品詳細閲覧画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=1834%3A31465&amp;t=D8l394sON9r4knNS-1 4.2. 入力 変数名、説明、バリデーションは、 【FIX】商品マスタ（統合版） の記載を前提とし、本ページに固有の特記事項のみ記載する。 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704676285 に記載の共通入力・取得項目は項目自体を省略する。 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 商品番号 URLパラメータ 【FIX】商品マスタ（統合版） 記載の一意の数値をURL文字列から取得する 入力がない、または、自然数ではない、またはデータベースに存在しない場合 エラーメッセージは出力せずレスポンスステータスを404 not foundとする 4.3. 出力 説明は、 【FIX】商品マスタ（統合版） の記載を前提とし、本ページに固有の特記事項のみ記載する。 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704676285 に記載の共通出力項目は項目自体を省略する。 出力項目 出力先 説明 1 商品番号 画面 HTMLエスケープ処理をして出力する。 2 商品ID 画面 HTMLエスケープ処理をして出力する。 3 表示名称 画面 HTMLエスケープ処理をして出力する。 4 単価 画面 HTMLエスケープ処理をし、文頭に「&yen;」をつけた上で、3桁カンマ区切りにして出力する。例） &yen;1,000,000 5 税区分 画面 保存された値が指し示す選択肢のラベルを出力する。 6 税率 画面 HTMLエスケープ処理をし、末尾に「%」を付与して出力する。 7 課税後単価 画面 単価、税区分、税率に応じて画面上で自動計算して、 文頭に「&yen;」をつけた上で、3桁カンマ区切りにして出力する。例） &yen;1,000,000 8 単位 画面 HTMLエスケープ処理をして出力する。 9 商品種別 画面 保存された値が指し示す選択肢のラベルを出力する。 10 課金形態種別 画面 保存された値が指し示す選択肢のラベルを出力する。 11 オプション種別 画面 保存された値が指し示す選択肢のラベルを出力する。 12 採用課金：雇用形態 画面 保存された値が指し示す選択肢のラベルを出力する。 13 採用課金：確定時期 画面 保存された値が指し示す選択肢のラベルを出力する。 14 請求タイミング 画面 保存された値が指し示す選択肢のラベルを出力する。 15 有効期間：有無フラグ 画面 保存された値が指し示す選択肢のチェックボックスにチェックを付与する。 16 有効期間：月数 画面 HTMLエスケープ処理をして出力する。 17 契約可能月 画面 保存された複数の値が指し示す選択肢のラベルを全て出力する。 18 対象サイト 画面 保存された値が指し示す選択肢のラベルを出力する。 19 付与プラン 画面 保存された値が指し示す選択肢のラベルを出力する。 20 急募追加数 画面 HTMLエスケープ処理をし、文頭に3桁カンマ区切りにして出力する。例） 1,000,000 21 パーソナルオファー追加数 画面 HTMLエスケープ処理をし、文頭に3桁カンマ区切りにして出力する。例） 1,000,000 22 購入可フラグ 画面 保存された値が指し示す選択肢のチェックボックスにチェックを付与する。 23 公開フラグ 画面 保存された値が指し示す選択肢のチェックボックスにチェックを付与する。 24 商品詳細1 画面 HTMLエスケープ処理をして出力する。 25 商品詳細2 画面 HTMLエスケープ処理をして出力する。 26 商品詳細3 画面 HTMLエスケープ処理をして出力する。 27 商品詳細4 画面 HTMLエスケープ処理をして出力する。 28 前任商品 画面 本レコードを後継商品として紐づけている商品の情報を、HTMLエスケープ処理をして出力する。 29 後継商品 画面 HTMLエスケープ処理をして出力する。 30 メモ 画面 入力された改行を維持したまま表示されるように HTMLエスケープ処理をして出力する。 31 作成者 画面 保存された管理者IDが示すユーザーの名前を表示する。 32 作成日時 画面 YYYY/mm/dd H:i:s形式の文字列で出力する。 33 最終更新者 画面 保存された管理者IDが示すユーザーの名前を表示する。 34 最終更新日時 画面 YYYY/mm/dd H:i:s形式の文字列で出力する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合は全体管理者画面のログイン画面にリダイレクトし、ログイン認証されているが権限の章に記載した権限を持っていない場合は全体管理者画面のTOP画面にリダイレクトする。 URL文字列から入力された商品番号文字列を取得し、商品番号文字列が自然数に変換できない場合、レスポンスステータス404 not foundを出力して処理を終了する。 商品番号文字列を元にデータベースから 【FIX】商品マスタ（統合版） を取得する。対象の商品番号のデータが存在しない場合、レスポンスステータス404 not foundを出力して処理を終了する。 対象の商品データが存在したら、 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/717455936#%E5%87%BA%E5%8A%9B の記載の通り、値に適切な変換処理を行ったのちに画面を出力し処理を終了する。 4.5. エラー処理 上記以外で発生した例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 詳細画面を表示した場合に下記フォーマットでログを出力する User {全体管理者のユーザー番号} read service detail. service_number={商品番号} service_id={商品ID} service_name={表示名称} {URI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. 制限事項 なし",
  "parentId": "704676285",
  "parentTitle": "100_【FIX】商品管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/717455936/103_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2024-10-01T00:11:17.929Z",
  "author": "ejiri_yusuke",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】商品マスタ（統合版） の登録済みのデータ1件を閲覧するための機能です。 3. 要求事項 管理画面にログインすることができるシステム管理者、塾ステーション管理者のみが利用することができる。 本機能は 【FIX】商品マスタ（統合版） に記載の全ての項目について、1URL=1レコードで保存された値を表示して閲覧することができる。以下「本ページ」と記載する。 本..."
}