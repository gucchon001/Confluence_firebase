{
  "id": "719061007",
  "title": "504_【FIX】教室編集機能",
  "content": "1. 目次 2. 概要 本機能は 【FIX】教室：基本情報／所在地 、 【FIX】教室：応募情報転送連絡先／応募後連絡先電話番号 、 【FIX】教室：塾チャート 、 【FIX】教室：ロゴ・スライド画像 のデータを編集をするための機能です。 3. 要求事項 クライアント企業管理画面にログインすることができるクライアント企業管理者が、概要の帳票を編集することができる。 ただし自身の企業に紐づかない教室は編集できない。 登録されている 【FIX】教室：基本情報／所在地 、 【FIX】教室：応募情報転送連絡先／応募後連絡先電話番号 、 【FIX】教室：塾チャート 、 【FIX】教室：ロゴ・スライド画像 1件の登録済み情報を閲覧し、本ページの「要件定義」-「入力」欄で入力元が「入力フォーム」と定義されている項目を編集することができる。 画面上には以下の項目を表示する 「基本情報／所在地」「応募情報転送先／応募後連絡先」「塾チャート」「ロゴ・スライド画像」タブ 各タブ内には下記を表示する。 本ページの「要件定義」-「入力」欄で入力元が「入力フォーム」と定義されている項目の、保存された項目値が反映された入力フォーム 本ページの「要件定義」-「出力」欄で出力先として「画面」が定義されている項目の名称と保存された項目値 「更新する」ボタン 押下すると、入力項目に問題なければ、データベースにレコードを保存し、保存したことが登録者に分かるメッセージを表示する。 保存が完了したら エリア平均給与算出共通処理 を実行する。 入力内容に問題がある場合は、同入力フォームページのフォームに入力された値を表示した状態で、どの入力項目に問題があるか分かるようにエラーメッセージを表示する。 表示中のタブ以外のタブを押下することで、編集ページを切り替えられる。 切り替え時は、元のページの編集情報で保存されていないものは破棄する旨の確認メッセージを表示し、タブ切り替え実行ボタンを押下すると、編集情報を破棄してタブを切り替えるものとする。キャンセルを選択した場合は、編集情報は保持した元のタブへ戻るものとする。 タブごとに別のURLが割り当てられる。 「塾チャート」にて同一データが重複して登録されている場合、「updated_at」が最も新しいレコードのみを取得および更新の対象とする。 「キャンセル」ボタン 押下することで入力内容を取り消し、 501_【FIX】教室一覧閲覧機能 に遷移する。 「求人」ボタン 押下すると 511_【FIX】教室管理-求人一覧閲覧機能 に遷移する。 「画像」タブの画面上には以下の項目を表示する。 タブ表示する項目は以下とする ロゴ・スライドイメージ その他 各項目内に表示されている「画像」フォームを押下することで、デバイス上の画像ファイルを選択することができる。 画像をドラッグ&amp;ドロップで追加することもできる。 選択項目に問題なければ、画像データをアップロードして、表内に画像を表示する。 画像変更時は、再度「画像」フォームを押下するかドラッグ&amp;ドロップして設定する必要がある。 「画像」フォーム右上の削除ボタンを押下すると、画像データを削除することができる。 編集登録で成功または失敗した場合、以下の情報が入ったログを出力する。 日時、管理者ID、アクセス元IPアドレス、ユーザーエージェント、アクション（成功or失敗） 3.1. 権限 クライアント企業管理画面にログインすることができるクライアント企業管理者 3.2. 帳票 【FIX】教室：基本情報／所在地 【FIX】教室：応募情報転送連絡先／応募後連絡先電話番号 【FIX】教室：塾チャート 【FIX】教室：ロゴ・スライド画像 3.3. メールテンプレート なし 3.4. ワークフロー 【FIX】教室登録・公開・削除フロー 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 基本情報／所在地タブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-51668&amp;mode=design&amp;t=mPAfrvXEMqvqYjjI-4 4.1.2. 応募情報転送先／応募後連絡先タブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-51741&amp;mode=design&amp;t=LGwLOUnx5HmCYa4O-0 4.1.3. 塾チャートタブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-51845&amp;mode=design&amp;t=LGwLOUnx5HmCYa4O-0 4.1.4. 画像タブ https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-51779&amp;mode=design&amp;t=LGwLOUnx5HmCYa4O-0 4.1.5. タブ遷移確認画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-52207&amp;mode=design&amp;t=LGwLOUnx5HmCYa4O-0 4.1.6. 更新完了画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=59841-51879&amp;mode=design&amp;t=LGwLOUnx5HmCYa4O-0 4.2. 入力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 4.2.1. 「基本情報／所在地」タブ 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 教室名 入力フォーム 初期状態 データベースから読み込んだ値 必須 2 教室名カナ 入力フォーム 初期状態 データベースから読み込んだ値 必須 3 ホームページ 入力フォーム 初期状態 データベースから読み込んだ値 4 勤務地 入力フォーム 初期状態 データベースから読み込んだ値 5 勤務地補足 入力フォーム 初期状態 データベースから読み込んだ値 6 郵便番号 入力フォーム 初期状態 データベースから読み込んだ値 必須 7 都道府県 入力フォーム 初期状態 データベースから読み込んだ値 必須 8 市区町村 入力フォーム 初期状態 データベースから読み込んだ値 必須 9 その他住所 入力フォーム 初期状態 データベースから読み込んだ値 必須 10 緯度経度 入力フォーム 初期状態 データベースから読み込んだ値 初期状態 データベースから読み込まず、「地図情報の取得」ボタンを押下後にデータベースから値を取得する 入力仕様は 502_【FIX】教室新規登録機能 と同じ。 11 最寄り駅名：最寄り駅1：駅名 入力フォーム 初期状態 データベースから読み込んだ値 12 最寄り駅名：最寄り駅1：移動手段 入力フォーム 初期状態 データベースから読み込んだ値 13 最寄り駅名：最寄り駅1：所要時間 入力フォーム 初期状態 データベースから読み込んだ値 14 最寄り駅名：最寄り駅2：駅名 入力フォーム 初期状態 データベースから読み込んだ値 15 最寄り駅名：最寄り駅2：移動手段 入力フォーム 初期状態 データベースから読み込んだ値 16 最寄り駅名：最寄り駅2：所要時間 入力フォーム 初期状態 データベースから読み込んだ値 17 最寄り駅名：最寄り駅3：駅名 入力フォーム 初期状態 データベースから読み込んだ値 18 最寄り駅名：最寄り駅3：移動手段 入力フォーム 初期状態 データベースから読み込んだ値 19 最寄り駅名：最寄り駅3：所要時間 入力フォーム 初期状態 データベースから読み込んだ値 20 最寄り駅候補 入力フォーム 入力仕様は 502_【FIX】教室新規登録機能 と同じ。 21 アクセス方法 入力フォーム 初期状態 データベースから読み込んだ値 4.2.2. 「応募情報転送先／応募後連絡先」タブ 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 応募後連絡先メールアドレス1 入力フォーム 初期状態 データベースから読み込んだ値 必須（No.1〜No.3は、最低一つ以上は登録する必要がある） 2 応募後連絡先メールアドレス2 入力フォーム 初期状態 データベースから読み込んだ値 3 応募後連絡先メールアドレス3 入力フォーム 初期状態 データベースから読み込んだ値 4 応募後連絡先電話番号 入力フォーム 初期状態 データベースから読み込んだ値 必須 5 電話受付時間：開始 入力フォーム 初期状態 データベースから読み込んだ値 6 電話受付時間：終了 入力フォーム 初期状態 データベースから読み込んだ値 7 電話受付時間（補足説明） 入力フォーム 初期状態 データベースから読み込んだ値 4.2.3. 「塾チャート」タブ 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 塾規模：評価の数字 入力フォーム 初期状態 データベースから読み込んだ値 必須 2 塾規模：コメント 入力フォーム 初期状態 データベースから読み込んだ値 必須 3 服装・髪型：評価の数字 入力フォーム 初期状態 データベースから読み込んだ値 必須 4 服装・髪型：コメント 入力フォーム 初期状態 データベースから読み込んだ値 必須 5 未経験者歓迎：評価の数字 入力フォーム 初期状態 データベースから読み込んだ値 必須 6 未経験者歓迎：コメント 入力フォーム 初期状態 データベースから読み込んだ値 必須 7 補習・受験：評価の数字 入力フォーム 初期状態 データベースから読み込んだ値 必須 8 補習・受験：コメント 入力フォーム 初期状態 データベースから読み込んだ値 必須 9 生徒学年比率：評価の数字 入力フォーム 初期状態 データベースから読み込んだ値 必須 10 生徒学年比率：コメント 入力フォーム 初期状態 データベースから読み込んだ値 必須 4.2.4. 「画像」タブ 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 ロゴ画像：画像 入力フォーム 初期状態 データベースから読み込んだ値 必須 2 スライドイメージ（1）：画像 入力フォーム 初期状態 データベースから読み込んだ値 必須 3 スライドイメージ（1）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 必須 4 スライドイメージ（2）：画像 入力フォーム 初期状態 データベースから読み込んだ値 5 スライドイメージ（2）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 6 スライドイメージ（3）：画像 入力フォーム 初期状態 データベースから読み込んだ値 7 スライドイメージ（3）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 8 スライドイメージ（4）：画像 入力フォーム 初期状態 データベースから読み込んだ値 9 スライドイメージ（4）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 10 スライドイメージ（5）：画像 入力フォーム 初期状態 データベースから読み込んだ値 11 スライドイメージ（5）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 12 その他画像（1）：画像 入力フォーム 初期状態 データベースから読み込んだ値 13 その他画像（1）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 14 その他画像（2）：画像 入力フォーム 初期状態 データベースから読み込んだ値 15 その他画像（2）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 16 その他画像（3）：画像 入力フォーム 初期状態 データベースから読み込んだ値 17 その他画像（3）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 18 その他画像（4）：画像 入力フォーム 初期状態 データベースから読み込んだ値 19 その他画像（4）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 20 その他画像（5）：画像 入力フォーム 初期状態 データベースから読み込んだ値 21 その他画像（5）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 22 その他画像（6）：画像 入力フォーム 初期状態 データベースから読み込んだ値 23 その他画像（6）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 24 その他画像（7）：画像 入力フォーム 初期状態 データベースから読み込んだ値 25 その他画像（7）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 26 その他画像（8）：画像 入力フォーム 初期状態 データベースから読み込んだ値 27 その他画像（8）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 28 その他画像（9）：画像 入力フォーム 初期状態 データベースから読み込んだ値 29 その他画像（9）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 30 その他画像（10）：画像 入力フォーム 初期状態 データベースから読み込んだ値 31 その他画像（10）：説明文 入力フォーム 初期状態 データベースから読み込んだ値 4.3. 出力 説明は、帳票の各ページの記載を前提とし、本ページに固有の特記事項のみ記載する。 4.3.1. 共通項目 出力項目 出力先 説明 1 教室グループ名 画面 保存された値が指し示す選択肢のラベルを出力する。 2 教室名 画面 HTMLエスケープ処理をして出力する。 3 対象サイト 画面 保存された値が指し示す選択肢のラベルを出力する。 4.3.2. 「基本情報／所在地」タブ 出力項目 出力先 説明 1 教室名 データベース/画面 HTMLエスケープ処理をして出力する。 2 教室名カナ データベース/画面 HTMLエスケープ処理をして出力する。 3 教室プラン 画面 HTMLエスケープ処理をして出力する。 4 ホームページ データベース/画面 HTMLエスケープ処理をして出力する。 5 勤務地 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 6 勤務地補足 データベース/画面 HTMLエスケープ処理をして出力する。 7 郵便番号 データベース/画面 HTMLエスケープ処理をして出力する。 8 都道府県 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 9 市区町村 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 10 その他住所 データベース/画面 HTMLエスケープ処理をして出力する。 11 緯度経度 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 「地図情報の取得」ボタン押下後に取得した値を出力する。 12 最寄り駅名：最寄り駅1：駅名 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 13 最寄り駅名：最寄り駅1：駅グループコード データベース 「最寄り駅名：最寄り駅1：駅名」に対応する駅グループコードをデータベースに保存する。 14 最寄り駅名：最寄り駅1：移動手段 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 15 最寄り駅名：最寄り駅1：所要 時間 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 16 最寄り駅名：最寄り駅2：駅名 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 17 最寄り駅名：最寄り駅2：駅グループコード データベース 「最寄り駅名：最寄り駅2：駅名」に対応する駅グループコードをデータベースに保存する。 18 最寄り駅名：最寄り駅2：移動手段 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 19 最寄り駅名：最寄り駅2：所要時間 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 20 最寄り駅名：最寄り駅3：駅名 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 21 最寄り駅名：最寄り駅3：駅グループコード データベース 「最寄り駅名：最寄り駅3：駅名」に対応する駅グループコードをデータベースに保存する。 22 最寄り駅名：最寄り駅3：移動手段 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 23 最寄り駅名：最寄り駅3：所要時間 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 24 最寄り駅候補 画面 保存された住所に応じた情報を出力する。 仕様は 502_【FIX】教室新規登録機能 と同じ。 25 アクセス方法 データベース/画面 HTMLエスケープ処理をして出力する。 4.3.3. 「応募情報転送先／応募後連絡先」タブ 出力項目 出力先 説明 1 応募後連絡先メールアドレス1 データベース/画面 HTMLエスケープ処理をして出力する。 2 応募後連絡先メールアドレス2 データベース/画面 HTMLエスケープ処理をして出力する。 3 応募後連絡先メールアドレス3 データベース/画面 HTMLエスケープ処理をして出力する。 4 応募後連絡先電話番号 データベース/画面 HTMLエスケープ処理をして出力する。 5 電話受付時間：開始 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 6 電話受付時間：終了 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 7 電話受付時間（補足説明） データベース/画面 HTMLエスケープ処理をして出力する。 4.3.4. 「塾チャート」タブ 出力項目 出力先 説明 1 塾規模：評価の数字 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 2 塾規模：コメント データベース/画面 HTMLエスケープ処理をして出力する。 3 服装・髪型：評価の数字 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 4 服装・髪型：コメント データベース/画面 HTMLエスケープ処理をして出力する。 5 未経験者歓迎：評価の数字 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 6 未経験者歓迎：コメント データベース/画面 HTMLエスケープ処理をして出力する。 7 補習・受験：評価の数字 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 8 補習・受験：コメント データベース/画面 HTMLエスケープ処理をして出力する。 9 生徒学年比率：評価の数字 データベース/画面 保存された値が指し示す選択肢のラベルを出力する。 10 生徒学年比率：コメント データベース/画面 HTMLエスケープ処理をして出力する。 4.3.5. 「画像」タブ 各AItは、「登録すべき画像の項目名」＋「教室名」をデフォルトの入力内容とする。例えば例えば教室名が「テストグループテスト教室」で登録すべき画像が「スライドイメージ1」の場合は、間に半角スペースを入れて「スライドイメージ1 テストグループテスト教室」とする。帳票では25文字までと定義しているので、前方25文字までを登録する。 出力項目 出力先 説明 1 ロゴ：画像 データベース/画面 保存された画像データを出力する。 2 ロゴ：ALT データベース HTMLエスケープ処理をして出力する。 3 スライドイメージ（1）：画像 データベース/画面 保存された画像データを出力する。 4 スライドイメージ（1）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 5 スライドイメージ（1）：ALT データベース HTMLエスケープ処理をして出力する。 6 スライドイメージ（2）：画像 データベース/画面 保存された画像データを出力する。 7 スライドイメージ（2）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 8 スライドイメージ（2）：ALT データベース HTMLエスケープ処理をして出力する。 9 スライドイメージ（3）：画像 データベース/画面 保存された画像データを出力する。 10 スライドイメージ（3）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 11 スライドイメージ（3）：ALT データベース HTMLエスケープ処理をして出力する。 12 スライドイメージ（4）：画像 データベース/画面 保存された画像データを出力する。 13 スライドイメージ（4）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 14 スライドイメージ（4）：ALT データベース HTMLエスケープ処理をして出力する。 15 スライドイメージ（5）：画像 データベース/画面 保存された画像データを出力する。 16 スライドイメージ（5）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 17 スライドイメージ（5）：ALT データベース HTMLエスケープ処理をして出力する。 18 その他画像（1）：画像 データベース/画面 保存された画像データを出力する。 19 その他画像（1）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 20 その他画像（1）：ALT データベース HTMLエスケープ処理をして出力する。 21 その他画像（2）：画像 データベース/画面 保存された画像データを出力する。 22 その他画像（2）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 23 その他画像（2）：ALT データベース HTMLエスケープ処理をして出力する。 24 その他画像（3）：画像 データベース/画面 保存された画像データを出力する。 25 その他画像（3）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 26 その他画像（3）：ALT データベース HTMLエスケープ処理をして出力する。 27 その他画像（4）：画像 データベース/画面 保存された画像データを出力する。 28 その他画像（4）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 29 その他画像（4）：ALT データベース HTMLエスケープ処理をして出力する。 30 その他画像（5）：画像 データベース/画面 保存された画像データを出力する。 31 その他画像（5）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 32 その他画像（5）：ALT データベース HTMLエスケープ処理をして出力する。 33 その他画像（6）：画像 データベース/画面 保存された画像データを出力する。 34 その他画像（6）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 35 その他画像（6）：ALT データベース HTMLエスケープ処理をして出力する。 36 その他画像（7）：画像 データベース/画面 保存された画像データを出力する。 37 その他画像（7）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 38 その他画像（7）：ALT データベース HTMLエスケープ処理をして出力する。 39 その他画像（8）：画像 データベース/画面 保存された画像データを出力する。 40 その他画像（8）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 41 その他画像（8）：ALT データベース HTMLエスケープ処理をして出力する。 42 その他画像（9）：画像 データベース/画面 保存された画像データを出力する。 43 その他画像（9）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 44 その他画像（9）：ALT データベース HTMLエスケープ処理をして出力する。 45 その他画像（10）：画像 データベース/画面 保存された画像データを出力する。 46 その他画像（10）：説明文 データベース/画面 HTMLエスケープ処理をして出力する。 47 その他画像（10）：ALT データベース HTMLエスケープ処理をして出力する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合はクライアント企業管理者画面のログイン画面にリダイレクトする。 URL文字列または隠しフォーム入力から教室番号を取得し、入力がない場合/自然数ではない場合はレスポンスステータス404 not foundを出力して処理を終了する。 指定された教室番号でデータベースから該当するレコードを抽出する。 該当するレコードがデータベース上に存在しない場合はレスポンスステータス404 not foundを出力して処理を終了する。 複数タブで値が入力がされていた場合でも、更新するボタンを押下したタブの入力項目のみ更新する。 4.4.1. 編集フォーム画面表示処理 該当するレコードが見つかったら、「出力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719061007/504_+FIX#4.3.-%E5%87%BA%E5%8A%9B ） に記載の通り、表示項目と入力可能項目に項目値を反映させて画面を出力し処理を終了する。 4.4.2. 編集処理 (基本情報／所在地) 該当するレコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719061007/504_+FIX#4.2.1.-%E3%80%8C%E5%9F%BA%E6%9C%AC%E6%83%85%E5%A0%B1%EF%BC%8F%E6%89%80%E5%9C%A8%E5%9C%B0%E3%80%8D%E3%82%BF%E3%83%96 ） に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっているクライアント企業管理者のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 4.4.3. 編集処理 (応募後連絡先) 該当するレコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719061007/504_+FIX#4.2.2.-%E3%80%8C%E5%BF%9C%E5%8B%9F%E6%83%85%E5%A0%B1%E8%BB%A2%E9%80%81%E5%85%88%EF%BC%8F%E5%BF%9C%E5%8B%9F%E5%BE%8C%E9%80%A3%E7%B5%A1%E5%85%88%E3%80%8D%E3%82%BF%E3%83%96 ） に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっているクライアント企業管理者のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 4.4.4. 編集処理 (塾チャート) 該当するレコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719061007/504_+FIX#4.2.3.-%E3%80%8C%E5%A1%BE%E3%83%81%E3%83%A3%E3%83%BC%E3%83%88%E3%80%8D%E3%82%BF%E3%83%96 ） に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっているクライアント企業管理者のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 4.4.5. 編集処理 (画像) 該当するレコードが見つかったら、「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/719061007/504_+FIX#4.2.4.-%E3%80%8C%E7%94%BB%E5%83%8F%E3%80%8D%E3%82%BF%E3%83%96 ） に記載の入力項目値の妥当性検査を行う。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で編集フォーム画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、更新日時を操作している現在時刻とし、操作を行なっているクライアント企業管理者のユーザー番号を更新者に設定した上でデータベースの該当レコードを更新する。 4.5. エラー処理 上記以外で発生したエラー/例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 編集画面に遷移した場合に下記フォーマットでログを出力する User {クライアント企業管理者のユーザー番号} started to update classroom. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 編集処理を実行した場合に下記フォーマットでログを出力する 基本情報／所在地 成功の場合 User {クライアント企業管理者のユーザー番号} updated classroom basic informations. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {クライアント企業管理者のユーザー番号} failed to update classroom basic informations. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 応募後連絡先 成功の場合 User {クライアント企業管理者のユーザー番号} updated classroom application contacts. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {クライアント企業管理者のユーザー番号} failed to update classroom application contacts. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 塾チャート 成功の場合 User {クライアント企業管理者のユーザー番号} updated classroom self rating informations. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {クライアント企業管理者のユーザー番号} failed to update classroom self rating informations. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 画像 成功の場合 User {クライアント企業管理者のユーザー番号} updated classroom images. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗の場合 User {クライアント企業管理者のユーザー番号} failed to update classroom images. classroom_number={教室番号} company_number={企業番号} brand_number={教室グループ番号} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 同時編集に対する明示的な対策は施さない。 同時に編集が実行された際は後勝ちとし、後から保存ボタンを押して実行した時の編集値が適用される。 編集画面において他のユーザーまたは他のウィンドウ・タブが本機能にアクセスしたことをアプリケーションは検知しない。",
  "parentId": "704184702",
  "parentTitle": "500_■教室管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/719061007/504_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2025-09-18T09:37:41.437Z",
  "author": "isamu saito",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】教室：基本情報／所在地 、 【FIX】教室：応募情報転送連絡先／応募後連絡先電話番号 、 【FIX】教室：塾チャート 、 【FIX】教室：ロゴ・スライド画像 のデータを編集をするための機能です。 3. 要求事項 クライアント企業管理画面にログインすることができるクライアント企業管理者が、概要の帳票を編集することができる。 ただし自身の企業に紐づかない教室..."
}