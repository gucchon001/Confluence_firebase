{
  "id": "704381028",
  "title": "152_【FIX】教室グループ新規作成機能",
  "content": "1. 目次 2. 概要 本機能は 【FIX】教室グループ のデータを新規で登録するための機能です。 3. 要求事項 全体管理画面にログインすることができるシステム管理者、塾講師ステーション管理者、ゲスト管理者が、 【FIX】教室グループ を新規登録することができる。 ギフト券担当者、記事担当者は 【FIX】教室グループ を新規登録する ことができない。 新規登録にあたって入力フォームに表示し入力可能とする項目は下記とする。 本ページの「要件定義」-「入力」欄（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704381028#4.2.-%E5%85%A5%E5%8A%9B ）で入力元が「入力フォーム」と定義されている項目 「キャンセル」ボタン 押下することで入力内容を取り消し、 153_【FIX】教室グループ詳細閲覧機能 に遷移する。 「登録する」ボタン 押下するとデータベースにレコードを保存し、 153_【FIX】教室グループ詳細閲覧機能 に遷移して、保存したことが分かるメッセージを表示する。 入力内容に問題がある場合は、同入力フォームページのフォームに入力された値を表示した状態で、どの入力項目に問題があるか分かるようにエラーメッセージを表示する。 新規登録で成功または失敗した場合、以下の情報が入ったログを出力する。 日時、全体管理者のユーザー番号、アクセス元IPアドレス、ユーザーエージェント、アクション（成功or失敗） 3.1. 権限 150_【FIX】教室グループ管理機能 3.2. 帳票 150_【FIX】教室グループ管理機能 3.3. メールテンプレート なし 3.4. ワークフロー 3.4.1. 本機能 本機能の利用シーンを示しているワークフローへのリンクです 3.4.2. 関連 【FIX】教室登録・公開・削除フロー 4. 要件定義 4.1. ユーザーインターフェース（画面） 4.1.1. 新規登録画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=2078-32270&amp;mode=design&amp;t=UcPKicOqscjBXGK7-4 4.1.2. 新規登録完了画面 https://www.figma.com/file/8zITZViFoU0WYNnwig5AKc/%E3%80%90%E5%85%B1%E6%9C%89%E3%80%91%E3%83%88%E3%83%A2%E3%83%8E%E3%82%AB%E3%82%A4%E6%A7%98_%E5%A1%BE?type=design&amp;node-id=2489-34654&amp;mode=design&amp;t=NjxhWWuTHzNsiC94-0 4.2. 入力 変数名、説明、バリデーションは、 【FIX】教室グループ の記載を前提とし、本ページに固有の特記事項のみ記載する。 150_【FIX】教室グループ管理機能 に記載の共通入力・取得項目は項目自体を省略する。 「制限」に「必須」とある場合に入力がない場合のエラーメッセージは統一して「{項目名}を入力してください」とする。 項目名 変数名 入力元 説明 制限とエラーメッセージ 1 教室グループ名 入力フォーム 初期値なし 必須 2 教室グループカナ名 入力フォーム 初期値なし 必須 3 紹介文 仕事内容 入力フォーム 初期値なし。 【FIX】教室グループ での「紹介文」を表示する。 4 画像 入力フォーム 初期値なし 5 管理用メモ 入力フォーム 初期値なし 6 SEO title 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 7 SEO description 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 8 SEO keywords 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 9 SEO h1 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 10 キャリア SEO title 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 11 キャリア SEO description 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 12 キャリア SEO keywords 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 13 キャリア SEO h1 入力フォーム 初期値なし 変数「__グループ名__」は、サービスサイト上で教室グループ名へ変換されて表示される。 14 質問1 入力フォーム 初期値なし 15 回答1 入力フォーム 初期値なし テキストエリアとする。 16 質問2 入力フォーム 初期値なし 17 回答2 入力フォーム 初期値なし テキストエリアとする。 18 質問3 入力フォーム 初期値なし 19 回答3 入力フォーム 初期値なし テキストエリアとする。 20 質問4 入力フォーム 初期値なし 21 回答4 入力フォーム 初期値なし テキストエリアとする。 22 質問5 入力フォーム 初期値なし 23 回答5 入力フォーム 初期値なし テキストエリアとする。 4.3. 出力 出力項目 出力先 説明 1 教室グループ名 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 2 教室グループカナ名 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 3 紹介文 仕事内容 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をして 【FIX】教室グループ の「紹介文」として データベースに保存する。 4 画像 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内に出力、エラーがない場合はデータベースに保存する。 5 管理用メモ データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 6 SEO title データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 7 SEO description データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 8 SEO keywords データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 9 SEO h1 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 10 キャリア SEO title データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 11 キャリア SEO description データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 12 キャリア SEO keywords データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 13 キャリア SEO h1 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 14 質問1 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 15 回答1 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 16 質問2 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 17 回答2 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 18 質問3 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 19 回答3 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 20 質問4 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 21 回答4 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 22 質問5 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 23 回答5 データベース/画面 入力妥当性検査によるエラー発生時は画面の対象フォーム内にHTMLエスケープ処理をして出力、エラーがない場合はSQLインジェクション対策をしてデータベースに保存する。 4.4. 処理 ログイン状態を確認し、ログイン認証されていない場合は全体管理者画面のログイン画面にリダイレクトし、ログイン認証されているが権限の章に記載した権限を持っていない場合は全体管理者画面のTOP画面にリダイレクトする。 4.4.1. 入力画面表示処理 本ページの「入力」（ https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/704381028#4.2.-%E5%85%A5%E5%8A%9B ）に記載の全ての項目の入力フォームと登録ボタンを配置した画面を表示する。 4.4.2. 新規登録処理 入力フォームからのデータを受け取り、「入力」の定義にしたがって値の妥当性検査をおこなう。 入力項目値の妥当性に問題があった場合は、どの項目にどのような問題が発生したかわかるようにエラーメッセージを表示し、入力された値を入力フォーム内に表示・選択された状態で画面を出力して処理を終了する。 入力項目値の妥当性に問題がない場合は、入力された項目値と、作成日時、更新日時を操作している現在時刻とし、操作を行なっている全体管理者のユーザー番号を作成者/更新者に設定した上でデータベースに新規レコードとして挿入する。 153_【FIX】教室グループ詳細閲覧機能 ページへリダイレクトし、新規データ登録が完了したことがわかるように以下のメッセージを表示する。 {教室グループID} {教室グループ名}の教室グループを新規登録しました。 4.5. エラー処理 上記以外で発生した例外に関してはフレームワークの例外処理に任せる。 4.6. ログ 新規登録画面を表示した場合に下記フォーマットでログを出力する。 User {全体管理者のユーザー番号} started to create brand . {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 新規登録処理を実行した場合に下記フォーマットでログを出力する。 成功した場合 User {全体管理者のユーザー番号} created brand . brand _number={教室グループ番号} brand _id={教室グループID} brand _name={教室グループ名} {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 失敗した場合 User {全体管理者のユーザー番号} failed to create brand . {アクセスURI} {日時} {アクセス元IPアドレス} {ユーザーエージェント} 5. スコープ外・制限事項 なし",
  "parentId": "704413785",
  "parentTitle": "150_【FIX】教室グループ管理機能",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/704381028/152_+FIX",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-10-10T09:00:44.992Z",
  "author": "元ユーザー (Deleted)",
  "excerpt": "1. 目次 2. 概要 本機能は 【FIX】教室グループ のデータを新規で登録するための機能です。 3. 要求事項 全体管理画面にログインすることができるシステム管理者、塾講師ステーション管理者、ゲスト管理者が、 【FIX】教室グループ を新規登録することができる。 ギフト券担当者、記事担当者は 【FIX】教室グループ を新規登録する ことができない。 新規登録にあたって入力フォームに表示し入力可..."
}