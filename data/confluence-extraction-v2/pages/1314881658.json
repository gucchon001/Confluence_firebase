{
  "id": "1314881658",
  "title": "2024-12-18 ミーティング議事録",
  "content": "&nbsp;日付 &nbsp;参加者 トモノカイ：池田様( )、片岡様（ ）、原口様 GIG： 資料 スケジュール タスク管理（Jira） &nbsp;議題 項目 プレゼンター メモ 前回のネクストアクションの確認 16 16 incomplete indeed対応に関して、feedforce社と仕様や対応（CSV,JSON）予定などを確認し、実施有無・方針を決める。 17 17 incomplete feedforce社連携ありの場合、見積もりのために仕様書をGIGへ共有する。 18 18 complete Amazonギフト券の報告書作成のタスクのチケット化 19 19 complete データレイヤーの追加改修のチケット化 20 20 complete LPをサイトの依頼のチケット化 進捗確認 dev環境で弊社確認中のチケット：工数管理表で緑色の背景になっているチケット 今週木曜日に反映予定のチケット CTJ-4689 0f376871-0459-35fc-b139-2a34c915ec22 System Jira CTJ-4692 0f376871-0459-35fc-b139-2a34c915ec22 System Jira CTJ-4071 0f376871-0459-35fc-b139-2a34c915ec22 System Jira そのほか indeedエントリーの対応について（トモノカイ池田） 結論、今期は対応しないことで意思決定しました。 理由としては、現時点でindeed側の仕様とフィードフォース社側の仕様が不確定要素が多く、開発のコストが想定よりも増加する可能性が高く、スケジュール的に見ても間に合わない可能性が高いためです。 今後、上記の不確定要素が改善された場合、対応を検討する可能性はまだありますが、今年度においては対応なしで大丈夫です。迅速な調査と回答をいただき、大変助かりました。ありがとうございます。 DB負荷軽減のための重いクエリの改善対応について（GIG小竹） 現状 先週金曜日に本番反映してが現在までにDB負荷の軽減は見られなかった。 先週金曜日に反映した箇所の採用確認の箇所のクエリは、改善されスロークエリには出ていなかったので以前より悪化していることはありません。 10:45頃にDBサーバの負荷が高まりDBサーバがダウン 先週金曜日に反映した内容 ページネーションの総件数を取得するために発行されるクエリが 上限なく全データ検索していたため特に負荷が高かった です。そのため、総件数取得のためのクエリにおいても 各ページごとの取得上限を適用するように改修 しました。 監視して新たにわかったこと 依然として、システム側で重いクエリが叩かれているが、トモノカイ様のviewerで叩かれているクエリも重いことを確認 今後の改善方針案 もし可能であればトモノカイ様のviewerで叩かれているクエリを停止いただく。その状況で1週間DB負荷を観察する。 &rarr;サイトの成果に直結するオファーの自動処理であるため、停止はできない。 10時に5つぐらい同時にオファー画面で送っている 同時に送っているものを30分おきに分散して実行もらう-&gt;金曜までに対応していただく（片岡さん） 分散させるのと並行でViewerのところのクエリの分割も検討事項 システム側で叩かれているクエリの改善を継続して行う オファーの箇所のクエリ自体は重いのでそこを改善をする （各種一覧ページで定義しているデータ取得上限を適切な値（必要な件数）に見直すことでさらにDBサーバ負荷軽減と表示するまでの時間を短縮すると考えております。）-&gt;こちらは上記の対応の上対応するか検討する予定です。 例えば、アドミンの採用確認一覧の最大件数は200000件で設定されていますが、これを10000件程度にするなどが考えられます。 Viewerで叩かれているクエリの1つ SELECT http://pof.id/ AS &quot;検索条件番号&quot;, pof.filter_name AS &quot;検索条件名&quot;, pof.company_id AS &quot;企業番号&quot;, com.company_name AS &quot;企業名&quot;, pr1.label AS &quot;都道府県&quot;, GROUP_CONCAT(DISTINCT http://c.name/ ORDER BY http://c.name/ SEPARATOR ', ') AS &quot;市区町村&quot;, pof.min_age AS &quot;年齢：最少年齢&quot;, pof.max_age AS &quot;年齢：最高年齢&quot;, CASE WHEN pof.gender = 1 THEN '男性' WHEN pof.gender = 2 THEN '女性' ELSE NULL END AS &quot;性別&quot;, CASE WHEN pof.humanities_and_sciences = 1 THEN '文系' WHEN pof.humanities_and_sciences = 2 THEN '理系' WHEN pof.humanities_and_sciences = 99 THEN 'その他' ELSE NULL END AS &quot;大学：文理&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt.occupation) WHEN '1' THEN '高校生（卒業見込み）' WHEN '2' THEN '大学生' WHEN '3' THEN '短大・専門学生' WHEN '4' THEN '大学院生' WHEN '5' THEN 'フリーター' WHEN '6' THEN '派遣社員' WHEN '7' THEN '契約社員' WHEN '8' THEN '正社員' WHEN '9' THEN '主婦・主夫' WHEN '10' THEN '無職' WHEN '11' THEN 'その他' END ORDER BY CAST(jt.occupation AS UNSIGNED) SEPARATOR ', ' ) AS &quot;現在の職業&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_school_year.school_year) WHEN '1' THEN '入学見込み' WHEN '2' THEN '学部1年生' WHEN '3' THEN '学部2年生' WHEN '4' THEN '学部3年生' WHEN '5' THEN '学部4年生' WHEN '6' THEN '学部5年生' WHEN '7' THEN '学部6年生' WHEN '8' THEN '修士1年生' WHEN '9' THEN '修士2年生' WHEN '10' THEN '博士1年生' WHEN '11' THEN '博士2年生' WHEN '12' THEN '博士3年生' WHEN '13' THEN '中退' WHEN '14' THEN '卒業' END ORDER BY CAST(JSON_UNQUOTE(jt_school_year.school_year) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;学年&quot;, CASE WHEN pof.entrance_exam_classification = 1 THEN '一般選抜（旧：一般入試）' WHEN pof.entrance_exam_classification = 2 THEN '学校推薦型選抜（旧：推薦入試）' WHEN pof.entrance_exam_classification = 3 THEN '総合型選抜（旧：AO入試）' WHEN pof.entrance_exam_classification = 4 THEN 'その他' ELSE NULL END AS &quot;学歴：大学情報：入試区分&quot;, pr2.label AS &quot;学歴：大学情報：所在地&quot;, pof.school_name AS &quot;学歴：大学情報：学校名&quot;, pof.faculty_name AS &quot;学歴：大学情報：所属学部&quot;, pof.department_name AS &quot;学歴：大学情報：所属学科&quot;, pof.high_school_exam AS &quot;その他：高校受験経験&quot;, pof.secondary_school_exam AS &quot;その他：中学受験経験&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_primary_subject.subject) WHEN '1' THEN '小学生-国語' WHEN '2' THEN '小学生-数学' WHEN '3' THEN '小学生-英語' WHEN '4' THEN '小学生-理科' WHEN '5' THEN '小学生-社会' END ORDER BY CAST(JSON_UNQUOTE(jt_primary_subject.subject) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;指導可能科目：小学生&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_secondary_subject.subject) WHEN '6' THEN '中学生-国語' WHEN '7' THEN '中学生-数学' WHEN '8' THEN '中学生-英語' WHEN '9' THEN '中学生-理科' WHEN '10' THEN '中学生-社会' END ORDER BY CAST(JSON_UNQUOTE(jt_secondary_subject.subject) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;指導可能科目：中学生&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_high_school_subject.subject) WHEN '11' THEN '高校生-古文・漢文' WHEN '12' THEN '高校生-現代文' WHEN '13' THEN '高校生-文系数学' WHEN '14' THEN '高校生-理系数学' WHEN '15' THEN '高校生-英語' WHEN '16' THEN '高校生-物理' WHEN '17' THEN '高校生-化学' WHEN '18' THEN '高校生-生物' WHEN '19' THEN '高校生-世界史' WHEN '20' THEN '高校生-日本史' WHEN '21' THEN '高校生-政治経済・公民' WHEN '22' THEN '高校生-地理' WHEN '23' THEN '高校生-小論文' END ORDER BY CAST(JSON_UNQUOTE(jt_high_school_subject.subject) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;指導可能科目：高校生&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_other_subject.subject) WHEN '24' THEN 'その他-英会話' WHEN '25' THEN 'その他-幼児指導' WHEN '26' THEN 'その他-プログラミング' END ORDER BY CAST(JSON_UNQUOTE(jt_other_subject.subject) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;指導可能科目：その他&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_guidance_level.level) WHEN '1' THEN '小学校受験' WHEN '2' THEN '中学受験' WHEN '3' THEN '高校受験' WHEN '4' THEN '大学受験' WHEN '5' THEN 'その他' END ORDER BY CAST(JSON_UNQUOTE(jt_guidance_level.level) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;指導経験：指導学年&quot;, CASE WHEN pof.guidance_years = 1 THEN '1年未満' WHEN pof.guidance_years = 2 THEN '1〜2年' WHEN pof.guidance_years = 3 THEN '3〜5年' WHEN pof.guidance_years = 4 THEN '6〜9年' WHEN pof.guidance_years = 5 THEN '10年以上' ELSE NULL END AS &quot;指導年数&quot;, pr3.label AS &quot;希望勤務地：都道府県&quot;, GROUP_CONCAT(DISTINCT http://c2.name/ ORDER BY http://c2.name/ SEPARATOR ', ') AS &quot;希望勤務地：市区町村&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_employment_status.status) WHEN '1' THEN 'アルバイト' WHEN '2' THEN '業務委託' WHEN '3' THEN '派遣' WHEN '4' THEN '契約社員' WHEN '5' THEN '正社員' END ORDER BY CAST(JSON_UNQUOTE(jt_employment_status.status) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;希望雇用形態&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_guidance_enum.enum) WHEN '1' THEN '集団指導（10名以上）' WHEN '2' THEN 'グループ指導（10名以下）' WHEN '3' THEN '個別指導' WHEN '4' THEN 'チューター・担任助手' WHEN '5' THEN '教材作成' WHEN '6' THEN '事務スタッフ' WHEN '7' THEN '試験監督' WHEN '8' THEN '家庭教師' WHEN '9' THEN 'オンライン指導' WHEN '11' THEN '教室長' WHEN '12' THEN '専任講師' WHEN '13' THEN '管理職候補' WHEN '14' THEN '学校教員' END ORDER BY CAST(JSON_UNQUOTE(jt_guidance_enum.enum) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;希望職種&quot;, GROUP_CONCAT(DISTINCT CASE JSON_UNQUOTE(jt_work_period.period) WHEN '1' THEN '1ヶ月以内' WHEN '2' THEN '3ヶ月以内' WHEN '3' THEN '6ヶ月以内' WHEN '4' THEN '6ヶ月以上' WHEN '5' THEN '1年未満' WHEN '6' THEN '1年以上' WHEN '7' THEN '未定' END ORDER BY CAST(JSON_UNQUOTE(jt_work_period.period) AS UNSIGNED) SEPARATOR ', ' ) AS &quot;希望勤務期間&quot;, pof.access_view_history AS &quot;アクセス情報：閲覧履歴&quot;, pof.access_keep_list AS &quot;アクセス情報：キープリスト&quot;, DATE_FORMAT(pof.access_last_login, '%Y/%m/%d %H:%i:%s') AS &quot;アクセス情報：最終ログイン日時&quot;, (SELECT name FROM am_admins WHERE id = pof.created_by) AS &quot;作成者&quot;, (SELECT name FROM am_admins WHERE id = pof.updated_by) AS &quot;更新者&quot;, (SELECT name FROM am_admins WHERE id = pof.deleted_by) AS &quot;削除者&quot;, DATE_FORMAT(pof.created_at, '%Y/%m/%d %H:%i:%s') AS &quot;作成日時&quot;, DATE_FORMAT(pof.updated_at, '%Y/%m/%d %H:%i:%s') AS &quot;更新日時&quot;, DATE_FORMAT(pof.deleted_at, '%Y/%m/%d %H:%i:%s') AS &quot;削除日時&quot;, com.admin_note_1 AS &quot;管理メモ1&quot;, com.admin_note_2 AS &quot;管理メモ2&quot; FROM personal_offer_user_filters pof LEFT JOIN prefectures pr1 ON pof.prefecture_id = http://pr1.id/ LEFT JOIN JSON_TABLE( pof.city_id, '$[]' COLUMNS (city_id VARCHAR(10) PATH '$') ) j ON 1=1 LEFT JOIN cities c ON j.city_id = c.city_id LEFT JOIN prefectures pr2 ON pof.location_prefecture = http://pr2.id/ LEFT JOIN companies com ON pof.company_id = http://com.id/ LEFT JOIN JSON_TABLE( pof.current_occupation, '$[]' COLUMNS (occupation VARCHAR(10) PATH '$') ) AS jt ON 1=1 LEFT JOIN JSON_TABLE( pof.school_year, '$[]' COLUMNS (school_year VARCHAR(10) PATH '$') ) AS jt_school_year ON 1=1 LEFT JOIN JSON_TABLE( pof.desired_employment_status, '$[]' COLUMNS (status VARCHAR(10) PATH '$') ) AS jt_employment_status ON 1=1 LEFT JOIN JSON_TABLE( pof.desired_guidance_enum, '$[]' COLUMNS (enum VARCHAR(10) PATH '$') ) AS jt_guidance_enum ON 1=1 LEFT JOIN JSON_TABLE( pof.desired_work_period, '$[]' COLUMNS (period VARCHAR(10) PATH '$') ) AS jt_work_period ON 1=1 LEFT JOIN prefectures pr3 ON pof.location_prefecture = http://pr3.id/ LEFT JOIN JSON_TABLE( pof.desired_city, '$[]' COLUMNS (city_id VARCHAR(10) PATH '$') ) j_desired_city ON 1=1 LEFT JOIN cities c2 ON j_desired_city.city_id = c2.city_id LEFT JOIN JSON_TABLE( pof.guidance_level, '$[]' COLUMNS (level VARCHAR(10) PATH '$') ) AS jt_guidance_level ON 1=1 LEFT JOIN JSON_TABLE( pof.primary_subject, '$[]' COLUMNS (subject VARCHAR(10) PATH '$') ) AS jt_primary_subject ON 1=1 LEFT JOIN JSON_TABLE( pof.secondary_subject, '$[]' COLUMNS (subject VARCHAR(10) PATH '$') ) AS jt_secondary_subject ON 1=1 LEFT JOIN JSON_TABLE( pof.high_school_subject, '$[]' COLUMNS (subject VARCHAR(10) PATH '$') ) AS jt_high_school_subject ON 1=1 LEFT JOIN JSON_TABLE( pof.other_subject, '$[]' COLUMNS (subject VARCHAR(10) PATH '$') ) AS jt_other_subject ON 1=1 GROUP BY http://pof.id/; システム側で叩かれているクエリ（クライアントのオファー管理画面で送信数、応募数、開封率データを取得するため） select count(*) as aggregate from (select offer_groups.id, offer_groups.created_at, cbi.name as classroom_name, (SELECT COUNT('id') FROM offers WHERE offers.offer_group_id = offer_groups.id AND offer_type = 2) AS sent_number, (SELECT COUNT('id') FROM user_applications AS ua JOIN job_basic_informations AS jbi ON http://jbi.id/ = ua.job_id JOIN classroom_basic_informations cbi ON http://cbi.id/ = jbi.classroom_id JOIN offers o ON o.classroom_id = http://cbi.id/ WHERE o.offer_group_id = offer_groups.id AND o.offer_type = 2 AND ua.offer_type = 2) AS apply_number, (SELECT COUNT('id') FROM offers WHERE offers.offer_group_id = offer_groups.id AND offer_type = 2 AND offers.opened_at IS NOT NULL) AS open_offer_number from offer_groups inner join classroom_basic_informations as cbi on http://cbi.id = offer_groups.classroom_id where offer_groups.company_id = 998 and cbi.site = 1 and offer_groups.offer_type = 2 and offer_groups.deleted_at is null limit 2000) as sub; システム側で叩かれているクエリ（総合TOPページの「人気の路線から塾講師バイトを探す」） select stations.line_cd as line_cd, ANY_VALUE(l.line_name) as line_name, COUNT(DISTINCT http://ua.id/) as applied_count, COUNT(DISTINCT http://cbi.id/) as classroom_count from stations left join classroom_basic_informations as cbi on stations.pref_cd = cbi.prefecture_id and ((stations.station_name = cbi.closest_station_name_1 and stations.station_g_cd = cbi.closest_station_g_cd_1) or (stations.station_name = cbi.closest_station_name_2 and stations.station_g_cd = cbi.closest_station_g_cd_2) or (stations.station_name = cbi.closest_station_name_3 and stations.station_g_cd = cbi.closest_station_g_cd_3)) left join job_basic_informations as jbi on jbi.classroom_id = http://cbi.id left join user_applications as ua on ua.job_id = jbi.id inner join lines as l on l.line_cd = stations.line_cd where (cbi.site = 1 or cbi.site is null) group by line_cd order by applied_count desc, classroom_count desc, line_cd asc limit 8; 開発環境の急募の3日前に送られるバッチの停止（小竹） &nbsp;アクション事項 同時に送っているものを30分おきに分散して実行もらう-&gt;金曜までに対応していただく（片岡さん） DB負荷軽減のための重いクエリの方針の整理（小竹） https://docs.google.com/spreadsheets/d/1mJtduUbEfSwPg6RkddetljBpjgteT5NT5vRByPbgQlk/edit?gid=1901428912#gid=1901428912 の共有（小竹） 開発環境の急募の3日前に送られるバッチの停止（小竹） &nbsp;決定事項 「/decision」と入力してこのミーティングで決定した内容を記録します。: b9455583-fc11-4f6e-a694-f0f5e364eda8 7113baef-b9fe-4a11-a28f-9518f6a1b72a DECIDED",
  "parentId": "1235976240",
  "parentTitle": "議事録_2024年",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/1314881658/2024-12-18",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2024-12-18T09:43:42.118Z",
  "author": "kotake_jin",
  "excerpt": "&nbsp;日付 &nbsp;参加者 トモノカイ：池田様( )、片岡様（ ）、原口様 GIG： 資料 スケジュール タスク管理（Jira） &nbsp;議題 項目 プレゼンター メモ 前回のネクストアクションの確認 16 16 incomplete indeed対応に関して、feedforce社と仕様や対応（CSV,JSON）予定などを確認し、実施有無・方針を決める。 17 17 incomple..."
}