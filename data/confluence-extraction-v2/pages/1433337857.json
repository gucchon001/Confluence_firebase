{
  "id": "1433337857",
  "title": "2025-03-18_障害報告",
  "content": "■ 概要 = 障害内容 サイト全体（アドミン/クライアント/サービスサイト）へのアクセスできない状態にあった。 = 障害時間 発生日時：2025-03-18 16:30頃 復旧日時：2025-03-18 16:50頃 = 影響範囲 対象時間に下記のサービスにアクセスした全ユーザ https://www.juku.st/ https://www.juku.st/admin &nbsp; https://www.juku.st/client ■詳細 = 対応経緯 2025/03/18 16:42：片岡様からの連絡を受け、DB使用率の確認およびオートスケール後の負荷率の推移確認 2025/03/18 17:05：DB使用率が下がったことを確認 2025/03/18 17:09：トモノカイ様へ報告 = 直接原因 DBサーバの使用率が高まり、オートスケールしたこと = = オートスケールのログ 2025/03/18 16:38：DBを追加するためのオートスケール開始 2025/03/18 16:46：DBを1台追加完了 2025/03/18 17:05：追加したDBを削除するためのオートスケール開始 2025/03/18 17:15：追加したDBの削除完了 = 根本原因 スロークエリの中でも特に処理が重いクエリが該当時間帯に数多く叩かれていたこと 3/18 16:15から17:15の間に叩かれたスロークエリの数（約2900件） 先週月曜日から昨日までの16:15-17:15のスロークエリの数 2400件 こちらは件数は18日と近いですが叩かれているクエリ自体は数秒程度のものが大量にある形です 1200件 830件 1500件 740件 373件 486件 7500件（オートスケールした） 2900件（オートスケールした） = 暫定対応 特になし = 再発防止策 暫定（アドミン管理画面のメール送信履歴ページへのアクセスを控えるようにトモノカイ社へ依頼） 該当時間帯に実行されていたスロークエリの改善 イベント数が多いスロークエリ、1回あたりの実行時間が長いスロークエリを対象に進める クエリ自体の処理の仕方で改善できるところは行う 仕様上クエリ自体の処理の仕方で改善できない場合は仕様を見直すまたはキャッシュを活用し重いクエリのアクセス頻度を下げる オートスケーリングの設定確認 追加・削除のしきい値が適切か確認 関係者の皆様ご迷惑をおかけし申し訳ありませんでした。",
  "parentId": "1371963553",
  "parentTitle": "障害/インシデント/経緯報告",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/1433337857/2025-03-18_",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2025-03-19T04:09:43.411Z",
  "author": "kotake_jin",
  "excerpt": "■ 概要 = 障害内容 サイト全体（アドミン/クライアント/サービスサイト）へのアクセスできない状態にあった。 = 障害時間 発生日時：2025-03-18 16:30頃 復旧日時：2025-03-18 16:50頃 = 影響範囲 対象時間に下記のサービスにアクセスした全ユーザ https://www.juku.st/ https://www.juku.st/admin &nbsp; https:..."
}