{
  "id": "744947731",
  "title": "752_再応募促進メール送信バッチ",
  "content": "1. 概要 本バッチ処理は毎日 13:05(JST)に自動で以下の処理を行う。 応募を行ったユーザーへ再応募を促すメールを送信する。 2. 要求事項 コマンドラインで実行する。 バッチ処理を開始したらバッチ処理を開始した旨のメッセージと現在日時を含むログを出力する。 【FIX】応募情報 から 下記条件 に当てはまる応募を抽出し、応募ごとにメール送信処理を行う。 再応募促進メールがまだ送信されていない。 管理者による確認が完了しており、確認完了日時が実行の前日の00:00:00と当日の23:59:59までの間にある。 採用状況が、採用、連絡取れず、辞退、欠席のいずれかである。 採用状況が採用であるが、1か月以内に退職している。 採用ステータス（会員）が不採用または辞退ではない。 801_バウンスメール処理バッチ で保存したバウンスしているメールアドレスかどうか確認し、バウンスメールアドレスに該当するならメール送信処理は行わず以下の情報が入ったログを出力する。 実行日時、応募番号、ユーザー番号、対象メールアドレス、メール送信をスキップしたことがわかる情報 バウンスメールアドレスに該当しない場合、メール送信を実行したら以下の情報が入ったログを出力する。 実行日時、応募番号、ユーザー番号、対象メールアドレス、アクション（成功or失敗） メール送信が失敗した場合はリトライ処理を行わない。 一度に大量のメールを送信しないように、0.1秒間スリープ処理を行う。 必達終了時間は14:05(JST)とする。処理開始日時から処理終了日時まで1時間以内に完了するようにパフォーマンスを確保する。 上記仕様で問題なく処理を実行できる目安となる件数は10,000件である。1時間以内に最大10,000件の処理を行えるパフォーマンスを確保する。 バッチ処理終了時には、バッチ処理が終了した旨のメッセージと終了日時を含んだログを出力する。 2.1. メールテンプレート 【作成中】再応募促進メール（会員宛） 2.2. ワークフロー 【FIX】オファー・応募・選考・採用フロー 3. 要件定義 3.1. 入力 入力項目 変数名 入力方式 説明 バリデーション 応募番号 データベース 帳票を参照 【FIX】応募情報 自然数 ユーザー番号 データベース 帳票を参照 【FIX】会員：アカウント情報 送信対象メールアドレス データベース 会員のメールアドレス 帳票を参照 【FIX】会員：アカウント情報 メールテンプレート &nbsp; ファイル 【作成中】再応募促進メール（会員宛） &nbsp; 3.2. 出力 出力項目 出力方式 説明 再応募促進メール : 応募先の教室名 メール本文 詳細は以下を参照する。 【作成中】再応募促進メール（会員宛） 再応募促進メール : 会員の名前 メール本文 詳細は以下を参照する。 【作成中】再応募促進メール（会員宛） 再応募促進メール : 選考結果 メール本文 採用となったが１ヶ月以内に退職は「採用となったが１ヶ月以内に退職」 それ以外の場合は「今回の応募についてはご縁がなかった」 を表示する。 再応募促進メール : 応募者へのメッセージ メール本文 対象の会員が退会している場合は、「以下のメールアドレスにご状況をお知らせください。」 退会していない場合は「下記のURLより採用お祝い申請をご利用ください。」 を表示する。 再応募促進メール : 応募者に対応したアドレス メール本文 対象の会員が退会している場合は、「 users@jukust.jp 」 退会していない場合は対象の応募に対応するお祝い申請URL を表示する。 再応募促進メール : 同じ駅の塾URL メール本文 対象応募と同じ駅の塾を絞り込んだ検索一覧URLを表示する。 キャリアの場合はキャリアの検索一覧、通常の場合は通常の検索一覧画面のURLを表示する。 再応募促進メール : 同じ路線の塾URL メール本文 対象応募と同じ路線の塾を絞り込んだ検索一覧URLを表示する。 キャリアの場合はキャリアの検索一覧、通常の場合は通常の検索一覧画面のURLを表示する。 再応募促進メール : 同じ市区町村の塾URL メール本文 対象応募と同じ市区町村の塾を絞り込んだ検索一覧URLを表示する。 キャリアの場合はキャリアの検索一覧、通常の場合は通常の検索一覧画面のURLを表示する。 再応募促進メール : 人気の条件 メール本文 3件表示する。 応募対象求人がキャリアの場合は プロ講師募集 名門・難関に強い 経験者時給優遇あり 応募対象求人がキャリアではない場合は 曜日固定ナシ 私服OK 週1日からOK をそれぞれ表示する。 【作成中】再応募促進メール（会員宛） 再応募促進メール : 人気の条件の塾URL メール本文 3件表示する。 応募対象求人がキャリアの場合は プロ講師募集 名門・難関に強い 経験者時給優遇あり の条件を検索できるURL 応募対象求人がキャリアではない場合は 曜日固定ナシ 私服OK 週1日からOK の条件を検索できるURL を表示する。 【作成中】再応募促進メール（会員宛） 再応募促進メール送信済フラグ データベース メールを送信した応募に対して送信済みフラグを更新する。 【FIX】応募情報 3.3. 処理 バッチ処理を開始したら、バッチ処理を開始した旨のログを出力する。 書式については https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/744947731/752#3.5.-%E3%83%AD%E3%82%B0 を参照する。 【FIX】応募情報 から下記条件に当てはまる応募を抽出し、応募ごとにメール送信処理を行う。 【FIX】応募情報 の管理者確認フラグがtrueであり、 【FIX】応募情報 の管理者確認日時がバッチ実行の前日の00:00:00から、当日の23:59:59までの間である。 【FIX】応募情報 の採用ステータス（クライアント企業）が、「採用」「連絡なし」「辞退」「欠席」のいずれかである。 【FIX】応募情報 の採用ステータス（クライアント企業）が「採用」かつ在籍確認が「&times;：１ヶ月未満で辞退」である。 【FIX】応募情報 の採用ステータス（会員）が「不採用」または「辞退」ではない。 801_バウンスメール処理バッチ で保存したバウンスしているメールアドレスかどうか確認し、バウンスメールアドレスに該当するならメール送信処理は行わず以下の情報が入ったログを出力する。 書式については https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/744947731/752#3.5.-%E3%83%AD%E3%82%B0 を参照する。 バウンスメールアドレスに該当しない場合、メール送信を実行するる。 https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/744947731/752#3.5.-%E3%83%AD%E3%82%B0 を参照し、メール送信時にログを出力する。 0.1秒間スリープ処理を行う。 メール送信が失敗した場合はリトライ処理を行わない。 バッチ処理終了時には、バッチ処理が終了した旨のメッセージと終了日時を含んだログを出力する。 書式については https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/744947731/752#3.5.-%E3%83%AD%E3%82%B0 を参照する。 3.4. エラー処理 下記通知先にエラーログ通知を行う。 バッチエラー時通知先 3.5. ログ バッチ略称はsend_reapplication_promotion_mail (SRPM) とする。 バッジ処理全体が開始した時と終了した時に以下のログを出力する。 開始時 [752_SRPM] Started at {処理開始日時}. 終了時 [752_SRPM] Finished at {処理終了日時}. メール送信時 成功時 [752_SRPM] Succeeded to send reapplication promotion mail for mail_address={メールアドレス} application_id={応募番号} user_id={ユーザー番号} time={現在時刻} . 失敗時 [752_SRPM] Failed to send reapplication promotion mail for for mail_address={メールアドレス} application_id={応募番号} user_id={ユーザー番号} time={現在時刻} . バウンスメール対応でメール未送信時 [752_SRPM] Sending pending because of bounce mail for mail_address={メールアドレス} application_id={応募番号} user_id={ユーザー番号} time={現在時刻} . 4. スコープ外・制限事項 -",
  "parentId": "743703182",
  "parentTitle": "750_■応募・面接関連バッチ",
  "labels": [],
  "url": "/spaces/CLIENTTOMO/pages/744947731/752_",
  "spaceKey": "CLIENTTOMO",
  "lastModified": "2023-11-21T03:12:12.628Z",
  "author": "hajime shoji (Unlicensed)",
  "excerpt": "1. 概要 本バッチ処理は毎日 13:05(JST)に自動で以下の処理を行う。 応募を行ったユーザーへ再応募を促すメールを送信する。 2. 要求事項 コマンドラインで実行する。 バッチ処理を開始したらバッチ処理を開始した旨のメッセージと現在日時を含むログを出力する。 【FIX】応募情報 から 下記条件 に当てはまる応募を抽出し、応募ごとにメール送信処理を行う。 再応募促進メールがまだ送信されていな..."
}