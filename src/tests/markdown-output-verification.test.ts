/**
 * Markdownå¤‰æ›ã®è©³ç´°ãªå…¥å‡ºåŠ›ç¢ºèªãƒ†ã‚¹ãƒˆ
 */
import { normalizeMarkdownSymbols } from '@/lib/markdown-utils';

describe('Markdownå¤‰æ›ã®å…¥å‡ºåŠ›ç¢ºèª', () => {
  it('ã€å®Ÿéš›ã®LLMå‡ºåŠ›ã€‘å®Œå…¨ãªå¤‰æ›ãƒ†ã‚¹ãƒˆ', () => {
    const input = `## ğŸ‘¥ è©³ç´°

### 1.ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã«åˆ©ç”¨ã•ã‚Œã‚‹æƒ…å ±
ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã«ã¯ã€ä¼šå“¡ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã®ã†ã¡ã€ä»¥ä¸‹ã®æƒ…å ±ãŒåˆ©ç”¨ã•ã‚Œã¾ã™ã€‚
1.**ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: ä¼šå“¡ã®ãƒ­ã‚°ã‚¤ãƒ³IDã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚
2.  **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: ä¼šå“¡ã®èªè¨¼æƒ…å ±ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚

### 2.ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯æ©Ÿèƒ½
ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—ãŒç¶šã„ãŸå ´åˆã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–æ©Ÿèƒ½ã§ã™ã€‚#### ãƒ­ãƒƒã‚¯å¯¾è±¡
ä»¥ä¸‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ãŒã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯ã®å¯¾è±¡ã¨ãªã‚Šã¾ã™ã€‚*   ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ç®¡ç†è€…
*   å…¨ä½“ç®¡ç†è€…

#### ãƒ­ãƒƒã‚¯è§£é™¤æ¡ä»¶
ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§ãƒ­ãƒƒã‚¯ãŒè§£é™¤ã•ã‚Œã¾ã™ã€‚
1.**æ™‚é–“çµŒéã«ã‚ˆã‚‹è‡ªå‹•è§£é™¤**: 30åˆ†é–“å¾…ã¤ã¨è‡ªå‹•è§£é™¤
2.**ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã«ã‚ˆã‚‹å³æ™‚è§£é™¤**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å†è¨­å®šã§å³åº§ã«ãƒ­ãƒƒã‚¯è§£é™¤`;

    const result = normalizeMarkdownSymbols(input);
    
    console.log('\n' + '='.repeat(80));
    console.log('ã€å…¥åŠ›ã€‘');
    console.log('='.repeat(80));
    console.log(input);
    
    console.log('\n' + '='.repeat(80));
    console.log('ã€å‡ºåŠ›ã€‘');
    console.log('='.repeat(80));
    console.log(result);
    
    console.log('\n' + '='.repeat(80));
    console.log('ã€ç¢ºèªé …ç›®ã€‘');
    console.log('='.repeat(80));
    
    // ç¢ºèªé …ç›®
    const checks = [
      { name: 'è¦‹å‡ºã—1ã®ã‚¹ãƒšãƒ¼ã‚¹ (### 1. ãƒ­ã‚°ã‚¤ãƒ³)', test: result.includes('### 1. ãƒ­ã‚°ã‚¤ãƒ³') },
      { name: 'è¦‹å‡ºã—2ã®ã‚¹ãƒšãƒ¼ã‚¹ (### 2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ)', test: result.includes('### 2. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ') },
      { name: 'è¦‹å‡ºã—1ã®å¾Œã®ç©ºè¡Œ', test: /### 1\. ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼ã«åˆ©ç”¨ã•ã‚Œã‚‹æƒ…å ±\n\n/.test(result) },
      { name: 'è¦‹å‡ºã—2ã®å¾Œã®ç©ºè¡Œ', test: /### 2\. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ãƒƒã‚¯æ©Ÿèƒ½\n\n/.test(result) },
      { name: 'ã‚µãƒ–è¦‹å‡ºã—ã®å¾Œã®ç©ºè¡Œ', test: /#### ãƒ­ãƒƒã‚¯å¯¾è±¡\n\n/.test(result) },
      { name: 'æ•°å­—ãƒªã‚¹ãƒˆ1ã®ã‚¹ãƒšãƒ¼ã‚¹', test: result.includes('1. **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**') },
      { name: 'æ•°å­—ãƒªã‚¹ãƒˆ2ã®ã‚¹ãƒšãƒ¼ã‚¹', test: result.includes('2. **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**') },
      { name: 'ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ã‚’ãƒã‚¤ãƒ•ãƒ³ã«å¤‰æ›', test: result.includes('- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¼æ¥­ç®¡ç†è€…') },
      { name: 'è¡Œæœ«ã®è¦‹å‡ºã—åˆ†é›¢', test: /ã§ã™ã€‚\n\n#### ãƒ­ãƒƒã‚¯å¯¾è±¡/.test(result) },
    ];
    
    checks.forEach(check => {
      const status = check.test ? 'âœ“ æˆåŠŸ' : 'âœ— å¤±æ•—';
      console.log(`${status}: ${check.name}`);
      expect(check.test).toBe(true);
    });
    
    console.log('\n');
  });
});

