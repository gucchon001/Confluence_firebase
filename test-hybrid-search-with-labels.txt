🔍 ハイブリッド検索でラベル機能を含めて動作確認...

📊 データベースの状態確認...
📊 総チャンク数: 93

🔍 ラベル付きチャンクの分析...
📊 ラベル付きチャンク数: 0
⚠️ ラベル付きチャンクがありません

📊 ラベル別の統計...
⚠️ ラベルがありません

🔍 ハイブリッド検索の基本テスト...

📝 検索クエリ: "機能 要件 システム"
  検索時間: 4330ms
  検索結果: 5件
    1. 要件定義フォーマット（子機能）
      PageID: 722600117, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    2. 要件定義フォーマット（親機能）
      PageID: 723025921, スコア: undefined
      ソース: bm25
      ラベル: [機能要件, 要件定義フォーマット（親機能）]
    3. 170_【要求FIX】求人管理機能
      PageID: 704053484, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

📝 検索クエリ: "管理 フロー プロセス"
  検索時間: 170ms
  検索結果: 5件
    1. 【FIX】求人登録・公開・削除フロー
      PageID: 686653475, スコア: undefined
      ソース: bm25
      ラベル: [ワークフロー]
    2. 303_【FIX】請求書PDF発行機能
      PageID: 718438756, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 【FIX】全体管理者登録・削除フロー
      PageID: 674758673, スコア: undefined
      ソース: bm25
      ラベル: [ワークフロー]

📝 検索クエリ: "データベース 同期 更新"
  検索時間: 168ms
  検索結果: 5件
    1. 性能検証マニュアル
      PageID: 1452310655, スコア: undefined
      ソース: bm25
      ラベル: [none]
    2. 624_【FIX】契約更新辞退機能
      PageID: 1392771106, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 623_【FIX】契約更新機能
      PageID: 705429584, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

📝 検索クエリ: "API 連携 外部"
  検索時間: 159ms
  検索結果: 5件
    1. 121-2_【FIX】企業検索API
      PageID: 765886465, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    2. 111-2_【FIX】契約検索API
      PageID: 766083107, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 151-2_【FIX】教室グループ検索API
      PageID: 766083087, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

📝 検索クエリ: "エラー 処理 例外"
  検索時間: 132ms
  検索結果: 5件
    1. 055_【FIX】各種設定
      PageID: 841515266, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    2. 631_【FIX】請求管理 - 一覧閲覧機能
      PageID: 705593389, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 176_【FIX】求人掲載フラグ切り替え機能（API）
      PageID: 724598798, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

🔍 ラベルフィルタリングのテスト...
⚠️ ラベル付きチャンクがないため、ラベルフィルタリングをスキップ

🔍 ベクトル検索のテスト...

📝 ベクトル検索クエリ: "機能 要件 システム"
  ベクトル検索時間: 159ms
  ベクトル検索結果: 5件
    1. 【FIX】求人：基本情報
      PageID: 686129350, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    2. 【FIX】求人：PR情報
      PageID: 686620791, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    3. 【FIX】応募情報
      PageID: 681214046, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]

📝 ベクトル検索クエリ: "管理 フロー プロセス"
  ベクトル検索時間: 171ms
  ベクトル検索結果: 5件
    1. 【FIX】求人：基本情報
      PageID: 686129350, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    2. 求人フォーマット（本システム外）
      PageID: 686751865, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    3. 442_【FIX】管理者招待・登録機能
      PageID: 703496358, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]

📝 ベクトル検索クエリ: "データベース 同期 更新"
  ベクトル検索時間: 188ms
  ベクトル検索結果: 5件
    1. 【FIX】全体管理者登録情報
      PageID: 682885233, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    2. 【作成中】その他マスタ（マスタテーブル）
      PageID: 698253355, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]
    3. 【修正中】請求：基本情報
      PageID: 681738361, スコア: undefined
      ソース: vector
      距離: unknown
      ラベル: [none]

🔍 BM25検索のテスト...

📝 BM25検索クエリ: "機能 要件 システム"
  BM25検索時間: 208ms
  BM25検索結果: 5件
    1. 要件定義フォーマット（子機能）
      PageID: 722600117, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    2. 要件定義フォーマット（親機能）
      PageID: 723025921, スコア: undefined
      ソース: bm25
      ラベル: [機能要件, 要件定義フォーマット（親機能）]
    3. 170_【要求FIX】求人管理機能
      PageID: 704053484, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

📝 BM25検索クエリ: "管理 フロー プロセス"
  BM25検索時間: 177ms
  BM25検索結果: 5件
    1. 【FIX】求人登録・公開・削除フロー
      PageID: 686653475, スコア: undefined
      ソース: bm25
      ラベル: [ワークフロー]
    2. 303_【FIX】請求書PDF発行機能
      PageID: 718438756, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 【FIX】全体管理者登録・削除フロー
      PageID: 674758673, スコア: undefined
      ソース: bm25
      ラベル: [ワークフロー]

📝 BM25検索クエリ: "データベース 同期 更新"
  BM25検索時間: 162ms
  BM25検索結果: 5件
    1. 性能検証マニュアル
      PageID: 1452310655, スコア: undefined
      ソース: bm25
      ラベル: [none]
    2. 624_【FIX】契約更新辞退機能
      PageID: 1392771106, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]
    3. 623_【FIX】契約更新機能
      PageID: 705429584, スコア: undefined
      ソース: bm25
      ラベル: [機能要件]

⚡ 検索パフォーマンステスト...

📊 検索パフォーマンス結果:
  "システム": 248ms, 10件, ラベル付き: Yes
  "管理": 211ms, 10件, ラベル付き: Yes
  "データ": 418ms, 10件, ラベル付き: Yes
  "API": 199ms, 10件, ラベル付き: Yes
  "エラー": 270ms, 10件, ラベル付き: Yes

📊 平均検索時間: 269.20ms

🔍 ラベル機能の詳細テスト...

🎯 総合評価:
==================================================
✅ ハイブリッド検索: Yes
✅ ベクトル検索: Yes
✅ BM25検索: Yes
✅ ラベル機能: No
✅ ラベルフィルタリング: No
✅ 検索性能: Yes (平均: 269.20ms)

🏆 総合スコア: 4/6
👍 ハイブリッド検索とラベル機能は概ね動作しています。

✅ ハイブリッド検索とラベル機能のテスト完了！
