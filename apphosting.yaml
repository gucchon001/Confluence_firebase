# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # インスタンス設定（コールドスタート軽減のためminを1に）
  minInstances: 1
  maxInstances: 4
  
  # メモリ設定（埋め込みモデル + 複数同時リクエスト対応）
  memoryMiB: 4096
  
  # CPU設定
  cpu: 2

# 環境変数（runConfigと同じレベル）
env:
  # Next.js Public環境変数（ビルド時とランタイム時に必要）
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: AIzaSyAgaGihnyshajIN2YC7CdJR_H0bJMg_hkI
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    value: confluence-copilot-ppjye.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: confluence-copilot-ppjye
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: confluence-copilot-ppjye.firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: "122015916118"
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:122015916118:web:50d117434b1318f173dbf7
    availability:
      - BUILD
      - RUNTIME
  
  - variable: NEXT_PUBLIC_USE_MOCK_DATA
    value: "false"
    availability:
      - BUILD
      - RUNTIME
  
  # Confluence API（ランタイムのみ）
  - variable: CONFLUENCE_BASE_URL
    value: https://giginc.atlassian.net
    availability:
      - RUNTIME
  
  - variable: CONFLUENCE_USER_EMAIL
    value: kanri@jukust.jp
    availability:
      - RUNTIME
  
  - variable: CONFLUENCE_API_TOKEN
    secret: confluence_api_token
    availability:
      - RUNTIME
  
  - variable: CONFLUENCE_SPACE_KEY
    value: CLIENTTOMO
    availability:
      - RUNTIME
  
  # Google Cloud（ビルド時とランタイムの両方）
  - variable: GOOGLE_CLOUD_PROJECT
    value: confluence-copilot-ppjye
    availability:
      - BUILD
      - RUNTIME
  
  # Gemini API（ビルド時とランタイムの両方）
  - variable: GEMINI_API_KEY
    secret: gemini_api_key
    availability:
      - BUILD
      - RUNTIME
  
  # その他（ランタイムのみ）
  - variable: EMBEDDINGS_PROVIDER
    value: local
    availability:
      - RUNTIME
  
  - variable: USE_LLM_EXPANSION
    value: "true"
    availability:
      - RUNTIME
