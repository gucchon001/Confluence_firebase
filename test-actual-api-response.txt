🔍 実際のAPIレスポンスを確認して仕様書を検証中...

📡 直接APIを叩いて生のレスポンスを確認中...
URL: https://giginc.atlassian.net/wiki/rest/api/content?spaceKey=CLIENTTOMO&expand=body.storage%2Cspace%2Cversion%2Cmetadata.labels&limit=1&start=0
✅ APIレスポンス取得成功
- 取得ページ数: 1

📄 生のAPIレスポンス構造:
- id: 640450787 (型: string)
- title: client-tomonokai-juku Home (型: string)
- space: {"id":640450619,"ari":"ari:cloud:confluence:dc2f5a8c-7234-4d2b-9607-b8ade9b1d8b1:space/640450619","key":"CLIENTTOMO","alias":"CLIENTTOMO","name":"client-tomonokai-juku","type":"global","status":"current","_expandable":{"settings":"/rest/api/space/CLIENTTOMO/settings","metadata":"","identifiers":"","roles":"","icon":"","typeSettings":"","description":"","history":"","operations":"","lookAndFeel":"/rest/api/settings/lookandfeel?spaceKey=CLIENTTOMO","permissions":"","theme":"/rest/api/space/CLIENTTOMO/theme","homepage":"/rest/api/content/640450787"},"_links":{"webui":"/spaces/CLIENTTOMO","self":"https://giginc.atlassian.net/wiki/rest/api/space/CLIENTTOMO"}}
- version: {"by":{"type":"known","accountId":"6156a32d99b4b8006a70211e","accountType":"atlassian","email":"","publicName":"ejiri_yusuke","profilePicture":{"path":"/wiki/aa-avatar/6156a32d99b4b8006a70211e","width":48,"height":48,"isDefault":false},"displayName":"ejiri_yusuke","isExternalCollaborator":false,"isGuest":false,"locale":"ja","accountStatus":"active","_expandable":{"operations":"","personalSpace":""},"_links":{"self":"https://giginc.atlassian.net/wiki/rest/api/user?accountId=6156a32d99b4b8006a70211e"}},"when":"2022-12-01T05:33:12.822Z","friendlyWhen":"12月 01, 2022","message":"","number":1,"minorEdit":false,"confRev":"confluence$content$640450787.3","contentTypeModified":false,"_expandable":{"collaborators":"","content":"/rest/api/content/640450787"},"_links":{"self":"https://giginc.atlassian.net/wiki/rest/api/content/640450787/version/1"}}
- metadata: {"labels":{"results":[{"prefix":"global","name":"フォルダ","id":"1726185492","label":"フォルダ"}],"start":0,"limit":200,"size":1,"_links":{"next":"/rest/api/content/640450787/label?next=true&limit=200&start=200","self":"https://giginc.atlassian.net/wiki/rest/api/content/640450787/label"}},"_expandable":{"lastEditedTime":"","currentuser":"","comments":"","createdBySpaceBlueprint":"","isActiveLiveEditSession":"","sourceTemplateEntityId":"","simple":"","properties":"","frontend":"","likes":""}}
- body: {"storage":{"value":"\n<ac:structured-macro ac:name=\"tip\" ac:schema-version=\"1\" ac:macro-id=\"f12cb885-f6bd-4f23-87bd-b18914372d00\"><ac:rich-text-body>\n    <h3><strong>あなたの新しいスペースへようこそ!</strong></h3>\n    <p>Confluenceのスペースは、コンテンツやお知らせをあなたのチームとシェアするのに最適です。こちらがあなたのホームページです。現在はスペースでの最近のアクティビティが表示されていますが、お好みに合わせてこのページをカスタマイズすることができます。</p>\n    <p><strong>最初にお勧めするステップ:</strong></p>\n    <ul>\n      <li>\n        <p><strong>この概要をカスタマイズ</strong>&nbsp;右上にある&nbsp;<strong>編集アイコン</strong>&nbsp;を使って、この概要をカスタマイズします。</p>\n      </li>\n      <li>\n        <p><strong>スペース サイドバー</strong>&nbsp;の&nbsp;<strong>+</strong>&nbsp;をクリックしてページを新規作成して続行すると、計画やアイデアなど、何でも自由に入力できるようになります。</p>\n      </li>\n    </ul>\n  </ac:rich-text-body></ac:structured-macro>\n<hr />\n<p />\n<p />\n<ac:structured-macro ac:name=\"info\" ac:schema-version=\"1\" ac:macro-id=\"63ccf45c-9ad2-49f9-afa4-9fd0da897cb9\"><ac:rich-text-body>\n    <h6>参考情報</h6>\n    <ul>\n      <li>\n        <p>スペースの簡単な説明と最適な使用方法については、&nbsp;<a href=\"https://www.atlassian.com/collaboration/confluence-organize-work-in-spaces\">「Confluence 101: organize your work in spaces」を参照してください。</a> </p>\n      </li>\n      <li>\n        <p>スペースを設定する方法の概要については&nbsp;<a href=\"https://confluence.atlassian.com/confcloud/set-up-your-space-homepage-827106219.html\">アトラシアンのガイドを参照してください</a>. </p>\n      </li>\n      <li>\n        <p>空白のスペースから始めるのは大変そうと感じたら、より手軽な<a href=\"https://confluence.atlassian.com/display/ConfCloud/Create+a+Space+From+a+Template\">&nbsp;スペース テンプレート</a>&nbsp;をお試しください。</p>\n      </li>\n    </ul>\n  </ac:rich-text-body></ac:structured-macro>\n<p />","representation":"storage","embeddedContent":[],"_expandable":{"content":"/rest/api/content/640450787"}},"_expandable":{"editor":"","atlas_doc_format":"","view":"","export_view":"","styled_view":"","dynamic":"","editor2":"","anonymous_export_view":""}}

🔍 フィールド詳細確認:

📝 body構造:
- body: 存在
- body.storage: 存在
- body.storage.value: 存在
- body.storage.value長: 1538文字
- body.storage.valueプレビュー: "
<ac:structured-macro ac:name="tip" ac:schema-version="1" ac:macro-id="f12cb885-f6bd-4f23-87bd-b18914372d00"><ac:rich-text-body>
    <h3><strong>あなたの新しいスペースへようこそ!</strong></h3>
    <p>Confluenceのスペースは..."

🏢 space構造:
- space: 存在
- space.key: CLIENTTOMO
- space.name: client-tomonokai-juku

📅 version構造:
- version: 存在
- version.when: 2022-12-01T05:33:12.822Z
- version.number: 1

🏷️ metadata構造:
- metadata: 存在
- metadata.labels: 存在
- metadata.labels.results: 存在
- metadata.labels.results長: 1
- metadata.labels.results内容: [{"prefix":"global","name":"フォルダ","id":"1726185492","label":"フォルダ"}]

🔄 現在のマッピングロジックをテスト中...
- マッピング結果:
  - id: 640450787
  - title: client-tomonokai-juku Home
  - content長: 1538文字
  - lastModified: 2022-12-01T05:33:12.822Z
  - spaceKey: CLIENTTOMO
  - url: https://giginc.atlassian.net/wiki/spaces/CLIENTTOMO/pages/640450787
  - labels: {"results":[{"prefix":"global","name":"フォルダ","id":"1726185492","label":"フォルダ"}],"start":0,"limit":200,"size":1,"_links":{"next":"/rest/api/content/640450787/label?next=true&limit=200&start=200","self":"https://giginc.atlassian.net/wiki/rest/api/content/640450787/label"}}

📝 チャンク分割をテスト中...
- 分割されたチャンク数: 1
- チャンク 1:
  - サイズ: 1537文字
  - インデックス: 0
  - スペース: CLIENTTOMO
  - 最終更新: 2022-12-01T05:33:12.822Z

📋 仕様書との照合:
- コンテンツ取得方法:
  - body.storage.value: 1538文字
  - マッピング後: 1538文字
  - 一致: ✅
- スペースキー取得方法:
  - space.key: CLIENTTOMO
  - マッピング後: CLIENTTOMO
  - 一致: ✅
- 更新日時取得方法:
  - version.when: 2022-12-01T05:33:12.822Z
  - マッピング後: 2022-12-01T05:33:12.822Z
  - 一致: ✅
- ラベル取得方法:
  - metadata.labels.results: [{"prefix":"global","name":"フォルダ","id":"1726185492","label":"フォルダ"}]
  - マッピング後: [{"prefix":"global","name":"フォルダ","id":"1726185492","label":"フォルダ"}]
  - 一致: ✅

✅ APIレスポンス確認完了
